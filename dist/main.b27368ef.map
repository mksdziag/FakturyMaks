{"version":3,"sources":["node_modules/uuid/lib/rng-browser.js","node_modules/uuid/lib/bytesToUuid.js","node_modules/uuid/v1.js","node_modules/uuid/v4.js","node_modules/uuid/index.js","js/main.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["uiController","DOMElements","dataInpuForm","document","querySelector","docTypeInp","docNumInp","docPlaceInp","docDateInp","docSellDateInp","sellerNameInp","sellerStreetInp","sellerCityInp","sellerPostCodeInp","sellerNipInp","sellerSaveBtn","sellerLoadBtn","buyerNameInp","buyerStreetInp","buyerCityInp","buyerPostCodeInp","buyerNipInp","buyerSaveBtn","buyerLoadTrigger","payMethodInp","payTermInp","payAccountInp","accountSaveBtn","accountLoadBtn","itemNameInp","itemUnitInp","itemQuantInp","itemPriceInp","itemNetValInp","itemTaxRateInp","itemTaxValInp","itemTotValInp","itemSaveBtn","itemLoadTrigger","storageListModalClose","addBtn","draftItemConstructor","draftItemTable","drawtSumTable","itemDelBtn","querySelectorAll","storageList","storageListModal","storageListBackdrop","genBtn","printBtn","invoice","invType","invNum","invPlace","invSellDate","invDate","invSellerName","invSellerStr","invSellerCity","invSellerPostCode","invSellerNip","invBuyerName","invBuyerStr","invBuyerCity","invBuyerPostCode","invBuyerNip","invoicePositionsTable","invoicePositionsTableSum","invFinalToPay","invFinalPayMethod","invFinalPayTerm","invFinalAccount","displayDraftItemNotFilledInputs","value","valueAsNumber","toFixed","parseFloat","clearDraftItemFieds","reset","focus","addItemToDraftItemsList","id","item","storageController","draftItemsData","items","find","newRow","createElement","classList","add","dataset","identifier","innerHTML","name","unit","quantity","netPrice","netValue","taxRate","taxValue","total","appendChild","clearInnerHtml","elem","rebuildDraftItemsTable","forEach","buildDraftSumValues","draftSumRow","summaries","totalNetVal","totalTaxVal","generateDraftSumRow","areTaxRateItems","checkingTaxRate","checkedTaxRate","taxRates","taxRatefinalRow","taxTotal","generateInvoice","invoiceObj","invoices","details","textContent","type","number","place","date","sellDate","seller","street","city","postCode","nip","buyer","payment","toPay","method","term","account","generateInvoicePositions","positionsArray","indexOf","invoiceSumRow","isTax23","some","isTax8","isTax5","isTax3","isTax00","generateInvoiceSumRow","isTaxRate","vatRatefinalrow","showCompleteInfo","competionModal","style","display","setTimeout","hideCompletionModal","remove","activatePrintInvoice","removeAttribute","closeStorageModal","hideBackdropModal","openStorageModal","displayBackdropModal","fillInputForm","e","target","contains","console","log","itemName","JSON","parse","localStorage","getItem","sellers","sellerName","buyers","buyerName","sellerAccounts","accountNumber","buildStorageSellersList","localStorageBuyers","Object","entries","li","loadButton","deleteButton","nameSpan","streetSpan","citySpan","nipSpan","noLocalStorageDataInfo","buildStorageBuyersList","buildStorageSellerAccountsList","localStorageAccounts","accountNumberSpan","buildStorageItemsList","localStorageItems","priceSpan","taxSpan","dateSpan","message","noDataInfo","tax23","tax8","tax5","tax3","tax0","createInvoiceObj","positions","deleteDraftItem","delID","filter","createNewItem","newItem","push","calculateDraftItemsTotals","draftItemsTotal","reduce","acc","draftItemsTotalNetValue","draftItemsTotalTaxValue","claculateDraftTaxRatesValues","taxRateItemsArr","taxRateNetValue","taxRateTax","taxRateTotal","createDraftVatRatesValues","saveSellerToLocal","setItem","stringify","saveBuyerToLocal","saveItemToLocal","saveAccountToLocal","sellerAccount","appController","StorageCtrl","UiCtrl","loadEventListeners","addEventListener","addItem","calculateDraftItem","verifyInputField","verifyDraftItemInput","isBankAccountCheck","saveSeller","loadSeller","saveBuyer","retrieveBuyers","saveAccount","retrieveAccounts","saveItem","retrieveItems","deleteLocalStorageEntry","init","parentElement","setAttribute","validationFunctions","validatePostCode","validateNip","validateAccount","validateFillInFormInput","validateDraftItemInputs","verifyCompletedForm","inputs","Array","from","getElementsByClassName","input","reg","test","disabled","newItemId","verified","preventDefault","now","Date","createdDate","getUTCFullYear","getUTCMonth","getUTCDate","targetClasses","$","on","printThis","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","i","length","module"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AKAA;;AACA;;AAEA,IAAMA,eAAgB,YAAW;AAC/B;AACA,MAAMC,cAAc;AAClB;AACA;AACA;AACAC,kBAAcC,SAASC,aAAT,CAAuB,YAAvB,CAJI;;AAMlB;AACAC,gBAAYF,SAASC,aAAT,CAAuB,iBAAvB,CAPM;AAQlBE,eAAWH,SAASC,aAAT,CAAuB,mBAAvB,CARO;AASlBG,iBAAaJ,SAASC,aAAT,CAAuB,kBAAvB,CATK;AAUlBI,gBAAYL,SAASC,aAAT,CAAuB,iBAAvB,CAVM;AAWlBK,oBAAgBN,SAASC,aAAT,CAAuB,sBAAvB,CAXE;;AAalB;AACAM,mBAAeP,SAASC,aAAT,CAAuB,oBAAvB,CAdG;AAelBO,qBAAiBR,SAASC,aAAT,CAAuB,sBAAvB,CAfC;AAgBlBQ,mBAAeT,SAASC,aAAT,CAAuB,oBAAvB,CAhBG;AAiBlBS,uBAAmBV,SAASC,aAAT,CAAuB,yBAAvB,CAjBD;AAkBlBU,kBAAcX,SAASC,aAAT,CAAuB,mBAAvB,CAlBI;AAmBlBW,mBAAeZ,SAASC,aAAT,CAAuB,mBAAvB,CAnBG;AAoBlBY,mBAAeb,SAASC,aAAT,CAAuB,mBAAvB,CApBG;;AAsBlB;AACAa,kBAAcd,SAASC,aAAT,CAAuB,mBAAvB,CAvBI;AAwBlBc,oBAAgBf,SAASC,aAAT,CAAuB,qBAAvB,CAxBE;AAyBlBe,kBAAchB,SAASC,aAAT,CAAuB,mBAAvB,CAzBI;AA0BlBgB,sBAAkBjB,SAASC,aAAT,CAAuB,wBAAvB,CA1BA;AA2BlBiB,iBAAalB,SAASC,aAAT,CAAuB,kBAAvB,CA3BK;AA4BlBkB,kBAAcnB,SAASC,aAAT,CAAuB,kBAAvB,CA5BI;AA6BlBmB,sBAAkBpB,SAASC,aAAT,CAAuB,kBAAvB,CA7BA;;AA+BlB;AACAoB,kBAAcrB,SAASC,aAAT,CAAuB,kBAAvB,CAhCI;AAiClBqB,gBAAYtB,SAASC,aAAT,CAAuB,gBAAvB,CAjCM;AAkClBsB,mBAAevB,SAASC,aAAT,CAAuB,mBAAvB,CAlCG;AAmClBuB,oBAAgBxB,SAASC,aAAT,CAAuB,oBAAvB,CAnCE;AAoClBwB,oBAAgBzB,SAASC,aAAT,CAAuB,oBAAvB,CApCE;;AAsClB;AACAyB,iBAAa1B,SAASC,aAAT,CAAuB,mBAAvB,CAvCK;AAwClB0B,iBAAa3B,SAASC,aAAT,CAAuB,mBAAvB,CAxCK;AAyClB2B,kBAAc5B,SAASC,aAAT,CAAuB,uBAAvB,CAzCI;AA0ClB4B,kBAAc7B,SAASC,aAAT,CAAuB,oBAAvB,CA1CI;AA2ClB6B,mBAAe9B,SAASC,aAAT,CAAuB,wBAAvB,CA3CG;AA4ClB8B,oBAAgB/B,SAASC,aAAT,CAAuB,uBAAvB,CA5CE;AA6ClB+B,mBAAehC,SAASC,aAAT,CAAuB,wBAAvB,CA7CG;AA8ClBgC,mBAAejC,SAASC,aAAT,CAAuB,0BAAvB,CA9CG;AA+ClBiC,iBAAalC,SAASC,aAAT,CAAuB,iBAAvB,CA/CK;AAgDlBkC,qBAAiBnC,SAASC,aAAT,CAAuB,iBAAvB,CAhDC;AAiDlBmC,2BAAuBpC,SAASC,aAAT,CAAuB,0BAAvB,CAjDL;;AAmDlB;AACAoC,YAAQrC,SAASC,aAAT,CAAuB,gBAAvB,CApDU;;AAsDlB;AACAqC,0BAAsBtC,SAASC,aAAT,CAAuB,0BAAvB,CAvDJ;AAwDlBsC,oBAAgBvC,SAASC,aAAT,CAAuB,oBAAvB,CAxDE;AAyDlBuC,mBAAexC,SAASC,aAAT,CAAuB,iBAAvB,CAzDG;AA0DlBwC,gBAAYzC,SAAS0C,gBAAT,CAA0B,gBAA1B,CA1DM;;AA4DlB;AACAC,iBAAa3C,SAASC,aAAT,CAAuB,eAAvB,CA7DK;AA8DlB2C,sBAAkB5C,SAASC,aAAT,CAAuB,sBAAvB,CA9DA;AA+DlB4C,yBAAqB7C,SAASC,aAAT,CAAuB,yBAAvB,CA/DH;;AAiElB;AACA6C,YAAQ9C,SAASC,aAAT,CAAuB,eAAvB,CAlEU;AAmElB8C,cAAU/C,SAASC,aAAT,CAAuB,iBAAvB,CAnEQ;;AAqElB;AACA;AACA;AACA+C,aAAShD,SAASC,aAAT,CAAuB,UAAvB,CAxES;AAyElB;AACAgD,aAASjD,SAASC,aAAT,CAAuB,gBAAvB,CA1ES;AA2ElBiD,YAAQlD,SAASC,aAAT,CAAuB,kBAAvB,CA3EU;AA4ElBkD,cAAUnD,SAASC,aAAT,CAAuB,iBAAvB,CA5EQ;AA6ElBmD,iBAAapD,SAASC,aAAT,CAAuB,qBAAvB,CA7EK;AA8ElBoD,aAASrD,SAASC,aAAT,CAAuB,sBAAvB,CA9ES;AA+ElB;AACAqD,mBAAetD,SAASC,aAAT,CAAuB,uBAAvB,CAhFG;AAiFlBsD,kBAAcvD,SAASC,aAAT,CAAuB,yBAAvB,CAjFI;AAkFlBuD,mBAAexD,SAASC,aAAT,CAAuB,uBAAvB,CAlFG;AAmFlBwD,uBAAmBzD,SAASC,aAAT,CAAuB,oBAAvB,CAnFD;AAoFlByD,kBAAc1D,SAASC,aAAT,CAAuB,sBAAvB,CApFI;AAqFlB;AACA0D,kBAAc3D,SAASC,aAAT,CAAuB,sBAAvB,CAtFI;AAuFlB2D,iBAAa5D,SAASC,aAAT,CAAuB,wBAAvB,CAvFK;AAwFlB4D,kBAAc7D,SAASC,aAAT,CAAuB,sBAAvB,CAxFI;AAyFlB6D,sBAAkB9D,SAASC,aAAT,CAAuB,mBAAvB,CAzFA;AA0FlB8D,iBAAa/D,SAASC,aAAT,CAAuB,qBAAvB,CA1FK;AA2FlB;AACA+D,2BAAuBhE,SAASC,aAAT,CAAuB,2BAAvB,CA5FL;AA6FlBgE,8BAA0BjE,SAASC,aAAT,CAAuB,6BAAvB,CA7FR;AA8FlB;AACAiE,mBAAelE,SAASC,aAAT,CAAuB,wBAAvB,CA/FG;AAgGlBkE,uBAAmBnE,SAASC,aAAT,CAAuB,gCAAvB,CAhGD;AAiGlBmE,qBAAiBpE,SAASC,aAAT,CAAuB,8BAAvB,CAjGC;AAkGlBoE,qBAAiBrE,SAASC,aAAT,CAAuB,kCAAvB;AAlGC,GAApB;;AAqGA;AACA,MAAMqE,kCAAkC,SAAlCA,+BAAkC,GAAW;AACjD;AACA,QAAIxE,YAAY8B,YAAZ,CAAyB2C,KAAzB,KAAmC,EAAnC,IAAyCzE,YAAY+B,YAAZ,CAAyB0C,KAAzB,KAAmC,EAAhF,EAAoF;AAClF;AACAzE,kBAAYgC,aAAZ,CAA0ByC,KAA1B,GAAkC,CAChCzE,YAAY+B,YAAZ,CAAyB2C,aAAzB,GAAyC1E,YAAY8B,YAAZ,CAAyB4C,aADlC,EAEhCC,OAFgC,CAExB,CAFwB,CAAlC;AAGA;AACA3E,kBAAYkC,aAAZ,CAA0BuC,KAA1B,GAAkC,CAChCzE,YAAY8B,YAAZ,CAAyB4C,aAAzB,GACA1E,YAAY+B,YAAZ,CAAyB2C,aADzB,GAEAE,WAAW5E,YAAYiC,cAAZ,CAA2BwC,KAA3B,GAAmC,GAA9C,CAHgC,EAIhCE,OAJgC,CAIxB,CAJwB,CAAlC;AAKA;AACA3E,kBAAYmC,aAAZ,CAA0BsC,KAA1B,GAAkC,CAChCzE,YAAYgC,aAAZ,CAA0B0C,aAA1B,GAA0C1E,YAAYkC,aAAZ,CAA0BwC,aADpC,EAEhCC,OAFgC,CAExB,CAFwB,CAAlC;AAGD;AACF,GAlBD;;AAoBA;AACA,MAAME,sBAAsB,SAAtBA,mBAAsB,GAAW;AACrC7E,gBAAYwC,oBAAZ,CAAiCsC,KAAjC;AACA9E,gBAAY4B,WAAZ,CAAwBmD,KAAxB;AACD,GAHD;;AAKA;AACA,MAAMC,0BAA0B,SAA1BA,uBAA0B,CAASC,EAAT,EAAa;AAC3C,QAAMC,OAAOC,kBAAkBC,cAAlB,CAAiCC,KAAjC,CAAuCC,IAAvC,CAA4C;AAAA,aAAQJ,KAAKD,EAAL,KAAYA,EAApB;AAAA,KAA5C,CAAb;AACA;AACA,QAAMM,SAASrF,SAASsF,aAAT,CAAuB,IAAvB,CAAf;AACAD,WAAOE,SAAP,CAAiBC,GAAjB,CAAqB,iBAArB;AACAH,WAAON,EAAP,mBAA0BC,KAAKD,EAA/B;AACAM,WAAOI,OAAP,CAAeC,UAAf,QAA+BV,KAAKD,EAApC;AACAM,WAAOM,SAAP,mJAEiCX,KAAKY,IAFtC,oDAGiCZ,KAAKa,IAHtC,wDAIqCb,KAAKc,QAAL,CAAcrB,OAAd,CAAsB,CAAtB,CAJrC,qDAKkCO,KAAKe,QAAL,CAActB,OAAd,CAAsB,CAAtB,CALlC,yDAMsCO,KAAKgB,QAAL,CAAcvB,OAAd,CAAsB,CAAtB,CANtC,wDAOqCO,KAAKiB,OAP1C,0DAQsCjB,KAAKkB,QAAL,CAAczB,OAAd,CAAsB,CAAtB,CARtC,2DASwCO,KAAKmB,KAAL,CAAW1B,OAAX,CAAmB,CAAnB,CATxC;AAUA3E,gBAAYyC,cAAZ,CAA2B6D,WAA3B,CAAuCf,MAAvC;AACD,GAlBD;;AAoBA;AACA,MAAMgB,iBAAiB,SAAjBA,cAAiB,CAASC,IAAT,EAAe;AACpCA,SAAKX,SAAL,GAAiB,EAAjB;AACD,GAFD;;AAIA;AACA,MAAMY,yBAAyB,SAAzBA,sBAAyB,GAAW;AACxCF,mBAAevG,YAAYyC,cAA3B;AACA;AACA0C,sBAAkBC,cAAlB,CAAiCC,KAAjC,CAAuCqB,OAAvC,CAA+C,gBAAQ;AACrD;AACA,UAAMnB,SAASrF,SAASsF,aAAT,CAAuB,IAAvB,CAAf;AACAD,aAAOE,SAAP,CAAiBC,GAAjB,CAAqB,iBAArB;AACAH,aAAON,EAAP,mBAA0BC,KAAKD,EAA/B;AACAM,aAAOI,OAAP,CAAeC,UAAf,QAA+BV,KAAKD,EAApC;AACAM,aAAOM,SAAP,mJAE+BX,KAAKY,IAFpC,oDAG+BZ,KAAKa,IAHpC,wDAImCb,KAAKc,QAAL,CAAcrB,OAAd,CAAsB,CAAtB,CAJnC,qDAKgCO,KAAKe,QAAL,CAActB,OAAd,CAAsB,CAAtB,CALhC,yDAMoCO,KAAKgB,QAAL,CAAcvB,OAAd,CAAsB,CAAtB,CANpC,wDAOmCO,KAAKiB,OAPxC,0DAQoCjB,KAAKkB,QAAL,CAAczB,OAAd,CAAsB,CAAtB,CARpC,2DASsCO,KAAKmB,KAAL,CAAW1B,OAAX,CAAmB,CAAnB,CATtC;AAUA3E,kBAAYyC,cAAZ,CAA2B6D,WAA3B,CAAuCf,MAAvC;AACD,KAjBD;AAkBD,GArBD;;AAuBA;AACA,MAAMoB,sBAAsB,SAAtBA,mBAAsB,GAAW;AACrC;AACAJ,mBAAevG,YAAY0C,aAA3B;;AAEA,QAAMkE,cAAc1G,SAASsF,aAAT,CAAuB,IAAvB,CAApB;AACAoB,gBAAYnB,SAAZ,CAAsBC,GAAtB,CAA0B,oBAA1B;AACAkB,gBAAYf,SAAZ,wHAEuCV,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CC,WAA3C,CAAuDnC,OAAvD,CACrC,CADqC,CAFvC,oFAMuCQ,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CE,WAA3C,CAAuDpC,OAAvD,CACrC,CADqC,CANvC,sDASmCQ,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CR,KAA3C,CAAiD1B,OAAjD,CACjC,CADiC,CATnC;AAYA3E,gBAAY0C,aAAZ,CAA0B4D,WAA1B,CAAsCM,WAAtC;AACD,GAnBD;;AAqBA,MAAMI,sBAAsB,SAAtBA,mBAAsB,CAASC,eAAT,EAA0BC,eAA1B,EAA2C;AACrE,QAAMC,iBACJhC,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CO,QAA3C,SAA0DF,eAA1D,CADF;AAEA,QAAID,eAAJ,EAAqB;AACnB,UAAMI,kBAAkBnH,SAASsF,aAAT,CAAuB,IAAvB,CAAxB;AACA6B,sBAAgB5B,SAAhB,CAA0BC,GAA1B,CAA8B,oBAA9B;AACA2B,sBAAgBxB,SAAhB,4HAEuCsB,eAAejB,QAAf,CAAwBvB,OAAxB,CAAgC,CAAhC,CAFvC,oCAGeuC,eAHf,6DAIuCC,eAAef,QAAf,CAAwBzB,OAAxB,CAAgC,CAAhC,CAJvC,wDAKmCwC,eAAeG,QAAf,CAAwB3C,OAAxB,CAAgC,CAAhC,CALnC;AAMA3E,kBAAY0C,aAAZ,CAA0B4D,WAA1B,CAAsCe,eAAtC;AACD;AACF,GAdD;;AAgBA,MAAME,kBAAkB,SAAlBA,eAAkB,GAAW;AACjC,QAAMC,aAAarC,kBAAkBsC,QAAlB,CAA2BvE,OAA3B,CAAmCwE,OAAtD;AACA;AACA1H,gBAAYmD,OAAZ,CAAoBwE,WAApB,QAAqCH,WAAWtH,QAAX,CAAoB0H,IAAzD;AACA5H,gBAAYoD,MAAZ,CAAmBuE,WAAnB,WAAuCH,WAAWtH,QAAX,CAAoB2H,MAA3D;AACA7H,gBAAYqD,QAAZ,CAAqBsE,WAArB,6BAA2DH,WAAWtH,QAAX,CAAoB4H,KAA/E;AACA9H,gBAAYuD,OAAZ,CAAoBoE,WAApB,0BAAuDH,WAAWtH,QAAX,CAAoB6H,IAA3E;AACA/H,gBAAYsD,WAAZ,CAAwBqE,WAAxB,6BAAyDH,WAAWtH,QAAX,CAAoB8H,QAA7E;AACAhI,gBAAYwD,aAAZ,CAA0BmE,WAA1B,QAA2CH,WAAWS,MAAX,CAAkBnC,IAA7D;AACA9F,gBAAYyD,YAAZ,CAAyBkE,WAAzB,QAA0CH,WAAWS,MAAX,CAAkBC,MAA5D;AACAlI,gBAAY0D,aAAZ,CAA0BiE,WAA1B,QAA2CH,WAAWS,MAAX,CAAkBE,IAA7D;AACAnI,gBAAY2D,iBAAZ,CAA8BgE,WAA9B,QAA+CH,WAAWS,MAAX,CAAkBG,QAAjE;AACApI,gBAAY4D,YAAZ,CAAyB+D,WAAzB,aAA+CH,WAAWS,MAAX,CAAkBI,GAAjE;AACArI,gBAAY6D,YAAZ,CAAyB8D,WAAzB,QAA0CH,WAAWc,KAAX,CAAiBxC,IAA3D;AACA9F,gBAAY8D,WAAZ,CAAwB6D,WAAxB,QAAyCH,WAAWc,KAAX,CAAiBJ,MAA1D;AACAlI,gBAAY+D,YAAZ,CAAyB4D,WAAzB,QAA0CH,WAAWc,KAAX,CAAiBH,IAA3D;AACAnI,gBAAYgE,gBAAZ,CAA6B2D,WAA7B,QAA8CH,WAAWc,KAAX,CAAiBF,QAA/D;AACApI,gBAAYiE,WAAZ,CAAwB0D,WAAxB,aAA8CH,WAAWc,KAAX,CAAiBD,GAA/D;AACArI,gBAAYoE,aAAZ,CAA0BuD,WAA1B,yBAAuDH,WAAWe,OAAX,CAAmBC,KAAnB,CAAyB7D,OAAzB,CACrD,CADqD,CAAvD;AAGA3E,gBAAYqE,iBAAZ,CAA8BsD,WAA9B,uCAAiEH,WAAWe,OAAX,CAAmBE,MAApF;AACAzI,gBAAYsE,eAAZ,CAA4BqD,WAA5B,oCAA+DH,WAAWe,OAAX,CAAmBG,IAAlF;AACA;AACA,QAAIlB,WAAWe,OAAX,CAAmBE,MAAnB,KAA8B,SAAlC,EAA6C;AAC3CzI,kBAAYuE,eAAZ,CAA4BoD,WAA5B,eAAoDH,WAAWe,OAAX,CAAmBI,OAAvE;AACD,KAFD,MAEO;AACL3I,kBAAYuE,eAAZ,CAA4BoD,WAA5B;AACD;AACF,GA7BD;;AA+BA,MAAMiB,2BAA2B,SAA3BA,wBAA2B,CAASC,cAAT,EAAyB;AACxDtC,mBAAevG,YAAYkE,qBAA3B;AACAqC,mBAAevG,YAAYmE,wBAA3B;;AAEA0E,mBAAenC,OAAf,CAAuB,gBAAQ;AAC7B,UAAMnB,SAASrF,SAASsF,aAAT,CAAuB,IAAvB,CAAf;AACAD,aAAOE,SAAP,CAAiBC,GAAjB,CAAqB,mBAArB;AACAH,aAAON,EAAP,oBAA2BC,KAAKD,EAAhC;AACAM,aAAOI,OAAP,CAAeC,UAAf,QAA+BV,KAAKD,EAApC;AACAM,aAAOM,SAAP,oDACmCgD,eAAeC,OAAf,CAAuB5D,IAAvB,IAA+B,CADlE,2DAEqCA,KAAKY,IAF1C,0DAGqCZ,KAAKa,IAH1C,8DAIyCb,KAAKc,QAAL,CAAcrB,OAAd,CAAsB,CAAtB,CAJzC,2DAKsCO,KAAKe,QAAL,CAActB,OAAd,CAAsB,CAAtB,CALtC,+DAM0CO,KAAKgB,QAAL,CAAcvB,OAAd,CAAsB,CAAtB,CAN1C,8DAOyCO,KAAKiB,OAAL,CAAaxB,OAAb,CAAqB,CAArB,CAPzC,+DAQ0CO,KAAKkB,QAAL,CAAczB,OAAd,CAAsB,CAAtB,CAR1C,iEAS4CO,KAAKmB,KAAL,CAAW1B,OAAX,CAAmB,CAAnB,CAT5C;AAUA3E,kBAAYkE,qBAAZ,CAAkCoC,WAAlC,CAA8Cf,MAA9C;AACD,KAhBD;;AAkBA;AACA,QAAMuB,cAAc3B,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CC,WAA/D;AACA,QAAMC,cAAc5B,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CE,WAA/D;AACA,QAAMV,QAAQlB,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CR,KAAzD;;AAEA,QAAM0C,gBAAgB7I,SAASsF,aAAT,CAAuB,IAAvB,CAAtB;AACAuD,kBAActD,SAAd,CAAwBC,GAAxB,CAA4B,sBAA5B;AACAqD,kBAAclD,SAAd,4HAEyCiB,YAAYnC,OAAZ,CAAoB,CAApB,CAFzC,sFAIyCoC,YAAYpC,OAAZ,CAAoB,CAApB,CAJzC,wDAKqC0B,MAAM1B,OAAN,CAAc,CAAd,CALrC;AAMA3E,gBAAYkE,qBAAZ,CAAkCoC,WAAlC,CAA8CyC,aAA9C;;AAEA;AACA,QAAMC,UAAUH,eAAeI,IAAf,CAAoB;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,EAAzB;AAAA,KAApB,CAAhB;AACA,QAAM+C,SAASL,eAAeI,IAAf,CAAoB;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAApB,CAAf;AACA,QAAMgD,SAASN,eAAeI,IAAf,CAAoB;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAApB,CAAf;AACA,QAAMiD,SAASP,eAAeI,IAAf,CAAoB;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAApB,CAAf;AACA,QAAMkD,UAAUR,eAAeI,IAAf,CAAoB;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAApB,CAAhB;;AAEA;AACAmD,0BAAsBN,OAAtB,EAA+B,EAA/B;AACAM,0BAAsBJ,MAAtB,EAA8B,CAA9B;AACAI,0BAAsBH,MAAtB,EAA8B,CAA9B;AACAG,0BAAsBF,MAAtB,EAA8B,CAA9B;AACAE,0BAAsBD,OAAtB,EAA+B,CAA/B;AACD,GAlDD;;AAoDA;AACA,MAAMC,wBAAwB,SAAxBA,qBAAwB,CAASC,SAAT,EAAoBrC,eAApB,EAAqC;AACjE,QAAMC,iBACJhC,kBAAkBC,cAAlB,CAAiCyB,SAAjC,CAA2CO,QAA3C,SAA0DF,eAA1D,CADF;AAEA,QAAIqC,SAAJ,EAAe;AACb,UAAMC,kBAAkBtJ,SAASsF,aAAT,CAAuB,IAAvB,CAAxB;AACAgE,sBAAgB/D,SAAhB,CAA0BC,GAA1B,CAA8B,sBAA9B;AACA8D,sBAAgB3D,SAAhB,oIAE2CsB,eAAejB,QAAf,CAAwBvB,OAAxB,CAAgC,CAAhC,CAF3C,sCAGiBuC,eAHjB,iEAI2CC,eAAef,QAAf,CAAwBzB,OAAxB,CAAgC,CAAhC,CAJ3C,4DAKuCwC,eAAeG,QAAf,CAAwB3C,OAAxB,CAAgC,CAAhC,CALvC;AAMA3E,kBAAYkE,qBAAZ,CAAkCoC,WAAlC,CAA8CkD,eAA9C;AACD;AACF,GAdD;;AAgBA;AACA,MAAMC,mBAAmB,SAAnBA,gBAAmB,GAAW;AAClC,QAAMC,iBAAiBxJ,SAASC,aAAT,CAAuB,2BAAvB,CAAvB;AACAuJ,mBAAeC,KAAf,CAAqBC,OAArB,GAA+B,OAA/B;AACAC,eAAW;AAAA,aAAMH,eAAejE,SAAf,CAAyBC,GAAzB,CAA6B,yBAA7B,CAAN;AAAA,KAAX,EAA0E,EAA1E;;AAEAmE,eAAWC,mBAAX,EAAgC,IAAhC;;AAEA,aAASA,mBAAT,GAA+B;AAC7BJ,qBAAejE,SAAf,CAAyBsE,MAAzB,CAAgC,yBAAhC;AACAF,iBAAW;AAAA,eAAOH,eAAeC,KAAf,CAAqBC,OAArB,GAA+B,MAAtC;AAAA,OAAX,EAA0D,GAA1D;AACD;AACF,GAXD;;AAaA,MAAMI,uBAAuB,SAAvBA,oBAAuB,GAAW;AACtChK,gBAAYiD,QAAZ,CAAqBgH,eAArB,CAAqC,UAArC;AACD,GAFD;;AAIA,MAAMC,oBAAoB,SAApBA,iBAAoB,GAAW;AACnClK,gBAAY8C,gBAAZ,CAA6B2C,SAA7B,CAAuCsE,MAAvC,CAA8C,cAA9C;AACAF,eAAW,YAAM;AACf7J,kBAAY8C,gBAAZ,CAA6B6G,KAA7B,CAAmCC,OAAnC,GAA6C,MAA7C;AACD,KAFD,EAEG,GAFH;AAGAO;AACAnK,gBAAY6C,WAAZ,CAAwBgD,SAAxB,GAAoC,EAApC;AACD,GAPD;;AASA,MAAMuE,mBAAmB,SAAnBA,gBAAmB,GAAW;AAClCC;AACArK,gBAAY8C,gBAAZ,CAA6B6G,KAA7B,CAAmCC,OAAnC,GAA6C,OAA7C;AACAC,eAAW,YAAM;AACf7J,kBAAY8C,gBAAZ,CAA6B2C,SAA7B,CAAuCC,GAAvC,CAA2C,cAA3C;AACD,KAFD,EAEG,EAFH;AAGD,GAND;;AAQA,MAAMyE,oBAAoB,SAApBA,iBAAoB,GAAW;AACnCnK,gBAAY+C,mBAAZ,CAAgC0C,SAAhC,CAA0CsE,MAA1C,CAAiD,iBAAjD;AACAF,eAAW,YAAM;AACf7J,kBAAY+C,mBAAZ,CAAgC4G,KAAhC,GAAwC,eAAxC;AACD,KAFD,EAEG,GAFH;AAGD,GALD;;AAOA,MAAMU,uBAAuB,SAAvBA,oBAAuB,GAAW;AACtCrK,gBAAY+C,mBAAZ,CAAgC4G,KAAhC,GAAwC,gBAAxC;AACAE,eAAW,YAAM;AACf7J,kBAAY+C,mBAAZ,CAAgC0C,SAAhC,CAA0CC,GAA1C,CAA8C,iBAA9C;AACD,KAFD,EAEG,EAFH;AAGD,GALD;;AAOA,MAAM4E,gBAAgB,SAAhBA,aAAgB,CAASC,CAAT,EAAY;AAChC,QAAIA,EAAEC,MAAF,CAAS/E,SAAT,CAAmBgF,QAAnB,CAA4B,gBAA5B,CAAJ,EAAmD;AACjDC,cAAQC,GAAR,CAAYJ,EAAEC,MAAF,CAAS7E,OAAT,CAAiBiF,QAA7B;AACA,UAAMvF,QAAQwF,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAd;AACA,UAAM9F,OAAOG,MAAMkF,EAAEC,MAAF,CAAS7E,OAAT,CAAiBiF,QAAvB,CAAb;AACA5K,kBAAY4B,WAAZ,CAAwB6C,KAAxB,GAAgCS,KAAKY,IAArC;AACA9F,kBAAY6B,WAAZ,CAAwB4C,KAAxB,GAAgCS,KAAKa,IAArC;AACA/F,kBAAY+B,YAAZ,CAAyB0C,KAAzB,GAAiCS,KAAKe,QAAtC;AACAjG,kBAAYiC,cAAZ,CAA2BwC,KAA3B,GAAmCS,KAAKiB,OAAxC;AACA+D;AACAlK,kBAAY8B,YAAZ,CAAyBiD,KAAzB;AACD;AACD,QAAIwF,EAAEC,MAAF,CAAS/E,SAAT,CAAmBgF,QAAnB,CAA4B,kBAA5B,CAAJ,EAAqD;AACnD,UAAMQ,UAAUJ,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,SAArB,CAAX,CAAhB;AACA,UAAM/C,SAASgD,QAAQV,EAAEC,MAAF,CAAS7E,OAAT,CAAiBuF,UAAzB,CAAf;AACAlL,kBAAYS,aAAZ,CAA0BgE,KAA1B,GAAkCwD,OAAOnC,IAAzC;AACA9F,kBAAYU,eAAZ,CAA4B+D,KAA5B,GAAoCwD,OAAOC,MAA3C;AACAlI,kBAAYW,aAAZ,CAA0B8D,KAA1B,GAAkCwD,OAAOE,IAAzC;AACAnI,kBAAYY,iBAAZ,CAA8B6D,KAA9B,GAAsCwD,OAAOG,QAA7C;AACApI,kBAAYa,YAAZ,CAAyB4D,KAAzB,GAAiCwD,OAAOI,GAAxC;AACA6B;AACD;AACD,QAAIK,EAAEC,MAAF,CAAS/E,SAAT,CAAmBgF,QAAnB,CAA4B,iBAA5B,CAAJ,EAAoD;AAClD,UAAMU,SAASN,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,QAArB,CAAX,CAAf;AACA,UAAM1C,QAAQ6C,OAAOZ,EAAEC,MAAF,CAAS7E,OAAT,CAAiByF,SAAxB,CAAd;AACApL,kBAAYgB,YAAZ,CAAyByD,KAAzB,GAAiC6D,MAAMxC,IAAvC;AACA9F,kBAAYiB,cAAZ,CAA2BwD,KAA3B,GAAmC6D,MAAMJ,MAAzC;AACAlI,kBAAYkB,YAAZ,CAAyBuD,KAAzB,GAAiC6D,MAAMH,IAAvC;AACAnI,kBAAYmB,gBAAZ,CAA6BsD,KAA7B,GAAqC6D,MAAMF,QAA3C;AACApI,kBAAYoB,WAAZ,CAAwBqD,KAAxB,GAAgC6D,MAAMD,GAAtC;AACA6B;AACD;AACD,QAAIK,EAAEC,MAAF,CAAS/E,SAAT,CAAmBgF,QAAnB,CAA4B,mBAA5B,CAAJ,EAAsD;AACpD,UAAMY,iBAAiBR,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,gBAArB,CAAX,CAAvB;AACA,UAAMrC,UAAU0C,eAAed,EAAEC,MAAF,CAAS7E,OAAT,CAAiB2F,aAAhC,CAAhB;AACAtL,kBAAYyB,aAAZ,CAA0BgD,KAA1B,GAAkCkE,QAAQ2C,aAA1C;AACApB;AACD;AACF,GAtCD;;AAwCA,MAAMqB,0BAA0B,SAA1BA,uBAA0B,GAAW;AACzC,QAAIR,aAAaC,OAAb,CAAqB,SAArB,CAAJ,EAAqC;AACnC,UAAMQ,qBAAqBX,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,SAArB,CAAX,CAA3B;AACA,UAAMC,UAAUQ,OAAOC,OAAP,CAAeF,kBAAf,CAAhB;AACAP,cAAQvE,OAAR,CAAgB,kBAAU;AACxB,YAAMiF,KAAKzL,SAASsF,aAAT,CAAuB,IAAvB,CAAX;AACAmG,WAAGlG,SAAH,CAAaC,GAAb,CAAiB,oBAAjB;;AAEA,YAAMkG,aAAa1L,SAASsF,aAAT,CAAuB,QAAvB,CAAnB;AACAoG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,KAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,aAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,kBAAzB;AACAkG,mBAAWjG,OAAX,CAAmBuF,UAAnB,GAAgCjD,OAAO,CAAP,EAAUnC,IAA1C;AACA8F,mBAAWjE,WAAX,GAAyB,SAAzB;;AAEA,YAAMkE,eAAe3L,SAASsF,aAAT,CAAuB,QAAvB,CAArB;AACAqG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,KAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,aAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,oBAA3B;AACAmG,qBAAalG,OAAb,CAAqBuF,UAArB,GAAkCjD,OAAO,CAAP,EAAUnC,IAA5C;AACA+F,qBAAalE,WAAb,GAA2B,MAA3B;;AAEA,YAAMmE,WAAW5L,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAsG,iBAASrG,SAAT,CAAmBC,GAAnB,CAAuB,2BAAvB;AACAoG,iBAASnE,WAAT,GAAuBM,OAAO,CAAP,EAAUnC,IAAjC;;AAEA,YAAMiG,aAAa7L,SAASsF,aAAT,CAAuB,MAAvB,CAAnB;AACAuG,mBAAWtG,SAAX,CAAqBC,GAArB,CAAyB,6BAAzB;AACAqG,mBAAWpE,WAAX,GAAyBM,OAAO,CAAP,EAAUC,MAAnC;;AAEA,YAAM8D,WAAW9L,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAwG,iBAASvG,SAAT,CAAmBC,GAAnB,CAAuB,2BAAvB;AACAsG,iBAASrE,WAAT,GAAuBM,OAAO,CAAP,EAAUE,IAAjC;;AAEA,YAAM8D,UAAU/L,SAASsF,aAAT,CAAuB,MAAvB,CAAhB;AACAyG,gBAAQxG,SAAR,CAAkBC,GAAlB,CAAsB,0BAAtB;AACAuG,gBAAQtE,WAAR,GAAsBM,OAAO,CAAP,EAAUI,GAAhC;;AAEAsD,WAAGrF,WAAH,CAAesF,UAAf;AACAD,WAAGrF,WAAH,CAAeuF,YAAf;AACAF,WAAGrF,WAAH,CAAewF,QAAf;AACAH,WAAGrF,WAAH,CAAeyF,UAAf;AACAJ,WAAGrF,WAAH,CAAe0F,QAAf;AACAL,WAAGrF,WAAH,CAAe2F,OAAf;;AAEAjM,oBAAY6C,WAAZ,CAAwByD,WAAxB,CAAoCqF,EAApC;AACD,OA1CD;AA2CD,KA9CD,MA8CO;AACLO,6BAAuB,8DAAvB;AACD;AACF,GAlDD;;AAoDA,MAAMC,yBAAyB,SAAzBA,sBAAyB,GAAW;AACxC,QAAIpB,aAAaC,OAAb,CAAqB,QAArB,CAAJ,EAAoC;AAClC,UAAMQ,qBAAqBX,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,QAArB,CAAX,CAA3B;AACA,UAAMG,SAASM,OAAOC,OAAP,CAAeF,kBAAf,CAAf;AACAL,aAAOzE,OAAP,CAAe,iBAAS;AACtB,YAAMiF,KAAKzL,SAASsF,aAAT,CAAuB,IAAvB,CAAX;AACAmG,WAAGlG,SAAH,CAAaC,GAAb,CAAiB,oBAAjB;;AAEA,YAAMkG,aAAa1L,SAASsF,aAAT,CAAuB,QAAvB,CAAnB;AACAoG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,KAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,aAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,iBAAzB;AACAkG,mBAAWjG,OAAX,CAAmByF,SAAnB,GAA+B9C,MAAM,CAAN,EAASxC,IAAxC;AACA8F,mBAAWjE,WAAX,GAAyB,SAAzB;;AAEA,YAAMkE,eAAe3L,SAASsF,aAAT,CAAuB,QAAvB,CAArB;AACAqG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,KAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,aAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,mBAA3B;AACAmG,qBAAalG,OAAb,CAAqByF,SAArB,GAAiC9C,MAAM,CAAN,EAASxC,IAA1C;AACA+F,qBAAalE,WAAb,GAA2B,MAA3B;;AAEA,YAAMmE,WAAW5L,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAsG,iBAASrG,SAAT,CAAmBC,GAAnB,CAAuB,0BAAvB;AACAoG,iBAASnE,WAAT,GAAuBW,MAAM,CAAN,EAASxC,IAAhC;;AAEA,YAAMiG,aAAa7L,SAASsF,aAAT,CAAuB,MAAvB,CAAnB;AACAuG,mBAAWtG,SAAX,CAAqBC,GAArB,CAAyB,4BAAzB;AACAqG,mBAAWpE,WAAX,GAAyBW,MAAM,CAAN,EAASJ,MAAlC;;AAEA,YAAM8D,WAAW9L,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAwG,iBAASvG,SAAT,CAAmBC,GAAnB,CAAuB,0BAAvB;AACAsG,iBAASrE,WAAT,GAAuBW,MAAM,CAAN,EAASH,IAAhC;;AAEA,YAAM8D,UAAU/L,SAASsF,aAAT,CAAuB,MAAvB,CAAhB;AACAyG,gBAAQxG,SAAR,CAAkBC,GAAlB,CAAsB,yBAAtB;AACAuG,gBAAQtE,WAAR,GAAsBW,MAAM,CAAN,EAASD,GAA/B;;AAEAsD,WAAGrF,WAAH,CAAesF,UAAf;AACAD,WAAGrF,WAAH,CAAeuF,YAAf;AACAF,WAAGrF,WAAH,CAAewF,QAAf;AACAH,WAAGrF,WAAH,CAAeyF,UAAf;AACAJ,WAAGrF,WAAH,CAAe0F,QAAf;AACAL,WAAGrF,WAAH,CAAe2F,OAAf;;AAEAjM,oBAAY6C,WAAZ,CAAwByD,WAAxB,CAAoCqF,EAApC;AACD,AL5fP,OKkdM;AA2CD,AL5fL,KK8cI,MA8CO;AACLO,AL5fN,6BK4f6B,+DAAvB;AACD,AL5fL;AK6fG,AL5fH,GK0cE;ALzcF;AK6fE,AL5fF,MK4fQE,iCAAiC,SAAjCA,8BAAiC,CAASf,cAAT,EAAyB;AAC9D,AL5fJ,QK4fQN,aAAaC,OAAb,CAAqB,gBAArB,CAAJ,EAA4C;AAC1C,AL5fN,UK4fYqB,uBAAuBxB,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,gBAArB,CAAX,CAA7B;AACA,AL5fN,UK4fYK,kBAAiBI,OAAOC,OAAP,CAAeW,oBAAf,CAAvB;AACAhB,AL5fN,sBK4fqB3E,OAAf,CAAuB,mBAAW;AAChC,AL5fR,YK4fciF,KAAKzL,SAASsF,aAAT,CAAuB,IAAvB,CAAX;AACAmG,AL5fR,WK4fWlG,SAAH,CAAaC,GAAb,CAAiB,oBAAjB;AL3fR;AK6fQ,AL5fR,YK4fckG,aAAa1L,SAASsF,aAAT,CAAuB,QAAvB,CAAnB;AACAoG,AL5fR,mBK4fmBnG,SAAX,CAAqBC,GAArB,CAAyB,KAAzB;AACAkG,AL5fR,mBK4fmBnG,SAAX,CAAqBC,GAArB,CAAyB,aAAzB;AACAkG,AL5fR,mBK4fmBnG,SAAX,CAAqBC,GAArB,CAAyB,mBAAzB;AACAkG,AL5fR,mBK4fmBjG,OAAX,CAAmB2F,aAAnB,GAAmC3C,QAAQ,CAAR,EAAW2C,aAA9C;AACAM,AL5fR,mBK4fmBjE,WAAX,GAAyB,SAAzB;AL3fR;AK6fQ,AL5fR,YK4fckE,eAAe3L,SAASsF,aAAT,CAAuB,QAAvB,CAArB;AACAqG,AL5fR,qBK4fqBpG,SAAb,CAAuBC,GAAvB,CAA2B,KAA3B;AACAmG,AL5fR,qBK4fqBpG,SAAb,CAAuBC,GAAvB,CAA2B,aAA3B;AACAmG,AL5fR,qBK4fqBpG,SAAb,CAAuBC,GAAvB,CAA2B,qBAA3B;AACAmG,AL5fR,qBK4fqBlG,OAAb,CAAqB2F,aAArB,GAAqC3C,QAAQ,CAAR,EAAW2C,aAAhD;AACAO,AL5fR,qBK4fqBlE,WAAb,GAA2B,MAA3B;AL3fR;AK6fQ,AL5fR,YK4fc2E,oBAAoBpM,SAASsF,aAAT,CAAuB,MAAvB,CAA1B;AACA8G,AL5fR,0BK4f0B7G,SAAlB,CAA4BC,GAA5B,CAAgC,8BAAhC;AACA4G,AL5fR,0BK4f0B3E,WAAlB,GAAgC,kBAAkBgB,QAAQ,CAAR,EAAW2C,aAA7D;AL3fR;AK6fQK,AL5fR,WK4fWrF,WAAH,CAAesF,UAAf;AACAD,AL5fR,WK4fWrF,WAAH,CAAeuF,YAAf;AACAF,AL5fR,WK4fWrF,WAAH,CAAegG,iBAAf;;AAEAtM,oBAAY6C,WAAZ,CAAwByD,WAAxB,CAAoCqF,EAApC;AACD,OA3BD;AA4BD,KA/BD,MA+BO;AACLO,6BAAuB,+DAAvB;AACD;AACF,GAnCD;;AAqCA,MAAMK,wBAAwB,SAAxBA,qBAAwB,GAAW;AACvC,QAAIxB,aAAaC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjC,UAAMwB,oBAAoB3B,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAA1B;AACA,UAAM3F,QAAQoG,OAAOC,OAAP,CAAec,iBAAf,CAAd;AACAnH,YAAMqB,OAAN,CAAc,gBAAQ;AACpB,YAAMiF,KAAKzL,SAASsF,aAAT,CAAuB,IAAvB,CAAX;AACAmG,WAAGlG,SAAH,CAAaC,GAAb,CAAiB,oBAAjB;;AAEA,YAAMkG,aAAa1L,SAASsF,aAAT,CAAuB,QAAvB,CAAnB;AACAoG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,KAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,aAAzB;AACAkG,mBAAWnG,SAAX,CAAqBC,GAArB,CAAyB,gBAAzB;AACAkG,mBAAWjG,OAAX,CAAmBiF,QAAnB,GAA8B1F,KAAK,CAAL,EAAQY,IAAtC;AACA8F,mBAAWjE,WAAX,GAAyB,SAAzB;;AAEA,YAAMkE,eAAe3L,SAASsF,aAAT,CAAuB,QAAvB,CAArB;AACAqG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,KAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,aAA3B;AACAmG,qBAAapG,SAAb,CAAuBC,GAAvB,CAA2B,kBAA3B;AACAmG,qBAAalG,OAAb,CAAqBiF,QAArB,GAAgC1F,KAAK,CAAL,EAAQY,IAAxC;AACA+F,qBAAalE,WAAb,GAA2B,MAA3B;;AAEA,YAAMmE,WAAW5L,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAsG,iBAASrG,SAAT,CAAmBC,GAAnB,CAAuB,yBAAvB;AACAoG,iBAASnE,WAAT,GAAuBzC,KAAK,CAAL,EAAQY,IAA/B;;AAEA,YAAM2G,YAAYvM,SAASsF,aAAT,CAAuB,MAAvB,CAAlB;AACAiH,kBAAUhH,SAAV,CAAoBC,GAApB,CAAwB,0BAAxB;AACA+G,kBAAU9E,WAAV,GAAwBzC,KAAK,CAAL,EAAQe,QAAR,GAAmB,MAAnB,GAA4Bf,KAAK,CAAL,EAAQa,IAA5D;;AAEA,YAAM2G,UAAUxM,SAASsF,aAAT,CAAuB,MAAvB,CAAhB;AACAkH,gBAAQjH,SAAR,CAAkBC,GAAlB,CAAsB,wBAAtB;AACAgH,gBAAQ/E,WAAR,GAAsBzC,KAAK,CAAL,EAAQiB,OAAR,GAAkB,GAAxC;;AAEA,YAAMwG,WAAWzM,SAASsF,aAAT,CAAuB,MAAvB,CAAjB;AACAmH,iBAASlH,SAAT,CAAmBC,GAAnB,CAAuB,yBAAvB;AACAiH,iBAAShF,WAAT,GAAuB,gBAAgBzC,KAAK,CAAL,EAAQ6C,IAAxB,GAA+B,GAAtD;;AAEA4D,WAAGrF,WAAH,CAAesF,UAAf;AACAD,WAAGrF,WAAH,CAAeuF,YAAf;AACAF,WAAGrF,WAAH,CAAewF,QAAf;AACAH,WAAGrF,WAAH,CAAemG,SAAf;AACAd,WAAGrF,WAAH,CAAeoG,OAAf;AACAf,WAAGrF,WAAH,CAAeqG,QAAf;AACA3M,oBAAY6C,WAAZ,CAAwByD,WAAxB,CAAoCqF,EAApC;AACD,OAzCD;AA0CD,KA7CD,MA6CO;AACLO,6BAAuB,4DAAvB;AACD;AACF,GAjDD;;AAmDA,MAAMA,yBAAyB,SAAzBA,sBAAyB,CAASU,OAAT,EAAkB;AAC/C,QAAMC,aAAa3M,SAASsF,aAAT,CAAuB,IAAvB,CAAnB;AACAqH,eAAWpH,SAAX,CAAqBC,GAArB,CAAyB,4BAAzB;AACAmH,eAAWlF,WAAX,GAAyBiF,OAAzB;;AAEA5M,gBAAY6C,WAAZ,CAAwByD,WAAxB,CAAoCuG,UAApC;AACD,GAND;AAOA;;;AAGA,SAAO;AACL7M,4BADK;AAELwE,oEAFK;AAGLK,4CAHK;AAIL4B,kDAJK;AAKLzB,oDALK;AAMLgC,4CANK;AAOLL,4CAPK;AAQLY,oCARK;AASLqB,sDATK;AAULa,sCAVK;AAWLO,8CAXK;AAYLE,wCAZK;AAaLE,sCAbK;AAcLD,wCAdK;AAeLE,8CAfK;AAgBLC,gCAhBK;AAiBLiC,gDAjBK;AAkBLH,kEAlBK;AAmBLD,kDAnBK;AAoBLZ,oDApBK;AAqBLW;AArBK,GAAP;AAuBD,CAxnBoB,EAArB;;AA0nBA;;;;AAIA,IAAM/G,oBAAqB,YAAW;AACpC,MAAMC,iBAAiB;AACrBC,WAAO,EADc;AAErBwB,eAAW;AACTR,aAAO,CADE;AAETS,mBAAa,CAFJ;AAGTC,mBAAa,CAHJ;AAITK,gBAAU;AACR0F,eAAO;AACL5G,oBAAU,CADL;AAELE,oBAAU,CAFL;AAGLkB,oBAAU;AAHL,SADC;AAMRyF,cAAM;AACJ7G,oBAAU,CADN;AAEJE,oBAAU,CAFN;AAGJkB,oBAAU;AAHN,SANE;AAWR0F,cAAM;AACJ9G,oBAAU,CADN;AAEJE,oBAAU,CAFN;AAGJkB,oBAAU;AAHN,SAXE;AAgBR2F,cAAM;AACJ/G,oBAAU,CADN;AAEJE,oBAAU,CAFN;AAGJkB,oBAAU;AAHN,SAhBE;AAqBR4F,cAAM;AACJhH,oBAAU,CADN;AAEJE,oBAAU,CAFN;AAGJkB,oBAAU;AAHN;AArBE;AAJD;AAFU,GAAvB;;AAoCA,MAAMG,WAAW;AACfvE,aAAS;AADM,GAAjB;;AAIA,MAAMlD,cAAcD,aAAaC,WAAjC;;AAEA,MAAMmN,mBAAmB,SAAnBA,gBAAmB,GAAW;AAClC,QAAMjK,UAAU;AACdwE,eAAS;AACPxH,kBAAU;AACR0H,gBAAM5H,YAAYI,UAAZ,CAAuBqE,KADrB;AAERoD,kBAAQ7H,YAAYK,SAAZ,CAAsBoE,KAFtB;AAGRqD,iBAAO9H,YAAYM,WAAZ,CAAwBmE,KAHvB;AAIRsD,gBAAM/H,YAAYO,UAAZ,CAAuBkE,KAJrB;AAKRuD,oBAAUhI,YAAYQ,cAAZ,CAA2BiE;AAL7B,SADH;AAQPwD,gBAAQ;AACNnC,gBAAM9F,YAAYS,aAAZ,CAA0BgE,KAD1B;AAENyD,kBAAQlI,YAAYU,eAAZ,CAA4B+D,KAF9B;AAGN0D,gBAAMnI,YAAYW,aAAZ,CAA0B8D,KAH1B;AAIN2D,oBAAUpI,YAAYY,iBAAZ,CAA8B6D,KAJlC;AAKN4D,eAAKrI,YAAYa,YAAZ,CAAyB4D;AALxB,SARD;AAeP6D,eAAO;AACLxC,gBAAM9F,YAAYgB,YAAZ,CAAyByD,KAD1B;AAELyD,kBAAQlI,YAAYiB,cAAZ,CAA2BwD,KAF9B;AAGL0D,gBAAMnI,YAAYkB,YAAZ,CAAyBuD,KAH1B;AAIL2D,oBAAUpI,YAAYmB,gBAAZ,CAA6BsD,KAJlC;AAKL4D,eAAKrI,YAAYoB,WAAZ,CAAwBqD;AALxB,SAfA;AAsBP8D,iBAAS;AACPC,iBAAOpD,eAAeyB,SAAf,CAAyBR,KADzB;AAEPoC,kBAAQzI,YAAYuB,YAAZ,CAAyBkD,KAF1B;AAGPiE,gBAAM1I,YAAYwB,UAAZ,CAAuBiD,KAHtB;AAIPkE,mBAAS3I,YAAYyB,aAAZ,CAA0BgD;AAJ5B;AAtBF,OADK;AA8Bd2I,iBAAWhI,eAAeC;AA9BZ,KAAhB;AAgCAoC,aAASvE,OAAT,GAAmBA,OAAnB;AACD,GAlCD;;AAoCA,MAAMmK,kBAAkB,SAAlBA,eAAkB,CAASC,KAAT,EAAgB;AACtClI,mBAAeC,KAAf,GAAuBD,eAAeC,KAAf,CAAqBkI,MAArB,CAA4B;AAAA,aAAQrI,KAAKD,EAAL,IAAWqI,KAAnB;AAAA,KAA5B,CAAvB;AACD,GAFD;;AAIA,MAAME,gBAAgB,SAAhBA,aAAgB,CAASvI,EAAT,EAAa;AACjC,QAAMwI,UAAU;AACd;AACAxI,UAAIA,EAFU;AAGda,YAAM9F,YAAY4B,WAAZ,CAAwB6C,KAHhB;AAIdsB,YAAM/F,YAAY6B,WAAZ,CAAwB4C,KAJhB;AAKduB,gBAAUhG,YAAY8B,YAAZ,CAAyB4C,aALrB;AAMduB,gBAAUjG,YAAY+B,YAAZ,CAAyB2C,aANrB;AAOdyB,eAASvB,WAAW5E,YAAYiC,cAAZ,CAA2BwC,KAAtC,CAPK;AAQd,UAAIyB,QAAJ,GAAe;AACb,eAAO,KAAKD,QAAL,GAAgB,KAAKD,QAA5B;AACD,OAVa;AAWd,UAAII,QAAJ,GAAe;AACb,eAAO,KAAKH,QAAL,GAAgB,KAAKD,QAArB,IAAiC,KAAKG,OAAL,GAAe,GAAhD,CAAP;AACD,OAba;AAcd,UAAIE,KAAJ,GAAY;AACV,eAAO,KAAKJ,QAAL,GAAgB,KAAKD,QAArB,GAAgC,KAAKC,QAAL,GAAgB,KAAKD,QAArB,IAAiC,KAAKG,OAAL,GAAe,GAAhD,CAAvC;AACD;AAhBa,KAAhB;AAkBAf,mBAAeC,KAAf,CAAqBqI,IAArB,CAA0BD,OAA1B;AACD,GApBD;;AAsBA,MAAME,4BAA4B,SAA5BA,yBAA4B,GAAW;AAC3C,QAAMC,kBAAkBxI,eAAeC,KAAf,CAAqBwI,MAArB,CAA4B,UAACC,GAAD,EAAM5I,IAAN,EAAe;AACjE,aAAO4I,MAAM5I,KAAKmB,KAAlB;AACD,KAFuB,EAErB,CAFqB,CAAxB;AAGA,QAAM0H,0BAA0B3I,eAAeC,KAAf,CAAqBwI,MAArB,CAA4B,UAACC,GAAD,EAAM5I,IAAN,EAAe;AACzE,aAAO4I,MAAM5I,KAAKgB,QAAlB;AACD,KAF+B,EAE7B,CAF6B,CAAhC;AAGA,QAAM8H,0BAA0B5I,eAAeC,KAAf,CAAqBwI,MAArB,CAA4B,UAACC,GAAD,EAAM5I,IAAN,EAAe;AACzE,aAAO4I,MAAM5I,KAAKkB,QAAlB;AACD,KAF+B,EAE7B,CAF6B,CAAhC;;AAIAhB,mBAAeyB,SAAf,CAAyBR,KAAzB,GAAiCuH,eAAjC;AACAxI,mBAAeyB,SAAf,CAAyBC,WAAzB,GAAuCiH,uBAAvC;AACA3I,mBAAeyB,SAAf,CAAyBE,WAAzB,GAAuCiH,uBAAvC;AACD,GAdD;;AAgBA,MAAMC,+BAA+B,SAA/BA,4BAA+B,CAAShH,eAAT,EAA0BC,eAA1B,EAA2C;AAC9E,QAAID,eAAJ,EAAqB;AACnB,UAAMiH,kBAAkB9I,eAAeC,KAAf,CAAqBkI,MAArB,CAA4B;AAAA,eAAQrI,KAAKiB,OAAL,KAAiBe,eAAzB;AAAA,OAA5B,CAAxB;AACA,UAAMiH,kBAAkBD,gBAAgBL,MAAhB,CAAuB,UAACC,GAAD,EAAM5I,IAAN,EAAe;AAC5D,eAAO4I,MAAM5I,KAAKgB,QAAlB;AACD,OAFuB,EAErB,CAFqB,CAAxB;AAGA,UAAMkI,aAAaF,gBAAgBL,MAAhB,CAAuB,UAACC,GAAD,EAAM5I,IAAN,EAAe;AACvD,eAAO4I,MAAM5I,KAAKkB,QAAlB;AACD,OAFkB,EAEhB,CAFgB,CAAnB;AAGA,UAAMiI,eAAeH,gBAAgBL,MAAhB,CAAuB,UAACC,GAAD,EAAM5I,IAAN,EAAe;AACzD,eAAO4I,MAAM5I,KAAKmB,KAAlB;AACD,OAFoB,EAElB,CAFkB,CAArB;;AAIAjB,qBAAeyB,SAAf,CAAyBO,QAAzB,SAAwCF,eAAxC,EAA2Dd,QAA3D,GAAsEgI,UAAtE;AACAhJ,qBAAeyB,SAAf,CAAyBO,QAAzB,SAAwCF,eAAxC,EAA2DI,QAA3D,GAAsE+G,YAAtE;AACAjJ,qBAAeyB,SAAf,CAAyBO,QAAzB,SAAwCF,eAAxC,EAA2DhB,QAA3D,GAAsEiI,eAAtE;AACD;AACF,GAjBD;;AAmBA;AACA,MAAMG,4BAA4B,SAA5BA,yBAA4B,GAAW;AAC3C;AACA,QAAMjF,UAAUjE,eAAeC,KAAf,CAAqB4D,IAArB,CAA0B;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAA1B,CAAhB;AACA,QAAMiD,SAAShE,eAAeC,KAAf,CAAqB4D,IAArB,CAA0B;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,KAA1B,CAAf;AACA,QAAMgD,SAAS/D,eAAeC,KAAf,CAAqB4D,IAArB,CAA0B;AAAA,aAAQ/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,AJlxB7C,KIkxBmB,CAAf;AACA,AJlxBJ,QIkxBU+C,SAAS9D,eAAeC,KAAf,CAAqB4D,IAArB,CAA0B;AAAA,AJjxB7C,aIixBqD/D,KAAKiB,OAAL,KAAiB,CAAzB;AAAA,AJhxB7C,KIgxBmB,CAAf;AACA,AJhxBJ,QIgxBU6C,UAAU5D,eAAeC,KAAf,CAAqB4D,IAArB,CAA0B;AAAA,AJ/wB9C,aI+wBsD/D,KAAKiB,OAAL,KAAiB,EAAzB;AAAA,AJ9wB9C,KI8wBoB,CAAhB;AJ7wBJ;AI+wBI,AJ9wBJ;AI+wBI8H,AJ9wBJ,iCI8wBiC5E,OAA7B,EAAsC,CAAtC;AACA4E,AJ9wBJ,iCI8wBiC7E,MAA7B,EAAqC,CAArC;AACA6E,AJ9wBJ,iCI8wBiC9E,MAA7B,EAAqC,CAArC;AACA8E,AJ9wBJ,iCI8wBiC/E,MAA7B,EAAqC,CAArC;AACA+E,AJ9wBJ,iCI8wBiCjF,OAA7B,EAAsC,EAAtC;AJ7wBJ;AI+wBI,AJ9wBJ;AI+wBIjJ,AJ9wBJ,iBI8wBiBiH,mBAAb,CAAiCqC,OAAjC,EAA0C,CAA1C;AACAtJ,AJ9wBJ,iBI8wBiBiH,mBAAb,CAAiCoC,MAAjC,EAAyC,CAAzC;AACArJ,AJ9wBJ,iBI8wBiBiH,mBAAb,CAAiCmC,MAAjC,EAAyC,CAAzC;AACApJ,AJ9wBJ,iBI8wBiBiH,mBAAb,CAAiCkC,MAAjC,EAAyC,CAAzC;AACAnJ,AJ9wBJ,iBI8wBiBiH,mBAAb,CAAiCgC,OAAjC,EAA0C,EAA1C;AACD,AJ9wBH,GIyvBE;AJxvBF;AI+wBE,AJ9wBF,MI8wBQuF,oBAAoB,SAApBA,iBAAoB,CAAStG,MAAT,EAAiB;AACzC,AJ9wBJ,QI8wBQgD,UAAU,EAAd;AACA,QAAIF,aAAaC,OAAb,CAAqB,SAArB,CAAJ,EAAqC;AACnCC,gBAAUJ,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,SAArB,CAAX,CAAV;AACD;;AAEDC,YAAQhD,OAAOnC,IAAf,IAAuBmC,MAAvB;;AAEA8C,iBAAayD,OAAb,CAAqB,SAArB,EAAgC3D,KAAK4D,SAAL,CAAexD,OAAf,CAAhC;AACD,GATD;;AAWA,MAAMyD,mBAAmB,SAAnBA,gBAAmB,CAASpG,KAAT,EAAgB;AACvC,QAAI6C,SAAS,EAAb;AACA,QAAIJ,aAAaC,OAAb,CAAqB,QAArB,CAAJ,EAAoC;AAClCG,eAASN,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,QAArB,CAAX,CAAT;AACD;;AAEDG,WAAO7C,MAAMxC,IAAb,IAAqBwC,KAArB;;AAEAyC,iBAAayD,OAAb,CAAqB,QAArB,EAA+B3D,KAAK4D,SAAL,CAAetD,MAAf,CAA/B;AACD,GATD;;AAWA,MAAMwD,kBAAkB,SAAlBA,eAAkB,CAASzJ,IAAT,EAAe;AACrC,QAAIG,QAAQ,EAAZ;AACA,QAAI0F,aAAaC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjC3F,cAAQwF,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAR;AACD;;AAED3F,UAAMH,KAAKY,IAAX,IAAmBZ,IAAnB;;AAEA6F,iBAAayD,OAAb,CAAqB,OAArB,EAA8B3D,KAAK4D,SAAL,CAAepJ,KAAf,CAA9B;AACD,GATD;AAUA,MAAMuJ,qBAAqB,SAArBA,kBAAqB,CAASC,aAAT,EAAwB;AACjD,QAAIxD,iBAAiB,EAArB;AACA,QAAIN,aAAaC,OAAb,CAAqB,gBAArB,CAAJ,EAA4C;AAC1CK,uBAAiBR,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,gBAArB,CAAX,CAAjB;AACD;;AAEDK,mBAAewD,cAAcvD,aAA7B,IAA8CuD,aAA9C;;AAEA9D,iBAAayD,OAAb,CAAqB,gBAArB,EAAuC3D,KAAK4D,SAAL,CAAepD,cAAf,CAAvC;AACD,GATD;;AAWA;;;AAGA,SAAO;AACL5D,sBADK;AAELrC,kCAFK;AAGLoI,gCAHK;AAILH,oCAJK;AAKLiB,wDALK;AAMLnB,sCANK;AAOLQ,wDAPK;AAQLY,wCARK;AASLG,sCATK;AAULC,oCAVK;AAWLC;AAXK,GAAP;AAaD,CA/NyB,EAA1B;;AAiOA;;;;AAIA,IAAME,gBAAiB,UAASC,WAAT,EAAsBC,MAAtB,EAA8B;AACnD,MAAMhP,cAAcgP,OAAOhP,WAA3B;;AAEA,MAAMiP,qBAAqB,SAArBA,kBAAqB,GAAW;AACpC;AACAjP,gBAAYgD,MAAZ,CAAmBkM,gBAAnB,CAAoC,OAApC,EAA6C3H,eAA7C;AACA;AACAvH,gBAAYuC,MAAZ,CAAmB2M,gBAAnB,CAAoC,OAApC,EAA6CC,OAA7C;AACAnP,gBAAY8B,YAAZ,CAAyBoN,gBAAzB,CAA0C,QAA1C,EAAoDE,kBAApD;AACApP,gBAAY+B,YAAZ,CAAyBmN,gBAAzB,CAA0C,QAA1C,EAAoDE,kBAApD;AACApP,gBAAYgC,aAAZ,CAA0BkN,gBAA1B,CAA2C,QAA3C,EAAqDE,kBAArD;AACApP,gBAAYiC,cAAZ,CAA2BiN,gBAA3B,CAA4C,QAA5C,EAAsDE,kBAAtD;AACApP,gBAAYyC,cAAZ,CAA2ByM,gBAA3B,CAA4C,OAA5C,EAAqD7B,eAArD;;AAEA;AACArN,gBAAYC,YAAZ,CAAyBiP,gBAAzB,CAA0C,OAA1C,EAAmDG,gBAAnD;AACArP,gBAAYC,YAAZ,CAAyBiP,gBAAzB,CAA0C,QAA1C,EAAoDG,gBAApD;AACArP,gBAAYwC,oBAAZ,CAAiC0M,gBAAjC,CAAkD,OAAlD,EAA2DI,oBAA3D;;AAEAtP,gBAAYuB,YAAZ,CAAyB2N,gBAAzB,CAA0C,QAA1C,EAAoDK,kBAApD;;AAEA;AACAvP,gBAAYc,aAAZ,CAA0BoO,gBAA1B,CAA2C,OAA3C,EAAoDM,UAApD;AACAxP,gBAAYe,aAAZ,CAA0BmO,gBAA1B,CAA2C,OAA3C,EAAoDO,UAApD;AACAzP,gBAAYqB,YAAZ,CAAyB6N,gBAAzB,CAA0C,OAA1C,EAAmDQ,SAAnD;AACA1P,gBAAYsB,gBAAZ,CAA6B4N,gBAA7B,CAA8C,OAA9C,EAAuDS,cAAvD;AACA3P,gBAAY0B,cAAZ,CAA2BwN,gBAA3B,CAA4C,OAA5C,EAAqDU,WAArD;AACA5P,gBAAY2B,cAAZ,CAA2BuN,gBAA3B,CAA4C,OAA5C,EAAqDW,gBAArD;AACA7P,gBAAYoC,WAAZ,CAAwB8M,gBAAxB,CAAyC,OAAzC,EAAkDY,QAAlD;AACA9P,gBAAYqC,eAAZ,CAA4B6M,gBAA5B,CAA6C,OAA7C,EAAsDa,aAAtD;AACA/P,gBAAYsC,qBAAZ,CAAkC4M,gBAAlC,CAAmD,OAAnD,EAA4DF,OAAO9E,iBAAnE;AACAlK,gBAAY6C,WAAZ,CAAwBqM,gBAAxB,CAAyC,OAAzC,EAAkDF,OAAO1E,aAAzD;AACAtK,gBAAY6C,WAAZ,CAAwBqM,gBAAxB,CAAyC,OAAzC,EAAkDc,uBAAlD;AACD,GA9BD;;AAgCA;AACA,MAAMC,OAAO,SAAPA,IAAO,GAAW;AACtBhB;AACD,GAFD;AAGA,MAAMM,qBAAqB,SAArBA,kBAAqB,CAAShF,CAAT,EAAY;AACrC,QAAIA,EAAEC,MAAF,CAAS/F,KAAT,KAAmB,SAAvB,EAAkC;AAChCzE,kBAAYyB,aAAZ,CAA0ByO,aAA1B,CAAwCvG,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACA5J,kBAAYyB,aAAZ,CAA0B0O,YAA1B,CAAuC,UAAvC,EAAmD,IAAnD;AACAnQ,kBAAYyB,aAAZ,CAA0BgD,KAA1B,GAAkC,EAAlC;AACD,KAJD,MAIO;AACLzE,kBAAYyB,aAAZ,CAA0ByO,aAA1B,CAAwCvG,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACA5J,kBAAYyB,aAAZ,CAA0BwI,eAA1B,CAA0C,UAA1C;AACD;AACF,GATD;;AAWA,MAAMoF,mBAAmB,SAAnBA,gBAAmB,CAAS9E,CAAT,EAAY;AACnC,QAAIA,EAAEC,MAAF,KAAaxK,YAAYY,iBAAzB,IAA8C2J,EAAEC,MAAF,KAAaxK,YAAYmB,gBAA3E,EAA6F;AAC3FiP,0BAAoBC,gBAApB,CAAqC9F,CAArC;AACD,KAFD,MAEO,IAAIA,EAAEC,MAAF,KAAaxK,YAAYa,YAAzB,IAAyC0J,EAAEC,MAAF,KAAaxK,YAAYoB,WAAtE,EAAmF;AACxFgP,0BAAoBE,WAApB,CAAgC/F,CAAhC;AACD,KAFM,MAEA,IAAIA,EAAEC,MAAF,KAAaxK,YAAYyB,aAA7B,EAA4C;AACjD,UACEzB,YAAYuB,YAAZ,CAAyBkD,KAAzB,KAAmC,SAAnC,IACAzE,YAAYuB,YAAZ,CAAyBkD,KAAzB,KAAmC,UAFrC,EAGE;AACA2L,4BAAoBG,eAApB,CAAoChG,CAApC;AACD;AACF,KAPM,MAOA;AACL6F,0BAAoBI,uBAApB,CAA4CjG,CAA5C;AACD;AACF,GAfD;;AAiBA,MAAM+E,uBAAuB,SAAvBA,oBAAuB,CAAS/E,CAAT,EAAY;AACvC6F,wBAAoBK,uBAApB,CAA4ClG,CAA5C;AACD,GAFD;;AAIA,MAAMmG,sBAAsB,SAAtBA,mBAAsB,GAAW;AACrC,QAAIC,SAASC,MAAMC,IAAN,CAAW7Q,YAAYC,YAAZ,CAAyB6Q,sBAAzB,CAAgD,OAAhD,CAAX,CAAb;;AAEA;AACA,QAAI9Q,YAAYuB,YAAZ,CAAyBkD,KAAzB,KAAmC,SAAvC,EAAkD;AAChDkM,eAASA,OAAOpD,MAAP,CAAc;AAAA,eAAQrI,KAAKO,SAAL,CAAegF,QAAf,CAAwB,kBAAxB,MAAgD,KAAxD;AAAA,OAAd,CAAT;AACD;AACD,QAAIkG,OAAO1H,IAAP,CAAY;AAAA,aAAS8H,MAAMtM,KAAN,KAAgB,EAAhB,IAAsBsM,MAAMtM,KAAN,KAAgB,GAA/C;AAAA,KAAZ,CAAJ,EAAqE;AACnEkM,aACGpD,MADH,CACU;AAAA,eAASwD,MAAMtM,KAAN,KAAgB,EAAhB,IAAsBsM,MAAMtM,KAAN,KAAgB,GAA/C;AAAA,OADV,EAEGiC,OAFH,CAEW;AAAA,eAASqK,MAAMtL,SAAN,CAAgBC,GAAhB,CAAoB,SAApB,CAAT;AAAA,OAFX;AAGA,aAAO,KAAP;AACD,KALD,MAKO;AACL,aAAO,IAAP;AACD;AACF,GAfD;;AAiBA;AACA,MAAM0K,sBAAsB;AAC1BC,sBAAkB,0BAAS9F,CAAT,EAAY;AAC5B,UAAMyG,MAAM,eAAZ;AACA,UAAI,CAACA,IAAIC,IAAJ,CAAS1G,EAAEC,MAAF,CAAS/F,KAAlB,CAAL,EAA+B;AAC7B8F,UAAEC,MAAF,CAAS/E,SAAT,CAAmBC,GAAnB,CAAuB,SAAvB;AACD,OAFD,MAEO;AACL6E,UAAEC,MAAF,CAAS/E,SAAT,CAAmBsE,MAAnB,CAA0B,SAA1B;AACD;AACF,KARyB;AAS1BuG,iBAAa,qBAAS/F,CAAT,EAAY;AACvB,UAAMyG,MAAM,wCAAZ;AACA,UAAI,CAACA,IAAIC,IAAJ,CAAS1G,EAAEC,MAAF,CAAS/F,KAAlB,CAAL,EAA+B;AAC7B8F,UAAEC,MAAF,CAAS/E,SAAT,CAAmBC,GAAnB,CAAuB,SAAvB;AACD,OAFD,MAEO;AACL6E,UAAEC,MAAF,CAAS/E,SAAT,CAAmBsE,MAAnB,CAA0B,SAA1B;AACD;AACF,KAhByB;AAiB1BwG,qBAAiB,yBAAShG,CAAT,EAAY;AAC3B,UAAMyG,MAAM,4CAAZ;AACA,UAAI,CAACA,IAAIC,IAAJ,CAAS1G,EAAEC,MAAF,CAAS/F,KAAlB,CAAL,EAA+B;AAC7B8F,UAAEC,MAAF,CAAS/E,SAAT,CAAmBC,GAAnB,CAAuB,SAAvB;AACD,OAFD,MAEO;AACL6E,UAAEC,MAAF,CAAS/E,SAAT,CAAmBsE,MAAnB,CAA0B,SAA1B;AACD;AACF,KAxByB;AAyB1ByG,6BAAyB,iCAASjG,CAAT,EAAY;AACnC,UAAMyG,MAAM,aAAZ;AACA,UAAI,CAACA,IAAIC,IAAJ,CAAS1G,EAAEC,MAAF,CAAS/F,KAAlB,CAAL,EAA+B;AAC7B8F,AH39BR,UG29BUC,MAAF,CAAS/E,SAAT,CAAmBC,GAAnB,CAAuB,SAAvB;AACD,AH39BP,OGy9BM,MAEO;AACL6E,AH39BR,UG29BUC,MAAF,CAAS/E,SAAT,CAAmBsE,MAAnB,CAA0B,SAA1B;AACD,AH39BP;AG49BK,AH39BL,KG27B8B;AAiC1B0G,AH39BJ,6BG29B6B,iCAASlG,CAAT,EAAY;AACnC,AH39BN,UG49BQvK,YAAY4B,WAAZ,CAAwB6C,KAAxB,KAAkC,EAAlC,IACAzE,YAAY4B,WAAZ,CAAwB6C,KAAxB,KAAkC,EADlC,IAEAzE,YAAY8B,YAAZ,CAAyB2C,KAAzB,KAAmC,EAFnC,IAGAzE,YAAY+B,YAAZ,CAAyB0C,KAAzB,KAAmC,EAJrC,EAKE;AACAzE,AHh+BR,oBGg+BoBuC,MAAZ,CAAmB2O,QAAnB,GAA8B,KAA9B;AACD,AHh+BP,OGy9BM,MAOO;AACLlR,AHh+BR,oBGg+BoBuC,MAAZ,CAAmB2O,QAAnB,GAA8B,IAA9B;AACD,AHh+BP;AGi+BK,AHh+BL;AGo7B8B,AHn7B9B,GGm7BE;AHl7BF;AGi+BE,AHh+BF,MGg+BQ/B,UAAU,SAAVA,OAAU,GAAW;AACzB,AHh+BJ,QGg+BUgC,YAAY,eAAlB;AACAhM,AHh+BJ,sBGg+BsBqI,aAAlB,CAAgC2D,SAAhC;AACAhM,AHh+BJ,sBGg+BsBwI,yBAAlB;AACAqB,AHh+BJ,WGg+BWnK,mBAAP;AACAmK,AHh+BJ,WGg+BWhK,uBAAP,CAA+BmM,SAA/B;AACApC,AHh+BJ,gBGg+BgBT,yBAAZ;AACAU,AHh+BJ,WGg+BWrI,mBAAP;AACAxB,AHh+BJ,sBGg+BsBmJ,yBAAlB;AACAtO,AHh+BJ,gBGg+BgBuC,MAAZ,CAAmB2O,QAAnB,GAA8B,IAA9B;AACD,AHh+BH,GGs9BE;AHr9BF;AGi+BE,AHh+BF,MGg+BQ9B,qBAAqB,SAArBA,kBAAqB,GAAW;AACpC,AHh+BJ;AGi+BIJ,AHh+BJ,WGg+BWxK,+BAAP;AACD,AHh+BH,GG69BE;AH59BF;AGi+BE,AHh+BF,MGg+BQ6I,kBAAkB,SAAlBA,eAAkB,CAAS9C,CAAT,EAAY;AAClC,AHh+BJ,QGg+BQA,EAAEC,MAAF,CAAS/E,SAAT,CAAmBgF,QAAnB,CAA4B,eAA5B,CAAJ,EAAkD;AAChD,AHh+BN;AGi+BM,AHh+BN,UGg+BY6C,QAAQ/C,EAAEC,MAAF,CAAS0F,aAAT,CAAuBA,aAAvB,CAAqCvK,OAArC,CAA6CC,UAA3D;AACA,AHh+BN;AGi+BMmJ,AHh+BN,kBGg+BkB1B,eAAZ,CAA4BC,KAA5B;AACA,AHh+BN;AGi+BMyB,AHh+BN,kBGg+BkBpB,yBAAZ;AACA,AHh+BN;AGi+BMqB,AHh+BN,aGg+BavI,sBAAP;AACA,AHh+BN;AGi+BMsI,AHh+BN,kBGg+BkBT,yBAAZ;AACA,AHh+BN;AGi+BMU,AHh+BN,aGg+BarI,mBAAP;AACD,AHh+BL;AGi+BG,AHh+BH,GGi9BE;AHh9BF;AGi+BE,AHh+BF;AGi+BE,AHh+BF,MGg+BQY,kBAAkB,SAAlBA,eAAkB,GAAW;AACjC,AHh+BJ,QGg+BU6J,WAAWV,qBAAjB;AACA,AHh+BJ,QGg+BQU,QAAJ,EAAc;AACZ,AHh+BN;AGi+BMrC,AHh+BN,kBGg+BkB5B,gBAAZ;AACA,AHh+BN;AGi+BM6B,AHh+BN,aGg+BazH,eAAP;AACA,AHh+BN;AGi+BMyH,AHh+BN,aGg+BapG,wBAAP,CAAgCmG,YAAYtH,QAAZ,CAAqBvE,OAArB,CAA6BkK,SAA7D;AACA,AHh+BN;AGi+BM4B,AHh+BN,aGg+BahF,oBAAP;AACD,AHh+BL,KGu9BI,MASO;AACLjK,AHh+BN,mBGg+BmB0J,gBAAb;AACD,AHh+BL;AGi+BG,AHh+BH,GGk9BE;AHj9BF;AGi+BE,AHh+BF,MGg+BQ+F,aAAa,SAAbA,UAAa,CAASjF,CAAT,EAAY;AAC7BA,AHh+BJ,MGg+BM8G,cAAF;AH/9BJ;AGi+BI,AHh+BJ,QGg+BUpJ,SAAS;AACbnC,AHh+BN,YGg+BY9F,YAAYS,aAAZ,CAA0BgE,KADnB;AAEbyD,AHh+BN,cGg+BclI,YAAYU,eAAZ,CAA4B+D,KAFvB;AAGb0D,AHh+BN,YGg+BYnI,YAAYW,aAAZ,CAA0B8D,KAHnB;AAIb2D,AHh+BN,gBGg+BgBpI,YAAYY,iBAAZ,CAA8B6D,KAJ3B;AAKb4D,AHh+BN,WGg+BWrI,YAAYa,YAAZ,CAAyB4D;AALjB,AH19BnB,KG09BI;AAOAsK,AHh+BJ,gBGg+BgBR,iBAAZ,CAA8BtG,MAA9B;AACD,AHh+BH,GGq9BE;AHp9BF;AGi+BE,AHh+BF,MGg+BQwH,aAAa,SAAbA,UAAa,CAASlF,CAAT,EAAY;AAC7BA,AHh+BJ,MGg+BM8G,cAAF;AH/9BJ;AGi+BIrC,AHh+BJ,WGg+BW5E,gBAAP;AACA4E,AHh+BJ,WGg+BWzD,uBAAP;AACD,AHh+BH,GG29BE;AH19BF;AGi+BE,AHh+BF,MGg+BQmE,YAAY,SAAZA,SAAY,CAASnF,CAAT,EAAY;AAC5BA,AHh+BJ,MGg+BM8G,cAAF;AH/9BJ;AGi+BI,AHh+BJ,QGg+BU/I,QAAQ;AACZxC,AHh+BN,YGg+BY9F,YAAYgB,YAAZ,CAAyByD,KADnB;AAEZyD,AHh+BN,cGg+BclI,YAAYiB,cAAZ,CAA2BwD,KAFvB;AAGZ0D,AHh+BN,YGg+BYnI,YAAYkB,YAAZ,CAAyBuD,KAHnB;AAIZ2D,AHh+BN,gBGg+BgBpI,YAAYmB,gBAAZ,CAA6BsD,KAJ3B;AAKZ4D,AHh+BN,WGg+BWrI,YAAYoB,WAAZ,CAAwBqD;AALjB,AH19BlB,KG09BI;AAOAsK,AHh+BJ,gBGg+BgBL,gBAAZ,CAA6BpG,KAA7B;AACD,AHh+BH,GGq9BE;AHp9BF;AGi+BE,AHh+BF,MGg+BQqH,iBAAiB,SAAjBA,cAAiB,CAASpF,CAAT,EAAY;AACjCA,AHh+BJ,MGg+BM8G,cAAF;AACArC,AHh+BJ,WGg+BW5E,gBAAP;AACA4E,AHh+BJ,WGg+BW7C,sBAAP;AACD,AHh+BH,GG49BE;AH39BF;AGi+BE,AHh+BF,MGg+BQyD,cAAc,SAAdA,WAAc,CAASrF,CAAT,EAAY;AAC9BA,AHh+BJ,MGg+BM8G,cAAF;AH/9BJ;AGi+BI,AHh+BJ,QGg+BUxC,gBAAgB;AACpBvD,AHh+BN,qBGg+BqBtL,YAAYyB,aAAZ,CAA0BgD;AADrB,AH99B1B,KG89BI;AAGAsK,gBAAYH,kBAAZ,CAA+BC,aAA/B;AACD,GAPD;;AASA,MAAMgB,mBAAmB,SAAnBA,gBAAmB,CAAStF,CAAT,EAAY;AACnCA,MAAE8G,cAAF;;AAEArC,WAAO5E,gBAAP;AACA4E,WAAO5C,8BAAP;AACD,GALD;;AAOA,MAAM0D,WAAW,SAAXA,QAAW,CAASvF,CAAT,EAAY;AAC3BA,MAAE8G,cAAF;;AAEA,QAAMC,MAAM,IAAIC,IAAJ,EAAZ;AACA,QAAMC,cACJF,IAAIG,cAAJ,KAAuB,GAAvB,IAA8BH,IAAII,WAAJ,KAAoB,CAAlD,IAAuD,GAAvD,GAA6DJ,IAAIK,UAAJ,EAD/D;;AAGA,QAAMzM,OAAO;AACXY,YAAM9F,YAAY4B,WAAZ,CAAwB6C,KADnB;AAEXsB,YAAM/F,YAAY6B,WAAZ,CAAwB4C,KAFnB;AAGXwB,gBAAUjG,YAAY+B,YAAZ,CAAyB2C,aAHxB;AAIXyB,eAASvB,WAAW5E,YAAYiC,cAAZ,CAA2BwC,KAAtC,CAJE;AAKXsD,YAAMyJ;AALK,KAAb;AAOAzC,gBAAYJ,eAAZ,CAA4BzJ,IAA5B;AACD,GAfD;;AAiBA,MAAM6K,gBAAgB,SAAhBA,aAAgB,CAASxF,CAAT,EAAY;AAChCA,MAAE8G,cAAF;;AAEArC,WAAO5E,gBAAP;AACA4E,WAAOzC,qBAAP;AACD,GALD;;AAOA,MAAMyD,0BAA0B,SAA1BA,uBAA0B,CAASzF,CAAT,EAAY;AAC1CA,MAAE8G,cAAF;AACA,QAAMO,gBAAgBrH,EAAEC,MAAF,CAAS/E,SAA/B;AACA,QAAImM,cAAcnH,QAAd,CAAuB,oBAAvB,CAAJ,EAAkD;AAChD;AACA;AACD;AACD,QAAImH,cAAcnH,QAAd,CAAuB,mBAAvB,CAAJ,EAAiD;AAC/C;AACA;AACD;AACD,QAAImH,cAAcnH,QAAd,CAAuB,qBAAvB,CAAJ,EAAmD;AACjD;AACA;AACD;AACD,QAAImH,cAAcnH,QAAd,CAAuB,kBAAvB,CAAJ,EAAgD;AAC9C;AACA;AACD;AACF,GAnBD;;AAqBA;;;AAGA,SAAO;AACLwF;AADK,GAAP;AAGD,CArSqB,CAqSnB9K,iBArSmB,EAqSApF,YArSA,CAAtB;;AAuSA+O,cAAcmB,IAAd;;AAEA;AACA4B,EAAE,iBAAF,EAAqBC,EAArB,CAAwB,OAAxB,EAAiC,YAAW;AAC1CD,IAAE,UAAF,EAAcE,SAAd;AACD,CAFD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AFhpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AERA,IAAIC,YAAY,IAAhB;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,gBAAYE,cAAZ;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAIC,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,QAAIC,UAAU,CAAC,KAAKD,IAAIE,KAAV,EAAiBC,KAAjB,CAAuB,gCAAvB,CAAd;AACA,QAAIF,OAAJ,EAAa;AACX,aAAOG,WAAWH,QAAQ,CAAR,CAAX,CAAP;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAWC,OAAX,CAAmB,uCAAnB,EAA4D,IAA5D,IAAoE,GAA3E;AACD;;AAEDC,QAAQT,YAAR,GAAuBD,kBAAvB;AACAU,QAAQH,UAAR,GAAqBA,UAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA,IAAII,SAASC,QAAQ,cAAR,CAAb;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIC,UAAUD,KAAKE,SAAL,EAAd;AACAD,UAAQE,MAAR,GAAiB,YAAY;AAC3BH,SAAKhJ,MAAL;AACD,GAFD;AAGAiJ,UAAQG,IAAR,GAAeJ,KAAKI,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgC7B,KAAKD,GAAL,EAA/C;AACAyB,OAAKM,UAAL,CAAgBC,YAAhB,CAA6BN,OAA7B,EAAsCD,KAAKQ,WAA3C;AACD;;AAED,IAAIC,aAAa,IAAjB;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,eAAa3J,WAAW,YAAY;AAClC,QAAI6J,QAAQxT,SAAS0C,gBAAT,CAA0B,wBAA1B,CAAZ;AACA,SAAK,IAAI+Q,IAAI,CAAb,EAAgBA,IAAID,MAAME,MAA1B,EAAkCD,GAAlC,EAAuC;AACrC,UAAIf,OAAOJ,UAAP,CAAkBkB,MAAMC,CAAN,EAASR,IAA3B,MAAqCP,OAAOV,YAAP,EAAzC,EAAgE;AAC9DY,mBAAWY,MAAMC,CAAN,CAAX;AACD;AACF;;AAEDH,iBAAa,IAAb;AACD,GATY,EASV,EATU,CAAb;AAUD;;AAEDK,OAAOlB,OAAP,GAAiBc,SAAjB","file":"main.b27368ef.map","sourceRoot":"..","sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","import { v4 } from \"uuid\";\nimport \"../sass/main.scss\";\n\nconst uiController = (function() {\n  // defining DOM elements\n  const DOMElements = {\n    // -------------------------------------------------------\n    // Invoice details input elements\n    // -------------------------------------------------------\n    dataInpuForm: document.querySelector(\".data-form\"),\n\n    // document data inputs\n    docTypeInp: document.querySelector(\".data__doc-type\"),\n    docNumInp: document.querySelector(\".data__doc-number\"),\n    docPlaceInp: document.querySelector(\".data__doc-place\"),\n    docDateInp: document.querySelector(\".data__doc-date\"),\n    docSellDateInp: document.querySelector(\".data__doc-sell-date\"),\n\n    // seller data inputs\n    sellerNameInp: document.querySelector(\".data__seller-name\"),\n    sellerStreetInp: document.querySelector(\".data__seller-street\"),\n    sellerCityInp: document.querySelector(\".data__seller-city\"),\n    sellerPostCodeInp: document.querySelector(\".data__seller-post-code\"),\n    sellerNipInp: document.querySelector(\".data__seller-nip\"),\n    sellerSaveBtn: document.querySelector(\".btn--seller-save\"),\n    sellerLoadBtn: document.querySelector(\".btn--seller-load\"),\n\n    // buyer data inputs\n    buyerNameInp: document.querySelector(\".data__buyer-name\"),\n    buyerStreetInp: document.querySelector(\".data__buyer-street\"),\n    buyerCityInp: document.querySelector(\".data__buyer-city\"),\n    buyerPostCodeInp: document.querySelector(\".data__buyer-post-code\"),\n    buyerNipInp: document.querySelector(\".data__buyer-nip\"),\n    buyerSaveBtn: document.querySelector(\".btn--buyer-save\"),\n    buyerLoadTrigger: document.querySelector(\".btn--buyer-load\"),\n\n    // payment terms inputs\n    payMethodInp: document.querySelector(\".payment__method\"),\n    payTermInp: document.querySelector(\".payment__term\"),\n    payAccountInp: document.querySelector(\".payment__account\"),\n    accountSaveBtn: document.querySelector(\".btn--account-save\"),\n    accountLoadBtn: document.querySelector(\".btn--account-load\"),\n\n    // draft positions inputs\n    itemNameInp: document.querySelector(\".draft-item__name\"),\n    itemUnitInp: document.querySelector(\".draft-item__unit\"),\n    itemQuantInp: document.querySelector(\".draft-item__quantity\"),\n    itemPriceInp: document.querySelector(\".draft-item__price\"),\n    itemNetValInp: document.querySelector(\".draft-item__net-value\"),\n    itemTaxRateInp: document.querySelector(\".draft-item__tax-rate\"),\n    itemTaxValInp: document.querySelector(\".draft-item__tax-value\"),\n    itemTotValInp: document.querySelector(\".draft-item__total-value\"),\n    itemSaveBtn: document.querySelector(\".btn--item-save\"),\n    itemLoadTrigger: document.querySelector(\".btn--item-load\"),\n    storageListModalClose: document.querySelector(\".btn--close-storage-list\"),\n\n    // draft add button\n    addBtn: document.querySelector(\".btn--add-item\"),\n\n    // draft itens table\n    draftItemConstructor: document.querySelector(\".draft-item__constructor\"),\n    draftItemTable: document.querySelector(\".draft-added-items\"),\n    drawtSumTable: document.querySelector(\".draft__summary\"),\n    itemDelBtn: document.querySelectorAll(\".btn--item-del\"),\n\n    // storage list modal\n    storageList: document.querySelector(\".storage-list\"),\n    storageListModal: document.querySelector(\".storage-list__modal\"),\n    storageListBackdrop: document.querySelector(\".storage-list__backdrop\"),\n\n    // button generate invoice\n    genBtn: document.querySelector(\".btn--gen-inv\"),\n    printBtn: document.querySelector(\".btn--print-inv\"),\n\n    // -------------------------------------------------------\n    //output invoice elements\n    // -------------------------------------------------------\n    invoice: document.querySelector(\".invoice\"),\n    // invoice heading\n    invType: document.querySelector(\".invoice__type\"),\n    invNum: document.querySelector(\".invoice__number\"),\n    invPlace: document.querySelector(\".invoice__place\"),\n    invSellDate: document.querySelector(\".invoice__sell-date\"),\n    invDate: document.querySelector(\".invoice__place-date\"),\n    // invoice seller details\n    invSellerName: document.querySelector(\".invoice__seller-name\"),\n    invSellerStr: document.querySelector(\".invoice__seller-street\"),\n    invSellerCity: document.querySelector(\".invoice__seller-city\"),\n    invSellerPostCode: document.querySelector(\".seller__post-code\"),\n    invSellerNip: document.querySelector(\".invoice__seller-nip\"),\n    // invoice buyer details\n    invBuyerName: document.querySelector(\".invoice__buyer-name\"),\n    invBuyerStr: document.querySelector(\".invoice__buyer-street\"),\n    invBuyerCity: document.querySelector(\".invoice__buyer-city\"),\n    invBuyerPostCode: document.querySelector(\".buyer__post-code\"),\n    invBuyerNip: document.querySelector(\".invoice__buyer-nip\"),\n    // Invoice positions items table\n    invoicePositionsTable: document.querySelector(\".invoice__positions-place\"),\n    invoicePositionsTableSum: document.querySelector(\".invoice__positions-summary\"),\n    // invoice final details\n    invFinalToPay: document.querySelector(\".invoice__final-to-pay\"),\n    invFinalPayMethod: document.querySelector(\".invoice__final-payment-method\"),\n    invFinalPayTerm: document.querySelector(\".invoice__final-payment-term\"),\n    invFinalAccount: document.querySelector(\".invoice__final-payment__account\"),\n  };\n\n  // displaying draft item taxes in draft item constructor form\n  const displayDraftItemNotFilledInputs = function() {\n    // if there is fullfilled draft item quantity and net price can calculate:\n    if (DOMElements.itemQuantInp.value !== \"\" && DOMElements.itemPriceInp.value !== \"\") {\n      // net value ptoduct price * quantity\n      DOMElements.itemNetValInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber * DOMElements.itemQuantInp.valueAsNumber\n      ).toFixed(2);\n      // tax value\n      DOMElements.itemTaxValInp.value = (\n        DOMElements.itemQuantInp.valueAsNumber *\n        DOMElements.itemPriceInp.valueAsNumber *\n        parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n      // item total price\n      DOMElements.itemTotValInp.value = (\n        DOMElements.itemNetValInp.valueAsNumber + DOMElements.itemTaxValInp.valueAsNumber\n      ).toFixed(2);\n    }\n  };\n\n  // clearing draft item input fields\n  const clearDraftItemFieds = function() {\n    DOMElements.draftItemConstructor.reset();\n    DOMElements.itemNameInp.focus();\n  };\n\n  // add item to draft table\n  const addItemToDraftItemsList = function(id) {\n    const item = storageController.draftItemsData.items.find(item => item.id === id);\n    // create newtable row\n    const newRow = document.createElement(\"tr\");\n    newRow.classList.add(\"draft__position\");\n    newRow.id = `draft-item-${item.id}`;\n    newRow.dataset.identifier = `${item.id}`;\n    newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n    DOMElements.draftItemTable.appendChild(newRow);\n  };\n\n  // helper function for cleat innner HTML in given element\n  const clearInnerHtml = function(elem) {\n    elem.innerHTML = \"\";\n  };\n\n  // building draft items table from start\n  const rebuildDraftItemsTable = function() {\n    clearInnerHtml(DOMElements.draftItemTable);\n    // for each drafted item perform same action\n    storageController.draftItemsData.items.forEach(item => {\n      // create newtable row\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"draft__position\");\n      newRow.id = `draft-item-${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.draftItemTable.appendChild(newRow);\n    });\n  };\n\n  // building draft sum values in draft table\n  const buildDraftSumValues = function() {\n    // remove all content from summary draft table\n    clearInnerHtml(DOMElements.drawtSumTable);\n\n    const draftSumRow = document.createElement(\"tr\");\n    draftSumRow.classList.add(\"draft__summary-row\");\n    draftSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"draft__summary-legend\">Razem:</th>\n    <th class=\"draft__summary-net-value\">${storageController.draftItemsData.summaries.totalNetVal.toFixed(\n      2\n    )}</th>\n    <th class=\"\"></th>\n    <th class=\"draft__summary-vat-value\">${storageController.draftItemsData.summaries.totalTaxVal.toFixed(\n      2\n    )}</th>\n    <th class=\"draft__summary-total\">${storageController.draftItemsData.summaries.total.toFixed(\n      2\n    )}</th>`;\n    DOMElements.drawtSumTable.appendChild(draftSumRow);\n  };\n\n  const generateDraftSumRow = function(areTaxRateItems, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (areTaxRateItems) {\n      const taxRatefinalRow = document.createElement(\"tr\");\n      taxRatefinalRow.classList.add(\"draft__summary-row\");\n      taxRatefinalRow.innerHTML = `\n      <td colspan=\"5\" class=\"draft__summary-legend\">W tym:</td>\n      <td class=\"draft__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n      <td class=\"\">${checkingTaxRate}%</td>\n      <td class=\"draft__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n      <td class=\"draft__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.drawtSumTable.appendChild(taxRatefinalRow);\n    }\n  };\n\n  const generateInvoice = function() {\n    const invoiceObj = storageController.invoices.invoice.details;\n    // inserting details of the invoice\n    DOMElements.invType.textContent = `${invoiceObj.document.type}`;\n    DOMElements.invNum.textContent = `nr ${invoiceObj.document.number}`;\n    DOMElements.invPlace.textContent = `Miejsce wystawienia: ${invoiceObj.document.place}`;\n    DOMElements.invDate.textContent = `Data wystawienia: ${invoiceObj.document.date}`;\n    DOMElements.invSellDate.textContent = `Data sprzedaży: ${invoiceObj.document.sellDate}`;\n    DOMElements.invSellerName.textContent = `${invoiceObj.seller.name}`;\n    DOMElements.invSellerStr.textContent = `${invoiceObj.seller.street}`;\n    DOMElements.invSellerCity.textContent = `${invoiceObj.seller.city}`;\n    DOMElements.invSellerPostCode.textContent = `${invoiceObj.seller.postCode}`;\n    DOMElements.invSellerNip.textContent = `NIP: ${invoiceObj.seller.nip}`;\n    DOMElements.invBuyerName.textContent = `${invoiceObj.buyer.name}`;\n    DOMElements.invBuyerStr.textContent = `${invoiceObj.buyer.street}`;\n    DOMElements.invBuyerCity.textContent = `${invoiceObj.buyer.city}`;\n    DOMElements.invBuyerPostCode.textContent = `${invoiceObj.buyer.postCode}`;\n    DOMElements.invBuyerNip.textContent = `NIP: ${invoiceObj.buyer.nip}`;\n    DOMElements.invFinalToPay.textContent = `Do zapłaty: ${invoiceObj.payment.toPay.toFixed(\n      2\n    )} PLN`;\n    DOMElements.invFinalPayMethod.textContent = `Sposób płatności: ${invoiceObj.payment.method}`;\n    DOMElements.invFinalPayTerm.textContent = `Termin płatności: ${invoiceObj.payment.term}`;\n    // print account number if choosen method is different than cash\n    if (invoiceObj.payment.method !== \"gotówka\") {\n      DOMElements.invFinalAccount.textContent = `Konto: ${invoiceObj.payment.account}`;\n    } else {\n      DOMElements.invFinalAccount.textContent = ``;\n    }\n  };\n\n  const generateInvoicePositions = function(positionsArray) {\n    clearInnerHtml(DOMElements.invoicePositionsTable);\n    clearInnerHtml(DOMElements.invoicePositionsTableSum);\n\n    positionsArray.forEach(item => {\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"invoice__position\");\n      newRow.id = `invoice-item${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n          <td class=\"invoice__item-lp\">${positionsArray.indexOf(item) + 1}</td>\n          <td class=\"invoice__item-name\">${item.name}</td>\n          <td class=\"invoice__item-unit\">${item.unit}</td>\n          <td class=\"invoice__item-quantity\">${item.quantity.toFixed(2)}</td>\n          <td class=\"invoice__item-price\">${item.netPrice.toFixed(2)}</td>\n          <td class=\"invoice__item-net-value\">${item.netValue.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-rate\">${item.taxRate.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n          <td class=\"invoice__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(newRow);\n    });\n\n    // invoice items summaries from draft items summaries section\n    const totalNetVal = storageController.draftItemsData.summaries.totalNetVal;\n    const totalTaxVal = storageController.draftItemsData.summaries.totalTaxVal;\n    const total = storageController.draftItemsData.summaries.total;\n\n    const invoiceSumRow = document.createElement(\"tr\");\n    invoiceSumRow.classList.add(\"invoice__summary-row\");\n    invoiceSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"invoice__summary-legend\">Razem:</th>\n    <th class=\"invoice__summary-net-value\">${totalNetVal.toFixed(2)}</th>\n    <th class=\"\"></th>\n    <th class=\"invoice__summary-vat-value\">${totalTaxVal.toFixed(2)}</th>\n    <th class=\"invoice__summary-total\">${total.toFixed(2)}</th>`;\n    DOMElements.invoicePositionsTable.appendChild(invoiceSumRow);\n\n    // generate boolean values for check it there are some products with specific tax rates\n    const isTax23 = positionsArray.some(item => item.taxRate === 23);\n    const isTax8 = positionsArray.some(item => item.taxRate === 8);\n    const isTax5 = positionsArray.some(item => item.taxRate === 5);\n    const isTax3 = positionsArray.some(item => item.taxRate === 3);\n    const isTax00 = positionsArray.some(item => item.taxRate === 0);\n\n    //  generate summaries by vat rate\n    generateInvoiceSumRow(isTax23, 23);\n    generateInvoiceSumRow(isTax8, 8);\n    generateInvoiceSumRow(isTax5, 5);\n    generateInvoiceSumRow(isTax3, 3);\n    generateInvoiceSumRow(isTax00, 0);\n  };\n\n  // generate invoice positions sum row for each existing in draft items tavle tax rate determined by first argument the boolean value\n  const generateInvoiceSumRow = function(isTaxRate, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (isTaxRate) {\n      const vatRatefinalrow = document.createElement(\"tr\");\n      vatRatefinalrow.classList.add(\"invoice__summary-row\");\n      vatRatefinalrow.innerHTML = `\n        <td colspan=\"5\" class=\"invoice__summary-legend\">W tym:</td>\n        <td class=\"invoice__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n        <td class=\"\">${checkingTaxRate}%</td>\n        <td class=\"invoice__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n        <td class=\"invoice__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(vatRatefinalrow);\n    }\n  };\n\n  // showing modal complete\n  const showCompleteInfo = function() {\n    const competionModal = document.querySelector(\".not-completed-form-modal\");\n    competionModal.style.display = \"block\";\n    setTimeout(() => competionModal.classList.add(\"completion-modal-active\"), 10);\n\n    setTimeout(hideCompletionModal, 3000);\n\n    function hideCompletionModal() {\n      competionModal.classList.remove(\"completion-modal-active\");\n      setTimeout(() => (competionModal.style.display = \"none\"), 250);\n    }\n  };\n\n  const activatePrintInvoice = function() {\n    DOMElements.printBtn.removeAttribute(\"disabled\");\n  };\n\n  const closeStorageModal = function() {\n    DOMElements.storageListModal.classList.remove(\"modal-active\");\n    setTimeout(() => {\n      DOMElements.storageListModal.style.display = \"none\";\n    }, 250);\n    hideBackdropModal();\n    DOMElements.storageList.innerHTML = \"\";\n  };\n\n  const openStorageModal = function() {\n    displayBackdropModal();\n    DOMElements.storageListModal.style.display = \"block\";\n    setTimeout(() => {\n      DOMElements.storageListModal.classList.add(\"modal-active\");\n    }, 10);\n  };\n\n  const hideBackdropModal = function() {\n    DOMElements.storageListBackdrop.classList.remove(\"backdrop-active\");\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.style = \"display: none\";\n    }, 250);\n  };\n\n  const displayBackdropModal = function() {\n    DOMElements.storageListBackdrop.style = \"display: block\";\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.classList.add(\"backdrop-active\");\n    }, 10);\n  };\n\n  const fillInputForm = function(e) {\n    if (e.target.classList.contains(\"btn--load-item\")) {\n      console.log(e.target.dataset.itemName);\n      const items = JSON.parse(localStorage.getItem(\"items\"));\n      const item = items[e.target.dataset.itemName];\n      DOMElements.itemNameInp.value = item.name;\n      DOMElements.itemUnitInp.value = item.unit;\n      DOMElements.itemPriceInp.value = item.netPrice;\n      DOMElements.itemTaxRateInp.value = item.taxRate;\n      closeStorageModal();\n      DOMElements.itemQuantInp.focus();\n    }\n    if (e.target.classList.contains(\"btn--load-seller\")) {\n      const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n      const seller = sellers[e.target.dataset.sellerName];\n      DOMElements.sellerNameInp.value = seller.name;\n      DOMElements.sellerStreetInp.value = seller.street;\n      DOMElements.sellerCityInp.value = seller.city;\n      DOMElements.sellerPostCodeInp.value = seller.postCode;\n      DOMElements.sellerNipInp.value = seller.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-buyer\")) {\n      const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n      const buyer = buyers[e.target.dataset.buyerName];\n      DOMElements.buyerNameInp.value = buyer.name;\n      DOMElements.buyerStreetInp.value = buyer.street;\n      DOMElements.buyerCityInp.value = buyer.city;\n      DOMElements.buyerPostCodeInp.value = buyer.postCode;\n      DOMElements.buyerNipInp.value = buyer.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-account\")) {\n      const sellerAccounts = JSON.parse(localStorage.getItem(\"sellerAccounts\"));\n      const account = sellerAccounts[e.target.dataset.accountNumber];\n      DOMElements.payAccountInp.value = account.accountNumber;\n      closeStorageModal();\n    }\n  };\n\n  const buildStorageSellersList = function() {\n    if (localStorage.getItem(\"sellers\")) {\n      const localStorageBuyers = JSON.parse(localStorage.getItem(\"sellers\"));\n      const sellers = Object.entries(localStorageBuyers);\n      sellers.forEach(seller => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-seller\");\n        loadButton.dataset.sellerName = seller[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-seller\");\n        deleteButton.dataset.sellerName = seller[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__seller-name\");\n        nameSpan.textContent = seller[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__seller-street\");\n        streetSpan.textContent = seller[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__seller-city\");\n        citySpan.textContent = seller[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__seller-nip\");\n        nipSpan.textContent = seller[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych sprzedawców zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageBuyersList = function() {\n    if (localStorage.getItem(\"buyers\")) {\n      const localStorageBuyers = JSON.parse(localStorage.getItem(\"buyers\"));\n      const buyers = Object.entries(localStorageBuyers);\n      buyers.forEach(buyer => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-buyer\");\n        loadButton.dataset.buyerName = buyer[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-buyer\");\n        deleteButton.dataset.buyerName = buyer[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__buyer-name\");\n        nameSpan.textContent = buyer[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__buyer-street\");\n        streetSpan.textContent = buyer[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__buyer-city\");\n        citySpan.textContent = buyer[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__buyer-nip\");\n        nipSpan.textContent = buyer[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych kontrahentów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageSellerAccountsList = function(sellerAccounts) {\n    if (localStorage.getItem(\"sellerAccounts\")) {\n      const localStorageAccounts = JSON.parse(localStorage.getItem(\"sellerAccounts\"));\n      const sellerAccounts = Object.entries(localStorageAccounts);\n      sellerAccounts.forEach(account => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-account\");\n        loadButton.dataset.accountNumber = account[1].accountNumber;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-account\");\n        deleteButton.dataset.accountNumber = account[1].accountNumber;\n        deleteButton.textContent = \"Usuń\";\n\n        const accountNumberSpan = document.createElement(\"span\");\n        accountNumberSpan.classList.add(\"storage-list__account-number\");\n        accountNumberSpan.textContent = \"Numer Konta: \" + account[1].accountNumber;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(accountNumberSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych numerów kont zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageItemsList = function() {\n    if (localStorage.getItem(\"items\")) {\n      const localStorageItems = JSON.parse(localStorage.getItem(\"items\"));\n      const items = Object.entries(localStorageItems);\n      items.forEach(item => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-item\");\n        loadButton.dataset.itemName = item[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-item\");\n        deleteButton.dataset.itemName = item[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__item-name\");\n        nameSpan.textContent = item[1].name;\n\n        const priceSpan = document.createElement(\"span\");\n        priceSpan.classList.add(\"storage-list__item-price\");\n        priceSpan.textContent = item[1].netPrice + \"PLN/\" + item[1].unit;\n\n        const taxSpan = document.createElement(\"span\");\n        taxSpan.classList.add(\"storage-list__item-tax\");\n        taxSpan.textContent = item[1].taxRate + \"%\";\n\n        const dateSpan = document.createElement(\"span\");\n        dateSpan.classList.add(\"storage-list__item-date\");\n        dateSpan.textContent = \"(zapisano: \" + item[1].date + \")\";\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(priceSpan);\n        li.appendChild(taxSpan);\n        li.appendChild(dateSpan);\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych produktów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const noLocalStorageDataInfo = function(message) {\n    const noDataInfo = document.createElement(\"h3\");\n    noDataInfo.classList.add(\"storage-list__no-data-info\");\n    noDataInfo.textContent = message;\n\n    DOMElements.storageList.appendChild(noDataInfo);\n  };\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    DOMElements,\n    displayDraftItemNotFilledInputs,\n    clearDraftItemFieds,\n    rebuildDraftItemsTable,\n    addItemToDraftItemsList,\n    generateDraftSumRow,\n    buildDraftSumValues,\n    generateInvoice,\n    generateInvoicePositions,\n    showCompleteInfo,\n    activatePrintInvoice,\n    closeStorageModal,\n    openStorageModal,\n    hideBackdropModal,\n    displayBackdropModal,\n    fillInputForm,\n    buildStorageItemsList,\n    buildStorageSellerAccountsList,\n    buildStorageBuyersList,\n    buildStorageSellersList,\n    noLocalStorageDataInfo,\n  };\n})();\n\n/*-----------------------------------------------------\n  Storage Controller \n  ----------------------------------------------------*/\n\nconst storageController = (function() {\n  const draftItemsData = {\n    items: [],\n    summaries: {\n      total: 0,\n      totalNetVal: 0,\n      totalTaxVal: 0,\n      taxRates: {\n        tax23: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax8: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax5: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax3: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax0: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n      },\n    },\n  };\n\n  const invoices = {\n    invoice: {},\n  };\n\n  const DOMElements = uiController.DOMElements;\n\n  const createInvoiceObj = function() {\n    const invoice = {\n      details: {\n        document: {\n          type: DOMElements.docTypeInp.value,\n          number: DOMElements.docNumInp.value,\n          place: DOMElements.docPlaceInp.value,\n          date: DOMElements.docDateInp.value,\n          sellDate: DOMElements.docSellDateInp.value,\n        },\n        seller: {\n          name: DOMElements.sellerNameInp.value,\n          street: DOMElements.sellerStreetInp.value,\n          city: DOMElements.sellerCityInp.value,\n          postCode: DOMElements.sellerPostCodeInp.value,\n          nip: DOMElements.sellerNipInp.value,\n        },\n        buyer: {\n          name: DOMElements.buyerNameInp.value,\n          street: DOMElements.buyerStreetInp.value,\n          city: DOMElements.buyerCityInp.value,\n          postCode: DOMElements.buyerPostCodeInp.value,\n          nip: DOMElements.buyerNipInp.value,\n        },\n        payment: {\n          toPay: draftItemsData.summaries.total,\n          method: DOMElements.payMethodInp.value,\n          term: DOMElements.payTermInp.value,\n          account: DOMElements.payAccountInp.value,\n        },\n      },\n      positions: draftItemsData.items,\n    };\n    invoices.invoice = invoice;\n  };\n\n  const deleteDraftItem = function(delID) {\n    draftItemsData.items = draftItemsData.items.filter(item => item.id != delID);\n  };\n\n  const createNewItem = function(id) {\n    const newItem = {\n      // asigning values to newitem\n      id: id,\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      quantity: DOMElements.itemQuantInp.valueAsNumber,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      get netValue() {\n        return this.netPrice * this.quantity;\n      },\n      get taxValue() {\n        return this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n      get total() {\n        return this.netPrice * this.quantity + this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n    };\n    draftItemsData.items.push(newItem);\n  };\n\n  const calculateDraftItemsTotals = function() {\n    const draftItemsTotal = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.total;\n    }, 0);\n    const draftItemsTotalNetValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.netValue;\n    }, 0);\n    const draftItemsTotalTaxValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.taxValue;\n    }, 0);\n\n    draftItemsData.summaries.total = draftItemsTotal;\n    draftItemsData.summaries.totalNetVal = draftItemsTotalNetValue;\n    draftItemsData.summaries.totalTaxVal = draftItemsTotalTaxValue;\n  };\n\n  const claculateDraftTaxRatesValues = function(areTaxRateItems, checkingTaxRate) {\n    if (areTaxRateItems) {\n      const taxRateItemsArr = draftItemsData.items.filter(item => item.taxRate === checkingTaxRate);\n      const taxRateNetValue = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.netValue;\n      }, 0);\n      const taxRateTax = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.taxValue;\n      }, 0);\n      const taxRateTotal = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.total;\n      }, 0);\n\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxValue = taxRateTax;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxTotal = taxRateTotal;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].netValue = taxRateNetValue;\n    }\n  };\n\n  // creating vat rates summaries in storage controller and building summaries rows in draft items table\n  const createDraftVatRatesValues = function() {\n    // boolean values for check if there are some products with specific tax rates\n    const isTax00 = draftItemsData.items.some(item => item.taxRate === 0);\n    const isTax3 = draftItemsData.items.some(item => item.taxRate === 3);\n    const isTax5 = draftItemsData.items.some(item => item.taxRate === 5);\n    const isTax8 = draftItemsData.items.some(item => item.taxRate === 8);\n    const isTax23 = draftItemsData.items.some(item => item.taxRate === 23);\n\n    // calculate summary valuest for each vat rate\n    claculateDraftTaxRatesValues(isTax00, 0);\n    claculateDraftTaxRatesValues(isTax3, 3);\n    claculateDraftTaxRatesValues(isTax5, 5);\n    claculateDraftTaxRatesValues(isTax8, 8);\n    claculateDraftTaxRatesValues(isTax23, 23);\n\n    // create summary row for each existing vat rate\n    uiController.generateDraftSumRow(isTax00, 0);\n    uiController.generateDraftSumRow(isTax3, 3);\n    uiController.generateDraftSumRow(isTax5, 5);\n    uiController.generateDraftSumRow(isTax8, 8);\n    uiController.generateDraftSumRow(isTax23, 23);\n  };\n\n  const saveSellerToLocal = function(seller) {\n    let sellers = {};\n    if (localStorage.getItem(\"sellers\")) {\n      sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    }\n\n    sellers[seller.name] = seller;\n\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const saveBuyerToLocal = function(buyer) {\n    let buyers = {};\n    if (localStorage.getItem(\"buyers\")) {\n      buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    }\n\n    buyers[buyer.name] = buyer;\n\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const saveItemToLocal = function(item) {\n    let items = {};\n    if (localStorage.getItem(\"items\")) {\n      items = JSON.parse(localStorage.getItem(\"items\"));\n    }\n\n    items[item.name] = item;\n\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n  const saveAccountToLocal = function(sellerAccount) {\n    let sellerAccounts = {};\n    if (localStorage.getItem(\"sellerAccounts\")) {\n      sellerAccounts = JSON.parse(localStorage.getItem(\"sellerAccounts\"));\n    }\n\n    sellerAccounts[sellerAccount.accountNumber] = sellerAccount;\n\n    localStorage.setItem(\"sellerAccounts\", JSON.stringify(sellerAccounts));\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    invoices,\n    draftItemsData,\n    createNewItem,\n    deleteDraftItem,\n    createDraftVatRatesValues,\n    createInvoiceObj,\n    calculateDraftItemsTotals,\n    saveSellerToLocal,\n    saveBuyerToLocal,\n    saveItemToLocal,\n    saveAccountToLocal,\n  };\n})();\n\n/*-----------------------------------------------------\n  App Controller\n----------------------------------------------------*/\n\nconst appController = (function(StorageCtrl, UiCtrl) {\n  const DOMElements = UiCtrl.DOMElements;\n\n  const loadEventListeners = function() {\n    // generate invoice event listener\n    DOMElements.genBtn.addEventListener(\"click\", generateInvoice);\n    // event listeners for draft section\n    DOMElements.addBtn.addEventListener(\"click\", addItem);\n    DOMElements.itemQuantInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemPriceInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemNetValInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemTaxRateInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.draftItemTable.addEventListener(\"click\", deleteDraftItem);\n\n    // event listeners for verification for inputs section\n    DOMElements.dataInpuForm.addEventListener(\"keyup\", verifyInputField);\n    DOMElements.dataInpuForm.addEventListener(\"change\", verifyInputField);\n    DOMElements.draftItemConstructor.addEventListener(\"keyup\", verifyDraftItemInput);\n\n    DOMElements.payMethodInp.addEventListener(\"change\", isBankAccountCheck);\n\n    // local storage save and load listeners\n    DOMElements.sellerSaveBtn.addEventListener(\"click\", saveSeller);\n    DOMElements.sellerLoadBtn.addEventListener(\"click\", loadSeller);\n    DOMElements.buyerSaveBtn.addEventListener(\"click\", saveBuyer);\n    DOMElements.buyerLoadTrigger.addEventListener(\"click\", retrieveBuyers);\n    DOMElements.accountSaveBtn.addEventListener(\"click\", saveAccount);\n    DOMElements.accountLoadBtn.addEventListener(\"click\", retrieveAccounts);\n    DOMElements.itemSaveBtn.addEventListener(\"click\", saveItem);\n    DOMElements.itemLoadTrigger.addEventListener(\"click\", retrieveItems);\n    DOMElements.storageListModalClose.addEventListener(\"click\", UiCtrl.closeStorageModal);\n    DOMElements.storageList.addEventListener(\"click\", UiCtrl.fillInputForm);\n    DOMElements.storageList.addEventListener(\"click\", deleteLocalStorageEntry);\n  };\n\n  // initialization function\n  const init = function() {\n    loadEventListeners();\n  };\n  const isBankAccountCheck = function(e) {\n    if (e.target.value === \"gotówka\") {\n      DOMElements.payAccountInp.parentElement.style.display = \"none\";\n      DOMElements.payAccountInp.setAttribute(\"disabled\", true);\n      DOMElements.payAccountInp.value = \"\";\n    } else {\n      DOMElements.payAccountInp.parentElement.style.display = \"flex\";\n      DOMElements.payAccountInp.removeAttribute(\"disabled\");\n    }\n  };\n\n  const verifyInputField = function(e) {\n    if (e.target === DOMElements.sellerPostCodeInp || e.target === DOMElements.buyerPostCodeInp) {\n      validationFunctions.validatePostCode(e);\n    } else if (e.target === DOMElements.sellerNipInp || e.target === DOMElements.buyerNipInp) {\n      validationFunctions.validateNip(e);\n    } else if (e.target === DOMElements.payAccountInp) {\n      if (\n        DOMElements.payMethodInp.value !== \"gotówka\" ||\n        DOMElements.payMethodInp.value !== \"pobranie\"\n      ) {\n        validationFunctions.validateAccount(e);\n      }\n    } else {\n      validationFunctions.validateFillInFormInput(e);\n    }\n  };\n\n  const verifyDraftItemInput = function(e) {\n    validationFunctions.validateDraftItemInputs(e);\n  };\n\n  const verifyCompletedForm = function() {\n    let inputs = Array.from(DOMElements.dataInpuForm.getElementsByClassName(\"input\"));\n\n    // If payment method is 'gotówka' cuts this field from inputs array to not validate ir\n    if (DOMElements.payMethodInp.value === \"gotówka\") {\n      inputs = inputs.filter(item => item.classList.contains(\"payment__account\") === false);\n    }\n    if (inputs.some(input => input.value === \"\" || input.value === \" \")) {\n      inputs\n        .filter(input => input.value === \"\" || input.value === \" \")\n        .forEach(input => input.classList.add(\"invalid\"));\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  // validation functions object\n  const validationFunctions = {\n    validatePostCode: function(e) {\n      const reg = /^\\d\\d-\\d\\d\\d$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateNip: function(e) {\n      const reg = /^\\d{3}[- ]?\\d{3}[- ]?\\d\\d[- ]?\\d\\d\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateAccount: function(e) {\n      const reg = /^([A-Za-z]{2})?[ ]?\\d{2}([ ]?\\d{4}){6}\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateFillInFormInput: function(e) {\n      const reg = /[A-Za-z\\d]+/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateDraftItemInputs: function(e) {\n      if (\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemQuantInp.value !== \"\" &&\n        DOMElements.itemPriceInp.value !== \"\"\n      ) {\n        DOMElements.addBtn.disabled = false;\n      } else {\n        DOMElements.addBtn.disabled = true;\n      }\n    },\n  };\n\n  const addItem = function() {\n    const newItemId = v4();\n    storageController.createNewItem(newItemId);\n    storageController.calculateDraftItemsTotals();\n    UiCtrl.clearDraftItemFieds();\n    UiCtrl.addItemToDraftItemsList(newItemId);\n    StorageCtrl.createDraftVatRatesValues();\n    UiCtrl.buildDraftSumValues();\n    storageController.createDraftVatRatesValues();\n    DOMElements.addBtn.disabled = true;\n  };\n\n  const calculateDraftItem = function() {\n    // calculate and display not filled draft input values and placing it's values as input value\n    UiCtrl.displayDraftItemNotFilledInputs();\n  };\n\n  const deleteDraftItem = function(e) {\n    if (e.target.classList.contains(\"btn--item-del\")) {\n      // determine id of target item\n      const delID = e.target.parentElement.parentElement.dataset.identifier;\n      // delete item from storage array by given id\n      StorageCtrl.deleteDraftItem(delID);\n      // recalculate invoice totals\n      StorageCtrl.calculateDraftItemsTotals();\n      // rebuild draft items table\n      UiCtrl.rebuildDraftItemsTable();\n      // check existing on draft items vat rates\n      StorageCtrl.createDraftVatRatesValues();\n      // rebuild vat summareis table by vat rate for draft items\n      UiCtrl.buildDraftSumValues();\n    }\n  };\n\n  // function for generate new invoice object\n  const generateInvoice = function() {\n    const verified = verifyCompletedForm();\n    if (verified) {\n      // create invoice object in storage\n      StorageCtrl.createInvoiceObj();\n      // generating invoice document\n      UiCtrl.generateInvoice();\n      // generate invoice positions from draft items\n      UiCtrl.generateInvoicePositions(StorageCtrl.invoices.invoice.positions);\n      // Activate print invoice button\n      UiCtrl.activatePrintInvoice();\n    } else {\n      uiController.showCompleteInfo();\n    }\n  };\n\n  const saveSeller = function(e) {\n    e.preventDefault();\n\n    const seller = {\n      name: DOMElements.sellerNameInp.value,\n      street: DOMElements.sellerStreetInp.value,\n      city: DOMElements.sellerCityInp.value,\n      postCode: DOMElements.sellerPostCodeInp.value,\n      nip: DOMElements.sellerNipInp.value,\n    };\n    StorageCtrl.saveSellerToLocal(seller);\n  };\n\n  const loadSeller = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellersList();\n  };\n\n  const saveBuyer = function(e) {\n    e.preventDefault();\n\n    const buyer = {\n      name: DOMElements.buyerNameInp.value,\n      street: DOMElements.buyerStreetInp.value,\n      city: DOMElements.buyerCityInp.value,\n      postCode: DOMElements.buyerPostCodeInp.value,\n      nip: DOMElements.buyerNipInp.value,\n    };\n    StorageCtrl.saveBuyerToLocal(buyer);\n  };\n\n  const retrieveBuyers = function(e) {\n    e.preventDefault();\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageBuyersList();\n  };\n\n  const saveAccount = function(e) {\n    e.preventDefault();\n\n    const sellerAccount = {\n      accountNumber: DOMElements.payAccountInp.value,\n    };\n    StorageCtrl.saveAccountToLocal(sellerAccount);\n  };\n\n  const retrieveAccounts = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellerAccountsList();\n  };\n\n  const saveItem = function(e) {\n    e.preventDefault();\n\n    const now = new Date();\n    const createdDate =\n      now.getUTCFullYear() + \"/\" + (now.getUTCMonth() + 1) + \"/\" + now.getUTCDate();\n\n    const item = {\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      date: createdDate,\n    };\n    StorageCtrl.saveItemToLocal(item);\n  };\n\n  const retrieveItems = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageItemsList();\n  };\n\n  const deleteLocalStorageEntry = function(e) {\n    e.preventDefault();\n    const targetClasses = e.target.classList;\n    if (targetClasses.contains(\"btn--delete-seller\")) {\n      // StorageCtrl.deleteSeller();\n      // UiCtrl.removeSeller();\n    }\n    if (targetClasses.contains(\"btn--delete-buyer\")) {\n      // StorageCtrl.deleteSeller();\n      // UiCtrl.removeSeller();\n    }\n    if (targetClasses.contains(\"btn--delete-account\")) {\n      // StorageCtrl.deleteSeller();\n      // UiCtrl.removeSeller();\n    }\n    if (targetClasses.contains(\"btn--delete-item\")) {\n      // StorageCtrl.deleteSeller();\n      // UiCtrl.removeSeller();\n    }\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    init,\n  };\n})(storageController, uiController);\n\nappController.init();\n\n// print js script for printing - dependiency - jquery\n$(\".btn--print-inv\").on(\"click\", function() {\n  $(\".invoice\").printThis();\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}