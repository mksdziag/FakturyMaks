{"version":3,"sources":["node_modules/uuid/lib/rng-browser.js","node_modules/uuid/lib/bytesToUuid.js","node_modules/uuid/v1.js","node_modules/uuid/v4.js","node_modules/uuid/index.js","js/main.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["uiController","DOMElements","dataInpuForm","document","querySelector","docTypeInp","docNumInp","docPlaceInp","docDateInp","docSellDateInp","sellerNameInp","sellerStreetInp","sellerCityInp","sellerPostCodeInp","sellerNipInp","sellerSaveBtn","sellerLoadBtn","buyerNameInp","buyerStreetInp","buyerCityInp","buyerPostCodeInp","buyerNipInp","buyerSaveBtn","buyerLoadTrigger","payMethodInp","payTermInp","payAccountInp","accountSaveBtn","accountLoadBtn","itemNameInp","itemUnitInp","itemQuantInp","itemPriceInp","itemNetValInp","itemTaxRateInp","itemTaxValInp","itemTotValInp","itemSaveBtn","itemLoadTrigger","storageListModalClose","addBtn","draftItemConstructor","draftItemTable","drawtSumTable","itemDelBtn","querySelectorAll","storageList","storageListModal","storageListBackdrop","genBtn","printBtn","invoice","invType","invNum","invPlace","invSellDate","invDate","invSellerName","invSellerStr","invSellerCity","invSellerPostCode","invSellerNip","invBuyerName","invBuyerStr","invBuyerCity","invBuyerPostCode","invBuyerNip","invoicePositionsTable","invoicePositionsTableSum","invFinalToPay","invFinalPayMethod","invFinalPayTerm","invFinalAccount","displayDraftItemNotFilledInputs","value","valueAsNumber","toFixed","parseFloat","itemTotalPriceInp","clearDraftItemFieds","reset","focus","addItemToDraftItemsList","id","item","storageController","draftItemsData","items","find","newRow","createElement","classList","add","dataset","identifier","innerHTML","name","unit","quantity","netPrice","netValue","taxRate","taxValue","total","appendChild","clearInnerHtml","elem","rebuildDraftItemsTable","forEach","buildDraftSumValues","draftSumRow","summaries","totalNetVal","totalTaxVal","generateDraftSumRow","areTaxRateItems","checkingTaxRate","checkedTaxRate","taxRates","taxRatefinalRow","taxTotal","generateInvoice","invoiceObj","invoices","details","textContent","type","number","place","date","sellDate","seller","street","city","postCode","nip","buyer","payment","toPay","method","term","account","generateInvoicePositions","positionsArray","indexOf","invoiceSumRow","isTax23","some","isTax8","isTax5","isTax3","isTax00","generateInvoiceSumRow","isTaxRate","vatRatefinalrow","showCompleteInfo","competionModal","style","display","setTimeout","hideCompletionModal","remove","activatePrintInvoice","removeAttribute","closeStorageModal","hideBackdropModal","openStorageModal","displayBackdropModal","fillInputForm","e","target","contains","console","log","itemName","JSON","parse","localStorage","getItem","sellers","sellerName","buyers","buyerName","accounts","accountNumber","buildStorageSellersList","localStorageBuyers","Object","keys","length","entries","li","loadButton","deleteButton","nameSpan","streetSpan","citySpan","nipSpan","noLocalStorageDataInfo","buildStorageBuyersList","buildStorageSellerAccountsList","localStorageAccounts","accountNumberSpan","buildStorageItemsList","localStorageItems","priceSpan","taxSpan","dateSpan","message","noDataInfo","hideListItem","element","addEventListener","propertyName","tax23","tax8","tax5","tax3","tax0","createInvoiceObj","positions","deleteDraftItem","delID","filter","createNewItem","newItem","push","calculateDraftItemsTotals","draftItemsTotal","reduce","acc","draftItemsTotalNetValue","draftItemsTotalTaxValue","claculateDraftTaxRatesValues","taxRateItemsArr","taxRateNetValue","taxRateTax","taxRateTotal","createDraftVatRatesValues","saveSellerToLocal","setItem","stringify","saveBuyerToLocal","saveItemToLocal","saveAccountToLocal","deleteSeller","deleteBuyer","deleteAccount","deleteItem","appController","StorageCtrl","UiCtrl","loadEventListeners","addItem","calculateDraftItem","verifyInputField","verifyDraftItemInput","isBankAccountCheck","saveSeller","loadSeller","saveBuyer","retrieveBuyers","saveAccount","retrieveAccounts","saveItem","retrieveItems","deleteLocalStorageEntry","init","parentElement","setAttribute","validationFunctions","validatePostCode","validateNip","validateAccount","validateFillInFormInput","validateDraftItemInputs","verifyCompletedForm","inputs","Array","from","getElementsByClassName","input","reg","test","disabled","newItemId","verified","preventDefault","now","Date","createdDate","getUTCFullYear","getUTCMonth","getUTCDate","targetClasses","$","on","printThis","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","i","module"],"mappings":"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","file":"main.b27368ef.map","sourceRoot":"..","sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","import { v4 } from \"uuid\";\nimport \"../sass/main.scss\";\n\nconst uiController = (function() {\n  // defining DOM elements\n  const DOMElements = {\n    // -------------------------------------------------------\n    // Invoice details input elements\n    // -------------------------------------------------------\n    dataInpuForm: document.querySelector(\".data-form\"),\n\n    // document data inputs\n    docTypeInp: document.querySelector(\".data__doc-type\"),\n    docNumInp: document.querySelector(\".data__doc-number\"),\n    docPlaceInp: document.querySelector(\".data__doc-place\"),\n    docDateInp: document.querySelector(\".data__doc-date\"),\n    docSellDateInp: document.querySelector(\".data__doc-sell-date\"),\n\n    // seller data inputs\n    sellerNameInp: document.querySelector(\".data__seller-name\"),\n    sellerStreetInp: document.querySelector(\".data__seller-street\"),\n    sellerCityInp: document.querySelector(\".data__seller-city\"),\n    sellerPostCodeInp: document.querySelector(\".data__seller-post-code\"),\n    sellerNipInp: document.querySelector(\".data__seller-nip\"),\n    sellerSaveBtn: document.querySelector(\".btn--seller-save\"),\n    sellerLoadBtn: document.querySelector(\".btn--seller-load\"),\n\n    // buyer data inputs\n    buyerNameInp: document.querySelector(\".data__buyer-name\"),\n    buyerStreetInp: document.querySelector(\".data__buyer-street\"),\n    buyerCityInp: document.querySelector(\".data__buyer-city\"),\n    buyerPostCodeInp: document.querySelector(\".data__buyer-post-code\"),\n    buyerNipInp: document.querySelector(\".data__buyer-nip\"),\n    buyerSaveBtn: document.querySelector(\".btn--buyer-save\"),\n    buyerLoadTrigger: document.querySelector(\".btn--buyer-load\"),\n\n    // payment terms inputs\n    payMethodInp: document.querySelector(\".payment__method\"),\n    payTermInp: document.querySelector(\".payment__term\"),\n    payAccountInp: document.querySelector(\".payment__account\"),\n    accountSaveBtn: document.querySelector(\".btn--account-save\"),\n    accountLoadBtn: document.querySelector(\".btn--account-load\"),\n\n    // draft positions inputs\n    itemNameInp: document.querySelector(\".draft-item__name\"),\n    itemUnitInp: document.querySelector(\".draft-item__unit\"),\n    itemQuantInp: document.querySelector(\".draft-item__quantity\"),\n    itemPriceInp: document.querySelector(\".draft-item__price\"),\n    itemNetValInp: document.querySelector(\".draft-item__net-value\"),\n    itemTaxRateInp: document.querySelector(\".draft-item__tax-rate\"),\n    itemTaxValInp: document.querySelector(\".draft-item__tax-value\"),\n    itemTotValInp: document.querySelector(\".draft-item__total-value\"),\n    itemSaveBtn: document.querySelector(\".btn--item-save\"),\n    itemLoadTrigger: document.querySelector(\".btn--item-load\"),\n    storageListModalClose: document.querySelector(\".btn--close-storage-list\"),\n\n    // draft add button\n    addBtn: document.querySelector(\".btn--add-item\"),\n\n    // draft itens table\n    draftItemConstructor: document.querySelector(\".draft-item__constructor\"),\n    draftItemTable: document.querySelector(\".draft-added-items\"),\n    drawtSumTable: document.querySelector(\".draft__summary\"),\n    itemDelBtn: document.querySelectorAll(\".btn--item-del\"),\n\n    // storage list modal\n    storageList: document.querySelector(\".storage-list\"),\n    storageListModal: document.querySelector(\".storage-list__modal\"),\n    storageListBackdrop: document.querySelector(\".storage-list__backdrop\"),\n\n    // button generate invoice\n    genBtn: document.querySelector(\".btn--gen-inv\"),\n    printBtn: document.querySelector(\".btn--print-inv\"),\n\n    // -------------------------------------------------------\n    //output invoice elements\n    // -------------------------------------------------------\n    invoice: document.querySelector(\".invoice\"),\n    // invoice heading\n    invType: document.querySelector(\".invoice__type\"),\n    invNum: document.querySelector(\".invoice__number\"),\n    invPlace: document.querySelector(\".invoice__place\"),\n    invSellDate: document.querySelector(\".invoice__sell-date\"),\n    invDate: document.querySelector(\".invoice__place-date\"),\n    // invoice seller details\n    invSellerName: document.querySelector(\".invoice__seller-name\"),\n    invSellerStr: document.querySelector(\".invoice__seller-street\"),\n    invSellerCity: document.querySelector(\".invoice__seller-city\"),\n    invSellerPostCode: document.querySelector(\".seller__post-code\"),\n    invSellerNip: document.querySelector(\".invoice__seller-nip\"),\n    // invoice buyer details\n    invBuyerName: document.querySelector(\".invoice__buyer-name\"),\n    invBuyerStr: document.querySelector(\".invoice__buyer-street\"),\n    invBuyerCity: document.querySelector(\".invoice__buyer-city\"),\n    invBuyerPostCode: document.querySelector(\".buyer__post-code\"),\n    invBuyerNip: document.querySelector(\".invoice__buyer-nip\"),\n    // Invoice positions items table\n    invoicePositionsTable: document.querySelector(\".invoice__positions-place\"),\n    invoicePositionsTableSum: document.querySelector(\".invoice__positions-summary\"),\n    // invoice final details\n    invFinalToPay: document.querySelector(\".invoice__final-to-pay\"),\n    invFinalPayMethod: document.querySelector(\".invoice__final-payment-method\"),\n    invFinalPayTerm: document.querySelector(\".invoice__final-payment-term\"),\n    invFinalAccount: document.querySelector(\".invoice__final-payment__account\"),\n  };\n\n  // displaying draft item taxes in draft item constructor form\n  const displayDraftItemNotFilledInputs = function() {\n    debugger;\n    if (DOMElements.itemQuantInp.value !== \"\" && DOMElements.itemPriceInp.value !== \"\") {\n      DOMElements.itemNetValInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber * DOMElements.itemQuantInp.valueAsNumber\n      ).toFixed(2);\n      DOMElements.itemTaxValInp.value = (\n        DOMElements.itemQuantInp.valueAsNumber *\n        DOMElements.itemPriceInp.valueAsNumber *\n        parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n      DOMElements.itemTotValInp.value = (\n        DOMElements.itemNetValInp.valueAsNumber + DOMElements.itemTaxValInp.valueAsNumber\n      ).toFixed(2);\n      DOMElements.itemTotalPriceInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber +\n        DOMElements.itemPriceInp.valueAsNumber * parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n    }\n  };\n\n  // clearing draft item input fields\n  const clearDraftItemFieds = function() {\n    DOMElements.draftItemConstructor.reset();\n    DOMElements.itemNameInp.focus();\n  };\n\n  // add item to draft table\n  const addItemToDraftItemsList = function(id) {\n    const item = storageController.draftItemsData.items.find(item => item.id === id);\n    // create newtable row\n    const newRow = document.createElement(\"tr\");\n    newRow.classList.add(\"draft__position\");\n    newRow.id = `draft-item-${item.id}`;\n    newRow.dataset.identifier = `${item.id}`;\n    newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n    DOMElements.draftItemTable.appendChild(newRow);\n  };\n\n  // helper function for cleat innner HTML in given element\n  const clearInnerHtml = function(elem) {\n    elem.innerHTML = \"\";\n  };\n\n  // building draft items table from start\n  const rebuildDraftItemsTable = function() {\n    clearInnerHtml(DOMElements.draftItemTable);\n    // for each drafted item perform same action\n    storageController.draftItemsData.items.forEach(item => {\n      // create newtable row\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"draft__position\");\n      newRow.id = `draft-item-${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.draftItemTable.appendChild(newRow);\n    });\n  };\n\n  // building draft sum values in draft table\n  const buildDraftSumValues = function() {\n    // remove all content from summary draft table\n    clearInnerHtml(DOMElements.drawtSumTable);\n\n    const draftSumRow = document.createElement(\"tr\");\n    draftSumRow.classList.add(\"draft__summary-row\");\n    draftSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"draft__summary-legend\">Razem:</th>\n    <th class=\"draft__summary-net-value\">${storageController.draftItemsData.summaries.totalNetVal.toFixed(\n      2\n    )}</th>\n    <th class=\"\"></th>\n    <th class=\"draft__summary-vat-value\">${storageController.draftItemsData.summaries.totalTaxVal.toFixed(\n      2\n    )}</th>\n    <th class=\"draft__summary-total\">${storageController.draftItemsData.summaries.total.toFixed(\n      2\n    )}</th>`;\n    DOMElements.drawtSumTable.appendChild(draftSumRow);\n  };\n\n  const generateDraftSumRow = function(areTaxRateItems, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (areTaxRateItems) {\n      const taxRatefinalRow = document.createElement(\"tr\");\n      taxRatefinalRow.classList.add(\"draft__summary-row\");\n      taxRatefinalRow.innerHTML = `\n      <td colspan=\"5\" class=\"draft__summary-legend\">W tym:</td>\n      <td class=\"draft__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n      <td class=\"\">${checkingTaxRate}%</td>\n      <td class=\"draft__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n      <td class=\"draft__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.drawtSumTable.appendChild(taxRatefinalRow);\n    }\n  };\n\n  const generateInvoice = function() {\n    const invoiceObj = storageController.invoices.invoice.details;\n    // inserting details of the invoice\n    DOMElements.invType.textContent = `${invoiceObj.document.type}`;\n    DOMElements.invNum.textContent = `nr ${invoiceObj.document.number}`;\n    DOMElements.invPlace.textContent = `Miejsce wystawienia: ${invoiceObj.document.place}`;\n    DOMElements.invDate.textContent = `Data wystawienia: ${invoiceObj.document.date}`;\n    DOMElements.invSellDate.textContent = `Data sprzedaży: ${invoiceObj.document.sellDate}`;\n    DOMElements.invSellerName.textContent = `${invoiceObj.seller.name}`;\n    DOMElements.invSellerStr.textContent = `${invoiceObj.seller.street}`;\n    DOMElements.invSellerCity.textContent = `${invoiceObj.seller.city}`;\n    DOMElements.invSellerPostCode.textContent = `${invoiceObj.seller.postCode}`;\n    DOMElements.invSellerNip.textContent = `NIP: ${invoiceObj.seller.nip}`;\n    DOMElements.invBuyerName.textContent = `${invoiceObj.buyer.name}`;\n    DOMElements.invBuyerStr.textContent = `${invoiceObj.buyer.street}`;\n    DOMElements.invBuyerCity.textContent = `${invoiceObj.buyer.city}`;\n    DOMElements.invBuyerPostCode.textContent = `${invoiceObj.buyer.postCode}`;\n    DOMElements.invBuyerNip.textContent = `NIP: ${invoiceObj.buyer.nip}`;\n    DOMElements.invFinalToPay.textContent = `Do zapłaty: ${invoiceObj.payment.toPay.toFixed(\n      2\n    )} PLN`;\n    DOMElements.invFinalPayMethod.textContent = `Sposób płatności: ${invoiceObj.payment.method}`;\n    DOMElements.invFinalPayTerm.textContent = `Termin płatności: ${invoiceObj.payment.term}`;\n    // print account number if choosen method is different than cash\n    if (invoiceObj.payment.method !== \"gotówka\") {\n      DOMElements.invFinalAccount.textContent = `Konto: ${invoiceObj.payment.account}`;\n    } else {\n      DOMElements.invFinalAccount.textContent = ``;\n    }\n  };\n\n  const generateInvoicePositions = function(positionsArray) {\n    clearInnerHtml(DOMElements.invoicePositionsTable);\n    clearInnerHtml(DOMElements.invoicePositionsTableSum);\n\n    positionsArray.forEach(item => {\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"invoice__position\");\n      newRow.id = `invoice-item${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n          <td class=\"invoice__item-lp\">${positionsArray.indexOf(item) + 1}</td>\n          <td class=\"invoice__item-name\">${item.name}</td>\n          <td class=\"invoice__item-unit\">${item.unit}</td>\n          <td class=\"invoice__item-currency\">PLN</td>\n          <td class=\"invoice__item-quantity\">${item.quantity.toFixed(2)}</td>\n          <td class=\"invoice__item-price\">${item.netPrice.toFixed(2)}</td>\n          <td class=\"invoice__item-net-value\">${item.netValue.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-rate\">${item.taxRate}%</td>\n          <td class=\"invoice__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n          <td class=\"invoice__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(newRow);\n    });\n\n    // invoice items summaries from draft items summaries section\n    const totalNetVal = storageController.draftItemsData.summaries.totalNetVal;\n    const totalTaxVal = storageController.draftItemsData.summaries.totalTaxVal;\n    const total = storageController.draftItemsData.summaries.total;\n\n    const invoiceSumRow = document.createElement(\"tr\");\n    invoiceSumRow.classList.add(\"invoice__summary-row\");\n    invoiceSumRow.innerHTML = `\n    <th colspan=\"6\" class=\"invoice__summary-legend\">Razem:</th>\n    <th class=\"invoice__summary-net-value\">${totalNetVal.toFixed(2)}</th>\n    <th class=\"\"></th>\n    <th class=\"invoice__summary-vat-value\">${totalTaxVal.toFixed(2)}</th>\n    <th class=\"invoice__summary-total\">${total.toFixed(2)}</th>`;\n    DOMElements.invoicePositionsTable.appendChild(invoiceSumRow);\n\n    // generate boolean values for check it there are some products with specific tax rates\n    const isTax23 = positionsArray.some(item => item.taxRate === 23);\n    const isTax8 = positionsArray.some(item => item.taxRate === 8);\n    const isTax5 = positionsArray.some(item => item.taxRate === 5);\n    const isTax3 = positionsArray.some(item => item.taxRate === 3);\n    const isTax00 = positionsArray.some(item => item.taxRate === 0);\n\n    //  generate summaries by vat rate\n    generateInvoiceSumRow(isTax23, 23);\n    generateInvoiceSumRow(isTax8, 8);\n    generateInvoiceSumRow(isTax5, 5);\n    generateInvoiceSumRow(isTax3, 3);\n    generateInvoiceSumRow(isTax00, 0);\n  };\n\n  // generate invoice positions sum row for each existing in draft items tavle tax rate determined by first argument the boolean value\n  const generateInvoiceSumRow = function(isTaxRate, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (isTaxRate) {\n      const vatRatefinalrow = document.createElement(\"tr\");\n      vatRatefinalrow.classList.add(\"invoice__summary-row\");\n      vatRatefinalrow.innerHTML = `\n        <td colspan=\"6\" class=\"invoice__summary-legend\">W tym:</td>\n        <td class=\"invoice__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n        <td class=\"\">${checkingTaxRate}%</td>\n        <td class=\"invoice__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n        <td class=\"invoice__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(vatRatefinalrow);\n    }\n  };\n\n  // showing modal complete\n  const showCompleteInfo = function() {\n    const competionModal = document.querySelector(\".not-completed-form-modal\");\n    competionModal.style.display = \"block\";\n    setTimeout(() => competionModal.classList.add(\"completion-modal-active\"), 10);\n\n    setTimeout(hideCompletionModal, 3000);\n\n    function hideCompletionModal() {\n      competionModal.classList.remove(\"completion-modal-active\");\n      setTimeout(() => (competionModal.style.display = \"none\"), 250);\n    }\n  };\n\n  const activatePrintInvoice = function() {\n    DOMElements.printBtn.removeAttribute(\"disabled\");\n  };\n\n  const closeStorageModal = function() {\n    DOMElements.storageListModal.classList.remove(\"modal-active\");\n    setTimeout(() => {\n      DOMElements.storageListModal.style.display = \"none\";\n    }, 250);\n    hideBackdropModal();\n    DOMElements.storageList.innerHTML = \"\";\n  };\n\n  const openStorageModal = function() {\n    displayBackdropModal();\n    DOMElements.storageListModal.style.display = \"block\";\n    setTimeout(() => {\n      DOMElements.storageListModal.classList.add(\"modal-active\");\n    }, 10);\n  };\n\n  const hideBackdropModal = function() {\n    DOMElements.storageListBackdrop.classList.remove(\"backdrop-active\");\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.style = \"display: none\";\n    }, 250);\n  };\n\n  const displayBackdropModal = function() {\n    DOMElements.storageListBackdrop.style = \"display: block\";\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.classList.add(\"backdrop-active\");\n    }, 10);\n  };\n\n  const fillInputForm = function(e) {\n    if (e.target.classList.contains(\"btn--load-item\")) {\n      console.log(e.target.dataset.itemName);\n      const items = JSON.parse(localStorage.getItem(\"items\"));\n      const item = items[e.target.dataset.itemName];\n      DOMElements.itemNameInp.value = item.name;\n      DOMElements.itemUnitInp.value = item.unit;\n      DOMElements.itemPriceInp.value = item.netPrice;\n      DOMElements.itemTaxRateInp.value = item.taxRate;\n      closeStorageModal();\n      DOMElements.itemQuantInp.focus();\n    }\n    if (e.target.classList.contains(\"btn--load-seller\")) {\n      const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n      const seller = sellers[e.target.dataset.sellerName];\n      DOMElements.sellerNameInp.value = seller.name;\n      DOMElements.sellerStreetInp.value = seller.street;\n      DOMElements.sellerCityInp.value = seller.city;\n      DOMElements.sellerPostCodeInp.value = seller.postCode;\n      DOMElements.sellerNipInp.value = seller.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-buyer\")) {\n      const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n      const buyer = buyers[e.target.dataset.buyerName];\n      DOMElements.buyerNameInp.value = buyer.name;\n      DOMElements.buyerStreetInp.value = buyer.street;\n      DOMElements.buyerCityInp.value = buyer.city;\n      DOMElements.buyerPostCodeInp.value = buyer.postCode;\n      DOMElements.buyerNipInp.value = buyer.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-account\")) {\n      const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n      const account = accounts[e.target.dataset.accountNumber];\n      DOMElements.payAccountInp.value = account.number;\n      closeStorageModal();\n    }\n  };\n\n  const buildStorageSellersList = function() {\n    const localStorageBuyers = localStorage.getItem(\"sellers\")\n      ? JSON.parse(localStorage.getItem(\"sellers\"))\n      : {};\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const sellers = Object.entries(localStorageBuyers);\n      sellers.forEach(seller => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-seller\");\n        loadButton.dataset.sellerName = seller[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-seller\");\n        deleteButton.dataset.sellerName = seller[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__seller-name\");\n        nameSpan.textContent = seller[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__seller-street\");\n        streetSpan.textContent = seller[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__seller-city\");\n        citySpan.textContent = seller[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__seller-nip\");\n        nipSpan.textContent = seller[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych sprzedawców zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageBuyersList = function() {\n    const localStorageBuyers = localStorage.getItem(\"buyers\")\n      ? JSON.parse(localStorage.getItem(\"buyers\"))\n      : {};\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const buyers = Object.entries(localStorageBuyers);\n      buyers.forEach(buyer => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-buyer\");\n        loadButton.dataset.buyerName = buyer[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-buyer\");\n        deleteButton.dataset.buyerName = buyer[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__buyer-name\");\n        nameSpan.textContent = buyer[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__buyer-street\");\n        streetSpan.textContent = buyer[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__buyer-city\");\n        citySpan.textContent = buyer[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__buyer-nip\");\n        nipSpan.textContent = buyer[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych kontrahentów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageSellerAccountsList = function(accounts) {\n    const localStorageAccounts = localStorage.getItem(\"accounts\")\n      ? JSON.parse(localStorage.getItem(\"accounts\"))\n      : {};\n    if (Object.keys(localStorageAccounts).length > 0) {\n      const accounts = Object.entries(localStorageAccounts);\n      accounts.forEach(account => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-account\");\n        loadButton.dataset.accountNumber = account[1].number;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-account\");\n        deleteButton.dataset.accountNumber = account[1].number;\n        deleteButton.textContent = \"Usuń\";\n\n        const accountNumberSpan = document.createElement(\"span\");\n        accountNumberSpan.classList.add(\"storage-list__account-number\");\n        accountNumberSpan.textContent = \"Numer Konta: \" + account[1].number;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(accountNumberSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych numerów kont zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageItemsList = function() {\n    const localStorageItems = localStorage.getItem(\"items\")\n      ? JSON.parse(localStorage.getItem(\"items\"))\n      : {};\n    if (Object.keys(localStorageItems).length > 0) {\n      const items = Object.entries(localStorageItems);\n      items.forEach(item => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-item\");\n        loadButton.dataset.itemName = item[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-item\");\n        deleteButton.dataset.itemName = item[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__item-name\");\n        nameSpan.textContent = item[1].name;\n\n        const priceSpan = document.createElement(\"span\");\n        priceSpan.classList.add(\"storage-list__item-price\");\n        priceSpan.textContent = item[1].netPrice + \"PLN/\" + item[1].unit;\n\n        const taxSpan = document.createElement(\"span\");\n        taxSpan.classList.add(\"storage-list__item-tax\");\n        taxSpan.textContent = item[1].taxRate + \"%\";\n\n        const dateSpan = document.createElement(\"span\");\n        dateSpan.classList.add(\"storage-list__item-date\");\n        dateSpan.textContent = \"(zapisano: \" + item[1].date + \")\";\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(priceSpan);\n        li.appendChild(taxSpan);\n        li.appendChild(dateSpan);\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych produktów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const noLocalStorageDataInfo = function(message) {\n    const noDataInfo = document.createElement(\"h3\");\n    noDataInfo.classList.add(\"storage-list__no-data-info\");\n    noDataInfo.textContent = message;\n\n    DOMElements.storageList.appendChild(noDataInfo);\n  };\n\n  const hideListItem = function(element) {\n    element.addEventListener(\"transitionend\", e => {\n      console.log(e.propertyName);\n      if (e.propertyName === \"opacity\") {\n        element.style.display = \"none\";\n      }\n    });\n\n    element.classList.add(\"fade-up\");\n  };\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    DOMElements,\n    displayDraftItemNotFilledInputs,\n    clearDraftItemFieds,\n    rebuildDraftItemsTable,\n    addItemToDraftItemsList,\n    generateDraftSumRow,\n    buildDraftSumValues,\n    generateInvoice,\n    generateInvoicePositions,\n    showCompleteInfo,\n    activatePrintInvoice,\n    closeStorageModal,\n    openStorageModal,\n    hideBackdropModal,\n    displayBackdropModal,\n    fillInputForm,\n    buildStorageItemsList,\n    buildStorageSellerAccountsList,\n    buildStorageBuyersList,\n    buildStorageSellersList,\n    noLocalStorageDataInfo,\n    hideListItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  Storage Controller \n  ----------------------------------------------------*/\n\nconst storageController = (function() {\n  const draftItemsData = {\n    items: [],\n    summaries: {\n      total: 0,\n      totalNetVal: 0,\n      totalTaxVal: 0,\n      taxRates: {\n        tax23: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax8: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax5: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax3: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax0: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n      },\n    },\n  };\n\n  const invoices = {\n    invoice: {},\n  };\n\n  const DOMElements = uiController.DOMElements;\n\n  const createInvoiceObj = function() {\n    const invoice = {\n      details: {\n        document: {\n          type: DOMElements.docTypeInp.value,\n          number: DOMElements.docNumInp.value,\n          place: DOMElements.docPlaceInp.value,\n          date: DOMElements.docDateInp.value,\n          sellDate: DOMElements.docSellDateInp.value,\n        },\n        seller: {\n          name: DOMElements.sellerNameInp.value,\n          street: DOMElements.sellerStreetInp.value,\n          city: DOMElements.sellerCityInp.value,\n          postCode: DOMElements.sellerPostCodeInp.value,\n          nip: DOMElements.sellerNipInp.value,\n        },\n        buyer: {\n          name: DOMElements.buyerNameInp.value,\n          street: DOMElements.buyerStreetInp.value,\n          city: DOMElements.buyerCityInp.value,\n          postCode: DOMElements.buyerPostCodeInp.value,\n          nip: DOMElements.buyerNipInp.value,\n        },\n        payment: {\n          toPay: draftItemsData.summaries.total,\n          method: DOMElements.payMethodInp.value,\n          term: DOMElements.payTermInp.value,\n          account: DOMElements.payAccountInp.value,\n        },\n      },\n      positions: draftItemsData.items,\n    };\n    invoices.invoice = invoice;\n  };\n\n  const deleteDraftItem = function(delID) {\n    draftItemsData.items = draftItemsData.items.filter(item => item.id != delID);\n  };\n\n  const createNewItem = function(id) {\n    const newItem = {\n      // asigning values to newitem\n      id: id,\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      quantity: DOMElements.itemQuantInp.valueAsNumber,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      get netValue() {\n        return this.netPrice * this.quantity;\n      },\n      get taxValue() {\n        return this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n      get total() {\n        return this.netPrice * this.quantity + this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n    };\n    draftItemsData.items.push(newItem);\n  };\n\n  const calculateDraftItemsTotals = function() {\n    const draftItemsTotal = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.total;\n    }, 0);\n    const draftItemsTotalNetValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.netValue;\n    }, 0);\n    const draftItemsTotalTaxValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.taxValue;\n    }, 0);\n\n    draftItemsData.summaries.total = draftItemsTotal;\n    draftItemsData.summaries.totalNetVal = draftItemsTotalNetValue;\n    draftItemsData.summaries.totalTaxVal = draftItemsTotalTaxValue;\n  };\n\n  const claculateDraftTaxRatesValues = function(areTaxRateItems, checkingTaxRate) {\n    if (areTaxRateItems) {\n      const taxRateItemsArr = draftItemsData.items.filter(item => item.taxRate === checkingTaxRate);\n      const taxRateNetValue = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.netValue;\n      }, 0);\n      const taxRateTax = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.taxValue;\n      }, 0);\n      const taxRateTotal = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.total;\n      }, 0);\n\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxValue = taxRateTax;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxTotal = taxRateTotal;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].netValue = taxRateNetValue;\n    }\n  };\n\n  // creating vat rates summaries in storage controller and building summaries rows in draft items table\n  const createDraftVatRatesValues = function() {\n    // boolean values for check if there are some products with specific tax rates\n    const isTax00 = draftItemsData.items.some(item => item.taxRate === 0);\n    const isTax3 = draftItemsData.items.some(item => item.taxRate === 3);\n    const isTax5 = draftItemsData.items.some(item => item.taxRate === 5);\n    const isTax8 = draftItemsData.items.some(item => item.taxRate === 8);\n    const isTax23 = draftItemsData.items.some(item => item.taxRate === 23);\n\n    // calculate summary valuest for each vat rate\n    claculateDraftTaxRatesValues(isTax00, 0);\n    claculateDraftTaxRatesValues(isTax3, 3);\n    claculateDraftTaxRatesValues(isTax5, 5);\n    claculateDraftTaxRatesValues(isTax8, 8);\n    claculateDraftTaxRatesValues(isTax23, 23);\n\n    // create summary row for each existing vat rate\n    uiController.generateDraftSumRow(isTax00, 0);\n    uiController.generateDraftSumRow(isTax3, 3);\n    uiController.generateDraftSumRow(isTax5, 5);\n    uiController.generateDraftSumRow(isTax8, 8);\n    uiController.generateDraftSumRow(isTax23, 23);\n  };\n\n  const saveSellerToLocal = function(seller) {\n    let sellers = {};\n    if (localStorage.getItem(\"sellers\")) {\n      sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    }\n\n    sellers[seller.name] = seller;\n\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const saveBuyerToLocal = function(buyer) {\n    let buyers = {};\n    if (localStorage.getItem(\"buyers\")) {\n      buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    }\n\n    buyers[buyer.name] = buyer;\n\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const saveItemToLocal = function(item) {\n    let items = {};\n    if (localStorage.getItem(\"items\")) {\n      items = JSON.parse(localStorage.getItem(\"items\"));\n    }\n\n    items[item.name] = item;\n\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n  const saveAccountToLocal = function(account) {\n    let accounts = {};\n    if (localStorage.getItem(\"accounts\")) {\n      accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    }\n\n    accounts[account.number] = account;\n\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteSeller = function(sellerName) {\n    const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    delete sellers[sellerName];\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const deleteBuyer = function(buyerName) {\n    const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    delete buyers[buyerName];\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const deleteAccount = function(account) {\n    const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    delete accounts[account];\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteItem = function(name) {\n    const items = JSON.parse(localStorage.getItem(\"items\"));\n    console.log(items[name]);\n    delete items[name];\n    console.log(items);\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    invoices,\n    draftItemsData,\n    createNewItem,\n    deleteDraftItem,\n    createDraftVatRatesValues,\n    createInvoiceObj,\n    calculateDraftItemsTotals,\n    saveSellerToLocal,\n    saveBuyerToLocal,\n    saveItemToLocal,\n    saveAccountToLocal,\n    deleteSeller,\n    deleteBuyer,\n    deleteAccount,\n    deleteItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  App Controller\n----------------------------------------------------*/\n\nconst appController = (function(StorageCtrl, UiCtrl) {\n  const DOMElements = UiCtrl.DOMElements;\n\n  const loadEventListeners = function() {\n    // generate invoice event listener\n    DOMElements.genBtn.addEventListener(\"click\", generateInvoice);\n    // event listeners for draft section\n    DOMElements.addBtn.addEventListener(\"click\", addItem);\n    DOMElements.itemQuantInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemPriceInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemNetValInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemTaxRateInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.draftItemTable.addEventListener(\"click\", deleteDraftItem);\n\n    // event listeners for verification for inputs section\n    DOMElements.dataInpuForm.addEventListener(\"keyup\", verifyInputField);\n    DOMElements.dataInpuForm.addEventListener(\"change\", verifyInputField);\n    DOMElements.draftItemConstructor.addEventListener(\"keyup\", verifyDraftItemInput);\n\n    DOMElements.payMethodInp.addEventListener(\"change\", isBankAccountCheck);\n\n    // local storage save and load listeners\n    DOMElements.sellerSaveBtn.addEventListener(\"click\", saveSeller);\n    DOMElements.sellerLoadBtn.addEventListener(\"click\", loadSeller);\n    DOMElements.buyerSaveBtn.addEventListener(\"click\", saveBuyer);\n    DOMElements.buyerLoadTrigger.addEventListener(\"click\", retrieveBuyers);\n    DOMElements.accountSaveBtn.addEventListener(\"click\", saveAccount);\n    DOMElements.accountLoadBtn.addEventListener(\"click\", retrieveAccounts);\n    DOMElements.itemSaveBtn.addEventListener(\"click\", saveItem);\n    DOMElements.itemLoadTrigger.addEventListener(\"click\", retrieveItems);\n    DOMElements.storageListModalClose.addEventListener(\"click\", UiCtrl.closeStorageModal);\n    DOMElements.storageList.addEventListener(\"click\", UiCtrl.fillInputForm);\n    DOMElements.storageList.addEventListener(\"click\", deleteLocalStorageEntry);\n  };\n\n  // initialization function\n  const init = function() {\n    loadEventListeners();\n  };\n\n  const isBankAccountCheck = function(e) {\n    if (e.target.value === \"gotówka\" || e.target.value === \"czek\") {\n      DOMElements.payAccountInp.parentElement.style.display = \"none\";\n      DOMElements.payAccountInp.setAttribute(\"disabled\", true);\n      DOMElements.payAccountInp.value = \"\";\n    } else {\n      DOMElements.payAccountInp.parentElement.style.display = \"flex\";\n      DOMElements.payAccountInp.removeAttribute(\"disabled\");\n    }\n  };\n\n  const verifyInputField = function(e) {\n    if (e.target === DOMElements.sellerPostCodeInp || e.target === DOMElements.buyerPostCodeInp) {\n      validationFunctions.validatePostCode(e);\n    } else if (e.target === DOMElements.sellerNipInp || e.target === DOMElements.buyerNipInp) {\n      validationFunctions.validateNip(e);\n    } else if (e.target === DOMElements.payAccountInp) {\n      if (\n        DOMElements.payMethodInp.value !== \"gotówka\" ||\n        DOMElements.payMethodInp.value !== \"pobranie\"\n      ) {\n        validationFunctions.validateAccount(e);\n      }\n    } else {\n      validationFunctions.validateFillInFormInput(e);\n    }\n  };\n\n  const verifyDraftItemInput = function(e) {\n    validationFunctions.validateDraftItemInputs(e);\n  };\n\n  const verifyCompletedForm = function() {\n    let inputs = Array.from(DOMElements.dataInpuForm.getElementsByClassName(\"input\"));\n\n    // If payment method is 'gotówka' cuts this field from inputs array to not validate ir\n    if (DOMElements.payMethodInp.value === \"gotówka\") {\n      inputs = inputs.filter(item => item.classList.contains(\"payment__account\") === false);\n    }\n    if (inputs.some(input => input.value === \"\" || input.value === \" \")) {\n      inputs\n        .filter(input => input.value === \"\" || input.value === \" \")\n        .forEach(input => input.classList.add(\"invalid\"));\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  // validation functions object\n  const validationFunctions = {\n    validatePostCode: function(e) {\n      const reg = /^\\d\\d-\\d\\d\\d$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateNip: function(e) {\n      const reg = /^\\d{3}[- ]?\\d{3}[- ]?\\d\\d[- ]?\\d\\d\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateAccount: function(e) {\n      const reg = /^([A-Za-z]{2})?[ ]?\\d{2}([ ]?\\d{4}){6}\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateFillInFormInput: function(e) {\n      const reg = /[A-Za-z\\d]+/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateDraftItemInputs: function(e) {\n      if (\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemQuantInp.value !== \"\" &&\n        DOMElements.itemPriceInp.value !== \"\"\n      ) {\n        DOMElements.addBtn.disabled = false;\n      } else {\n        DOMElements.addBtn.disabled = true;\n      }\n    },\n  };\n\n  const addItem = function() {\n    const newItemId = v4();\n    storageController.createNewItem(newItemId);\n    storageController.calculateDraftItemsTotals();\n    UiCtrl.clearDraftItemFieds();\n    UiCtrl.addItemToDraftItemsList(newItemId);\n    StorageCtrl.createDraftVatRatesValues();\n    UiCtrl.buildDraftSumValues();\n    storageController.createDraftVatRatesValues();\n    DOMElements.addBtn.disabled = true;\n  };\n\n  const calculateDraftItem = function() {\n    // calculate and display not filled draft input values and placing it's values as input value\n    UiCtrl.displayDraftItemNotFilledInputs();\n  };\n\n  const deleteDraftItem = function(e) {\n    if (e.target.classList.contains(\"btn--item-del\")) {\n      // determine id of target item\n      const delID = e.target.parentElement.parentElement.dataset.identifier;\n      // delete item from storage array by given id\n      StorageCtrl.deleteDraftItem(delID);\n      // recalculate invoice totals\n      StorageCtrl.calculateDraftItemsTotals();\n      // rebuild draft items table\n      UiCtrl.rebuildDraftItemsTable();\n      // check existing on draft items vat rates\n      StorageCtrl.createDraftVatRatesValues();\n      // rebuild vat summareis table by vat rate for draft items\n      UiCtrl.buildDraftSumValues();\n    }\n  };\n\n  // function for generate new invoice object\n  const generateInvoice = function() {\n    const verified = verifyCompletedForm();\n    if (verified) {\n      // create invoice object in storage\n      StorageCtrl.createInvoiceObj();\n      // generating invoice document\n      UiCtrl.generateInvoice();\n      // generate invoice positions from draft items\n      UiCtrl.generateInvoicePositions(StorageCtrl.invoices.invoice.positions);\n      // Activate print invoice button\n      UiCtrl.activatePrintInvoice();\n    } else {\n      uiController.showCompleteInfo();\n    }\n  };\n\n  const saveSeller = function(e) {\n    e.preventDefault();\n\n    const seller = {\n      name: DOMElements.sellerNameInp.value,\n      street: DOMElements.sellerStreetInp.value,\n      city: DOMElements.sellerCityInp.value,\n      postCode: DOMElements.sellerPostCodeInp.value,\n      nip: DOMElements.sellerNipInp.value,\n    };\n    StorageCtrl.saveSellerToLocal(seller);\n  };\n\n  const loadSeller = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellersList();\n  };\n\n  const saveBuyer = function(e) {\n    e.preventDefault();\n\n    const buyer = {\n      name: DOMElements.buyerNameInp.value,\n      street: DOMElements.buyerStreetInp.value,\n      city: DOMElements.buyerCityInp.value,\n      postCode: DOMElements.buyerPostCodeInp.value,\n      nip: DOMElements.buyerNipInp.value,\n    };\n    StorageCtrl.saveBuyerToLocal(buyer);\n  };\n\n  const retrieveBuyers = function(e) {\n    e.preventDefault();\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageBuyersList();\n  };\n\n  const saveAccount = function(e) {\n    e.preventDefault();\n\n    const account = {\n      number: DOMElements.payAccountInp.value,\n    };\n    StorageCtrl.saveAccountToLocal(account);\n  };\n\n  const retrieveAccounts = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellerAccountsList();\n  };\n\n  const saveItem = function(e) {\n    e.preventDefault();\n\n    const now = new Date();\n    const createdDate =\n      now.getUTCFullYear() + \"/\" + (now.getUTCMonth() + 1) + \"/\" + now.getUTCDate();\n\n    const item = {\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      date: createdDate,\n    };\n    StorageCtrl.saveItemToLocal(item);\n  };\n\n  const retrieveItems = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageItemsList();\n  };\n\n  const deleteLocalStorageEntry = function(e) {\n    e.preventDefault();\n    const targetClasses = e.target.classList;\n    if (targetClasses.contains(\"btn--delete-seller\")) {\n      StorageCtrl.deleteSeller(e.target.dataset.sellerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-buyer\")) {\n      StorageCtrl.deleteBuyer(e.target.dataset.buyerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-account\")) {\n      StorageCtrl.deleteAccount(e.target.dataset.accountNumber);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-item\")) {\n      console.log(e.target.dataset.itemName);\n      StorageCtrl.deleteItem(e.target.dataset.itemName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    init,\n  };\n})(storageController, uiController);\n\nappController.init();\n\n// print js script for printing - dependiency - jquery\n$(\".btn--print-inv\").on(\"click\", function() {\n  $(\".invoice\").printThis();\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}