{"version":3,"sources":["node_modules/uuid/lib/rng-browser.js","node_modules/uuid/lib/bytesToUuid.js","node_modules/uuid/v1.js","node_modules/uuid/v4.js","node_modules/uuid/index.js","js/main.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../usr/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["uiController","DOMElements","dataInpuForm","document","querySelector","docTypeInp","docNumInp","docPlaceInp","docDateInp","docSellDateInp","sellerNameInp","sellerStreetInp","sellerCityInp","sellerPostCodeInp","sellerNipInp","sellerSaveBtn","sellerLoadBtn","buyerNameInp","buyerStreetInp","buyerCityInp","buyerPostCodeInp","buyerNipInp","buyerSaveBtn","buyerLoadTrigger","payMethodInp","payTermInp","payAccountInp","accountSaveBtn","accountLoadBtn","itemNameInp","itemUnitInp","itemQuantInp","itemPriceInp","itemNetValInp","itemTaxRateInp","itemTaxValInp","itemTotValInp","itemSaveBtn","itemLoadTrigger","storageListModalClose","addBtn","draftItemConstructor","draftItemTable","drawtSumTable","itemDelBtn","querySelectorAll","storageList","storageListModal","storageListBackdrop","genBtn","printBtn","invoice","invType","invNum","invPlace","invSellDate","invDate","invSellerName","invSellerStr","invSellerCity","invSellerPostCode","invSellerNip","invBuyerName","invBuyerStr","invBuyerCity","invBuyerPostCode","invBuyerNip","invoicePositionsTable","invoicePositionsTableSum","invFinalToPay","invFinalPayMethod","invFinalPayTerm","invFinalAccount","displayDraftItemNotFilledInputs","value","valueAsNumber","toFixed","parseFloat","clearDraftItemFieds","reset","focus","addItemToDraftItemsList","id","item","storageController","draftItemsData","items","find","newRow","createElement","classList","add","dataset","identifier","innerHTML","name","unit","quantity","netPrice","netValue","taxRate","taxValue","total","appendChild","clearInnerHtml","elem","rebuildDraftItemsTable","forEach","buildDraftSumValues","draftSumRow","summaries","totalNetVal","totalTaxVal","generateDraftSumRow","areTaxRateItems","checkingTaxRate","checkedTaxRate","taxRates","taxRatefinalRow","taxTotal","generateInvoice","invoiceObj","invoices","details","textContent","type","number","place","date","sellDate","seller","street","city","postCode","nip","buyer","payment","toPay","method","term","account","generateInvoicePositions","positionsArray","indexOf","invoiceSumRow","isTax23","some","isTax8","isTax5","isTax3","isTax00","generateInvoiceSumRow","isTaxRate","vatRatefinalrow","showCompleteInfo","competionModal","style","display","setTimeout","hideCompletionModal","remove","activatePrintInvoice","removeAttribute","closeStorageModal","hideBackdropModal","openStorageModal","displayBackdropModal","fillInputForm","e","target","contains","console","log","itemName","JSON","parse","localStorage","getItem","sellers","sellerName","buyers","buyerName","accounts","accountNumber","buildStorageSellersList","localStorageBuyers","Object","keys","length","entries","li","loadButton","deleteButton","nameSpan","streetSpan","citySpan","nipSpan","noLocalStorageDataInfo","buildStorageBuyersList","buildStorageSellerAccountsList","localStorageAccounts","accountNumberSpan","buildStorageItemsList","localStorageItems","priceSpan","taxSpan","dateSpan","message","noDataInfo","hideListItem","element","tax23","tax8","tax5","tax3","tax0","createInvoiceObj","positions","deleteDraftItem","delID","filter","createNewItem","newItem","push","calculateDraftItemsTotals","draftItemsTotal","reduce","acc","draftItemsTotalNetValue","draftItemsTotalTaxValue","claculateDraftTaxRatesValues","taxRateItemsArr","taxRateNetValue","taxRateTax","taxRateTotal","createDraftVatRatesValues","saveSellerToLocal","setItem","stringify","saveBuyerToLocal","saveItemToLocal","saveAccountToLocal","deleteSeller","deleteBuyer","deleteAccount","deleteItem","appController","StorageCtrl","UiCtrl","loadEventListeners","addEventListener","addItem","calculateDraftItem","verifyInputField","verifyDraftItemInput","isBankAccountCheck","saveSeller","loadSeller","saveBuyer","retrieveBuyers","saveAccount","retrieveAccounts","saveItem","retrieveItems","deleteLocalStorageEntry","init","parentElement","setAttribute","validationFunctions","validatePostCode","validateNip","validateAccount","validateFillInFormInput","validateDraftItemInputs","verifyCompletedForm","inputs","Array","from","getElementsByClassName","input","reg","test","disabled","newItemId","verified","preventDefault","now","Date","createdDate","getUTCFullYear","getUTCMonth","getUTCDate","targetClasses","$","on","printThis","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","i","module"],"mappings":"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","file":"main.b27368ef.map","sourceRoot":"..","sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","import { v4 } from \"uuid\";\nimport \"../sass/main.scss\";\n\nconst uiController = (function() {\n  // defining DOM elements\n  const DOMElements = {\n    // -------------------------------------------------------\n    // Invoice details input elements\n    // -------------------------------------------------------\n    dataInpuForm: document.querySelector(\".data-form\"),\n\n    // document data inputs\n    docTypeInp: document.querySelector(\".data__doc-type\"),\n    docNumInp: document.querySelector(\".data__doc-number\"),\n    docPlaceInp: document.querySelector(\".data__doc-place\"),\n    docDateInp: document.querySelector(\".data__doc-date\"),\n    docSellDateInp: document.querySelector(\".data__doc-sell-date\"),\n\n    // seller data inputs\n    sellerNameInp: document.querySelector(\".data__seller-name\"),\n    sellerStreetInp: document.querySelector(\".data__seller-street\"),\n    sellerCityInp: document.querySelector(\".data__seller-city\"),\n    sellerPostCodeInp: document.querySelector(\".data__seller-post-code\"),\n    sellerNipInp: document.querySelector(\".data__seller-nip\"),\n    sellerSaveBtn: document.querySelector(\".btn--seller-save\"),\n    sellerLoadBtn: document.querySelector(\".btn--seller-load\"),\n\n    // buyer data inputs\n    buyerNameInp: document.querySelector(\".data__buyer-name\"),\n    buyerStreetInp: document.querySelector(\".data__buyer-street\"),\n    buyerCityInp: document.querySelector(\".data__buyer-city\"),\n    buyerPostCodeInp: document.querySelector(\".data__buyer-post-code\"),\n    buyerNipInp: document.querySelector(\".data__buyer-nip\"),\n    buyerSaveBtn: document.querySelector(\".btn--buyer-save\"),\n    buyerLoadTrigger: document.querySelector(\".btn--buyer-load\"),\n\n    // payment terms inputs\n    payMethodInp: document.querySelector(\".payment__method\"),\n    payTermInp: document.querySelector(\".payment__term\"),\n    payAccountInp: document.querySelector(\".payment__account\"),\n    accountSaveBtn: document.querySelector(\".btn--account-save\"),\n    accountLoadBtn: document.querySelector(\".btn--account-load\"),\n\n    // draft positions inputs\n    itemNameInp: document.querySelector(\".draft-item__name\"),\n    itemUnitInp: document.querySelector(\".draft-item__unit\"),\n    itemQuantInp: document.querySelector(\".draft-item__quantity\"),\n    itemPriceInp: document.querySelector(\".draft-item__price\"),\n    itemNetValInp: document.querySelector(\".draft-item__net-value\"),\n    itemTaxRateInp: document.querySelector(\".draft-item__tax-rate\"),\n    itemTaxValInp: document.querySelector(\".draft-item__tax-value\"),\n    itemTotValInp: document.querySelector(\".draft-item__total-value\"),\n    itemSaveBtn: document.querySelector(\".btn--item-save\"),\n    itemLoadTrigger: document.querySelector(\".btn--item-load\"),\n    storageListModalClose: document.querySelector(\".btn--close-storage-list\"),\n\n    // draft add button\n    addBtn: document.querySelector(\".btn--add-item\"),\n\n    // draft itens table\n    draftItemConstructor: document.querySelector(\".draft-item__constructor\"),\n    draftItemTable: document.querySelector(\".draft-added-items\"),\n    drawtSumTable: document.querySelector(\".draft__summary\"),\n    itemDelBtn: document.querySelectorAll(\".btn--item-del\"),\n\n    // storage list modal\n    storageList: document.querySelector(\".storage-list\"),\n    storageListModal: document.querySelector(\".storage-list__modal\"),\n    storageListBackdrop: document.querySelector(\".storage-list__backdrop\"),\n\n    // button generate invoice\n    genBtn: document.querySelector(\".btn--gen-inv\"),\n    printBtn: document.querySelector(\".btn--print-inv\"),\n\n    // -------------------------------------------------------\n    //output invoice elements\n    // -------------------------------------------------------\n    invoice: document.querySelector(\".invoice\"),\n    // invoice heading\n    invType: document.querySelector(\".invoice__type\"),\n    invNum: document.querySelector(\".invoice__number\"),\n    invPlace: document.querySelector(\".invoice__place\"),\n    invSellDate: document.querySelector(\".invoice__sell-date\"),\n    invDate: document.querySelector(\".invoice__place-date\"),\n    // invoice seller details\n    invSellerName: document.querySelector(\".invoice__seller-name\"),\n    invSellerStr: document.querySelector(\".invoice__seller-street\"),\n    invSellerCity: document.querySelector(\".invoice__seller-city\"),\n    invSellerPostCode: document.querySelector(\".seller__post-code\"),\n    invSellerNip: document.querySelector(\".invoice__seller-nip\"),\n    // invoice buyer details\n    invBuyerName: document.querySelector(\".invoice__buyer-name\"),\n    invBuyerStr: document.querySelector(\".invoice__buyer-street\"),\n    invBuyerCity: document.querySelector(\".invoice__buyer-city\"),\n    invBuyerPostCode: document.querySelector(\".buyer__post-code\"),\n    invBuyerNip: document.querySelector(\".invoice__buyer-nip\"),\n    // Invoice positions items table\n    invoicePositionsTable: document.querySelector(\".invoice__positions-place\"),\n    invoicePositionsTableSum: document.querySelector(\".invoice__positions-summary\"),\n    // invoice final details\n    invFinalToPay: document.querySelector(\".invoice__final-to-pay\"),\n    invFinalPayMethod: document.querySelector(\".invoice__final-payment-method\"),\n    invFinalPayTerm: document.querySelector(\".invoice__final-payment-term\"),\n    invFinalAccount: document.querySelector(\".invoice__final-payment__account\"),\n  };\n\n  // displaying draft item taxes in draft item constructor form\n  const displayDraftItemNotFilledInputs = function() {\n    // if there is fullfilled draft item quantity and net price can calculate:\n    if (DOMElements.itemQuantInp.value !== \"\" && DOMElements.itemPriceInp.value !== \"\") {\n      // net value ptoduct price * quantity\n      DOMElements.itemNetValInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber * DOMElements.itemQuantInp.valueAsNumber\n      ).toFixed(2);\n      // tax value\n      DOMElements.itemTaxValInp.value = (\n        DOMElements.itemQuantInp.valueAsNumber *\n        DOMElements.itemPriceInp.valueAsNumber *\n        parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n      // item total price\n      DOMElements.itemTotValInp.value = (\n        DOMElements.itemNetValInp.valueAsNumber + DOMElements.itemTaxValInp.valueAsNumber\n      ).toFixed(2);\n    }\n  };\n\n  // clearing draft item input fields\n  const clearDraftItemFieds = function() {\n    DOMElements.draftItemConstructor.reset();\n    DOMElements.itemNameInp.focus();\n  };\n\n  // add item to draft table\n  const addItemToDraftItemsList = function(id) {\n    const item = storageController.draftItemsData.items.find(item => item.id === id);\n    // create newtable row\n    const newRow = document.createElement(\"tr\");\n    newRow.classList.add(\"draft__position\");\n    newRow.id = `draft-item-${item.id}`;\n    newRow.dataset.identifier = `${item.id}`;\n    newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usu</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n    DOMElements.draftItemTable.appendChild(newRow);\n  };\n\n  // helper function for cleat innner HTML in given element\n  const clearInnerHtml = function(elem) {\n    elem.innerHTML = \"\";\n  };\n\n  // building draft items table from start\n  const rebuildDraftItemsTable = function() {\n    clearInnerHtml(DOMElements.draftItemTable);\n    // for each drafted item perform same action\n    storageController.draftItemsData.items.forEach(item => {\n      // create newtable row\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"draft__position\");\n      newRow.id = `draft-item-${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usu</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.draftItemTable.appendChild(newRow);\n    });\n  };\n\n  // building draft sum values in draft table\n  const buildDraftSumValues = function() {\n    // remove all content from summary draft table\n    clearInnerHtml(DOMElements.drawtSumTable);\n\n    const draftSumRow = document.createElement(\"tr\");\n    draftSumRow.classList.add(\"draft__summary-row\");\n    draftSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"draft__summary-legend\">Razem:</th>\n    <th class=\"draft__summary-net-value\">${storageController.draftItemsData.summaries.totalNetVal.toFixed(\n      2\n    )}</th>\n    <th class=\"\"></th>\n    <th class=\"draft__summary-vat-value\">${storageController.draftItemsData.summaries.totalTaxVal.toFixed(\n      2\n    )}</th>\n    <th class=\"draft__summary-total\">${storageController.draftItemsData.summaries.total.toFixed(\n      2\n    )}</th>`;\n    DOMElements.drawtSumTable.appendChild(draftSumRow);\n  };\n\n  const generateDraftSumRow = function(areTaxRateItems, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (areTaxRateItems) {\n      const taxRatefinalRow = document.createElement(\"tr\");\n      taxRatefinalRow.classList.add(\"draft__summary-row\");\n      taxRatefinalRow.innerHTML = `\n      <td colspan=\"5\" class=\"draft__summary-legend\">W tym:</td>\n      <td class=\"draft__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n      <td class=\"\">${checkingTaxRate}%</td>\n      <td class=\"draft__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n      <td class=\"draft__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.drawtSumTable.appendChild(taxRatefinalRow);\n    }\n  };\n\n  const generateInvoice = function() {\n    const invoiceObj = storageController.invoices.invoice.details;\n    // inserting details of the invoice\n    DOMElements.invType.textContent = `${invoiceObj.document.type}`;\n    DOMElements.invNum.textContent = `nr ${invoiceObj.document.number}`;\n    DOMElements.invPlace.textContent = `Miejsce wystawienia: ${invoiceObj.document.place}`;\n    DOMElements.invDate.textContent = `Data wystawienia: ${invoiceObj.document.date}`;\n    DOMElements.invSellDate.textContent = `Data sprzeday: ${invoiceObj.document.sellDate}`;\n    DOMElements.invSellerName.textContent = `${invoiceObj.seller.name}`;\n    DOMElements.invSellerStr.textContent = `${invoiceObj.seller.street}`;\n    DOMElements.invSellerCity.textContent = `${invoiceObj.seller.city}`;\n    DOMElements.invSellerPostCode.textContent = `${invoiceObj.seller.postCode}`;\n    DOMElements.invSellerNip.textContent = `NIP: ${invoiceObj.seller.nip}`;\n    DOMElements.invBuyerName.textContent = `${invoiceObj.buyer.name}`;\n    DOMElements.invBuyerStr.textContent = `${invoiceObj.buyer.street}`;\n    DOMElements.invBuyerCity.textContent = `${invoiceObj.buyer.city}`;\n    DOMElements.invBuyerPostCode.textContent = `${invoiceObj.buyer.postCode}`;\n    DOMElements.invBuyerNip.textContent = `NIP: ${invoiceObj.buyer.nip}`;\n    DOMElements.invFinalToPay.textContent = `Do zapaty: ${invoiceObj.payment.toPay.toFixed(\n      2\n    )} PLN`;\n    DOMElements.invFinalPayMethod.textContent = `Sposb patnoci: ${invoiceObj.payment.method}`;\n    DOMElements.invFinalPayTerm.textContent = `Termin patnoci: ${invoiceObj.payment.term}`;\n    // print account number if choosen method is different than cash\n    if (invoiceObj.payment.method !== \"gotwka\") {\n      DOMElements.invFinalAccount.textContent = `Konto: ${invoiceObj.payment.account}`;\n    } else {\n      DOMElements.invFinalAccount.textContent = ``;\n    }\n  };\n\n  const generateInvoicePositions = function(positionsArray) {\n    clearInnerHtml(DOMElements.invoicePositionsTable);\n    clearInnerHtml(DOMElements.invoicePositionsTableSum);\n\n    positionsArray.forEach(item => {\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"invoice__position\");\n      newRow.id = `invoice-item${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n          <td class=\"invoice__item-lp\">${positionsArray.indexOf(item) + 1}</td>\n          <td class=\"invoice__item-name\">${item.name}</td>\n          <td class=\"invoice__item-unit\">${item.unit}</td>\n          <td class=\"invoice__item-quantity\">${item.quantity.toFixed(2)}</td>\n          <td class=\"invoice__item-price\">${item.netPrice.toFixed(2)}</td>\n          <td class=\"invoice__item-net-value\">${item.netValue.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-rate\">${item.taxRate}%</td>\n          <td class=\"invoice__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n          <td class=\"invoice__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(newRow);\n    });\n\n    // invoice items summaries from draft items summaries section\n    const totalNetVal = storageController.draftItemsData.summaries.totalNetVal;\n    const totalTaxVal = storageController.draftItemsData.summaries.totalTaxVal;\n    const total = storageController.draftItemsData.summaries.total;\n\n    const invoiceSumRow = document.createElement(\"tr\");\n    invoiceSumRow.classList.add(\"invoice__summary-row\");\n    invoiceSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"invoice__summary-legend\">Razem:</th>\n    <th class=\"invoice__summary-net-value\">${totalNetVal.toFixed(2)}</th>\n    <th class=\"\"></th>\n    <th class=\"invoice__summary-vat-value\">${totalTaxVal.toFixed(2)}</th>\n    <th class=\"invoice__summary-total\">${total.toFixed(2)}</th>`;\n    DOMElements.invoicePositionsTable.appendChild(invoiceSumRow);\n\n    // generate boolean values for check it there are some products with specific tax rates\n    const isTax23 = positionsArray.some(item => item.taxRate === 23);\n    const isTax8 = positionsArray.some(item => item.taxRate === 8);\n    const isTax5 = positionsArray.some(item => item.taxRate === 5);\n    const isTax3 = positionsArray.some(item => item.taxRate === 3);\n    const isTax00 = positionsArray.some(item => item.taxRate === 0);\n\n    //  generate summaries by vat rate\n    generateInvoiceSumRow(isTax23, 23);\n    generateInvoiceSumRow(isTax8, 8);\n    generateInvoiceSumRow(isTax5, 5);\n    generateInvoiceSumRow(isTax3, 3);\n    generateInvoiceSumRow(isTax00, 0);\n  };\n\n  // generate invoice positions sum row for each existing in draft items tavle tax rate determined by first argument the boolean value\n  const generateInvoiceSumRow = function(isTaxRate, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (isTaxRate) {\n      const vatRatefinalrow = document.createElement(\"tr\");\n      vatRatefinalrow.classList.add(\"invoice__summary-row\");\n      vatRatefinalrow.innerHTML = `\n        <td colspan=\"5\" class=\"invoice__summary-legend\">W tym:</td>\n        <td class=\"invoice__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n        <td class=\"\">${checkingTaxRate}%</td>\n        <td class=\"invoice__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n        <td class=\"invoice__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(vatRatefinalrow);\n    }\n  };\n\n  // showing modal complete\n  const showCompleteInfo = function() {\n    const competionModal = document.querySelector(\".not-completed-form-modal\");\n    competionModal.style.display = \"block\";\n    setTimeout(() => competionModal.classList.add(\"completion-modal-active\"), 10);\n\n    setTimeout(hideCompletionModal, 3000);\n\n    function hideCompletionModal() {\n      competionModal.classList.remove(\"completion-modal-active\");\n      setTimeout(() => (competionModal.style.display = \"none\"), 250);\n    }\n  };\n\n  const activatePrintInvoice = function() {\n    DOMElements.printBtn.removeAttribute(\"disabled\");\n  };\n\n  const closeStorageModal = function() {\n    DOMElements.storageListModal.classList.remove(\"modal-active\");\n    setTimeout(() => {\n      DOMElements.storageListModal.style.display = \"none\";\n    }, 250);\n    hideBackdropModal();\n    DOMElements.storageList.innerHTML = \"\";\n  };\n\n  const openStorageModal = function() {\n    displayBackdropModal();\n    DOMElements.storageListModal.style.display = \"block\";\n    setTimeout(() => {\n      DOMElements.storageListModal.classList.add(\"modal-active\");\n    }, 10);\n  };\n\n  const hideBackdropModal = function() {\n    DOMElements.storageListBackdrop.classList.remove(\"backdrop-active\");\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.style = \"display: none\";\n    }, 250);\n  };\n\n  const displayBackdropModal = function() {\n    DOMElements.storageListBackdrop.style = \"display: block\";\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.classList.add(\"backdrop-active\");\n    }, 10);\n  };\n\n  const fillInputForm = function(e) {\n    if (e.target.classList.contains(\"btn--load-item\")) {\n      console.log(e.target.dataset.itemName);\n      const items = JSON.parse(localStorage.getItem(\"items\"));\n      const item = items[e.target.dataset.itemName];\n      DOMElements.itemNameInp.value = item.name;\n      DOMElements.itemUnitInp.value = item.unit;\n      DOMElements.itemPriceInp.value = item.netPrice;\n      DOMElements.itemTaxRateInp.value = item.taxRate;\n      closeStorageModal();\n      DOMElements.itemQuantInp.focus();\n    }\n    if (e.target.classList.contains(\"btn--load-seller\")) {\n      const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n      const seller = sellers[e.target.dataset.sellerName];\n      DOMElements.sellerNameInp.value = seller.name;\n      DOMElements.sellerStreetInp.value = seller.street;\n      DOMElements.sellerCityInp.value = seller.city;\n      DOMElements.sellerPostCodeInp.value = seller.postCode;\n      DOMElements.sellerNipInp.value = seller.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-buyer\")) {\n      const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n      const buyer = buyers[e.target.dataset.buyerName];\n      DOMElements.buyerNameInp.value = buyer.name;\n      DOMElements.buyerStreetInp.value = buyer.street;\n      DOMElements.buyerCityInp.value = buyer.city;\n      DOMElements.buyerPostCodeInp.value = buyer.postCode;\n      DOMElements.buyerNipInp.value = buyer.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-account\")) {\n      const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n      const account = accounts[e.target.dataset.accountNumber];\n      DOMElements.payAccountInp.value = account.number;\n      closeStorageModal();\n    }\n  };\n\n  const buildStorageSellersList = function() {\n    const localStorageBuyers = JSON.parse(localStorage.getItem(\"sellers\"));\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const sellers = Object.entries(localStorageBuyers);\n      sellers.forEach(seller => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-seller\");\n        loadButton.dataset.sellerName = seller[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-seller\");\n        deleteButton.dataset.sellerName = seller[1].name;\n        deleteButton.textContent = \"Usu\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__seller-name\");\n        nameSpan.textContent = seller[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__seller-street\");\n        streetSpan.textContent = seller[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__seller-city\");\n        citySpan.textContent = seller[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__seller-nip\");\n        nipSpan.textContent = seller[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma adnych sprzedawcw zapisanych w twojej przegldarce.\");\n    }\n  };\n\n  const buildStorageBuyersList = function() {\n    const localStorageBuyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const buyers = Object.entries(localStorageBuyers);\n      buyers.forEach(buyer => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-buyer\");\n        loadButton.dataset.buyerName = buyer[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-buyer\");\n        deleteButton.dataset.buyerName = buyer[1].name;\n        deleteButton.textContent = \"Usu\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__buyer-name\");\n        nameSpan.textContent = buyer[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__buyer-street\");\n        streetSpan.textContent = buyer[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__buyer-city\");\n        citySpan.textContent = buyer[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__buyer-nip\");\n        nipSpan.textContent = buyer[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma adnych kontrahentw zapisanych w twojej przegldarce.\");\n    }\n  };\n\n  const buildStorageSellerAccountsList = function(accounts) {\n    if (localStorage.getItem(\"accounts\")) {\n      const localStorageAccounts = JSON.parse(localStorage.getItem(\"accounts\"));\n      const accounts = Object.entries(localStorageAccounts);\n      accounts.forEach(account => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-account\");\n        loadButton.dataset.accountNumber = account[1].number;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-account\");\n        deleteButton.dataset.accountNumber = account[1].number;\n        deleteButton.textContent = \"Usu\";\n\n        const accountNumberSpan = document.createElement(\"span\");\n        accountNumberSpan.classList.add(\"storage-list__account-number\");\n        accountNumberSpan.textContent = \"Numer Konta: \" + account[1].number;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(accountNumberSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma adnych numerw kont zapisanych w twojej przegldarce.\");\n    }\n  };\n\n  const buildStorageItemsList = function() {\n    if (localStorage.getItem(\"items\")) {\n      const localStorageItems = JSON.parse(localStorage.getItem(\"items\"));\n      const items = Object.entries(localStorageItems);\n      items.forEach(item => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-item\");\n        loadButton.dataset.itemName = item[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-item\");\n        deleteButton.dataset.itemName = item[1].name;\n        deleteButton.textContent = \"Usu\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__item-name\");\n        nameSpan.textContent = item[1].name;\n\n        const priceSpan = document.createElement(\"span\");\n        priceSpan.classList.add(\"storage-list__item-price\");\n        priceSpan.textContent = item[1].netPrice + \"PLN/\" + item[1].unit;\n\n        const taxSpan = document.createElement(\"span\");\n        taxSpan.classList.add(\"storage-list__item-tax\");\n        taxSpan.textContent = item[1].taxRate + \"%\";\n\n        const dateSpan = document.createElement(\"span\");\n        dateSpan.classList.add(\"storage-list__item-date\");\n        dateSpan.textContent = \"(zapisano: \" + item[1].date + \")\";\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(priceSpan);\n        li.appendChild(taxSpan);\n        li.appendChild(dateSpan);\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma adnych produktw zapisanych w twojej przegldarce.\");\n    }\n  };\n\n  const noLocalStorageDataInfo = function(message) {\n    const noDataInfo = document.createElement(\"h3\");\n    noDataInfo.classList.add(\"storage-list__no-data-info\");\n    noDataInfo.textContent = message;\n\n    DOMElements.storageList.appendChild(noDataInfo);\n  };\n\n  const hideListItem = function(element) {\n    element.classList.add(\"fade-up\");\n    setTimeout(() => {\n      element.style.display = \"none\";\n    }, 150);\n  };\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    DOMElements,\n    displayDraftItemNotFilledInputs,\n    clearDraftItemFieds,\n    rebuildDraftItemsTable,\n    addItemToDraftItemsList,\n    generateDraftSumRow,\n    buildDraftSumValues,\n    generateInvoice,\n    generateInvoicePositions,\n    showCompleteInfo,\n    activatePrintInvoice,\n    closeStorageModal,\n    openStorageModal,\n    hideBackdropModal,\n    displayBackdropModal,\n    fillInputForm,\n    buildStorageItemsList,\n    buildStorageSellerAccountsList,\n    buildStorageBuyersList,\n    buildStorageSellersList,\n    noLocalStorageDataInfo,\n    hideListItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  Storage Controller \n  ----------------------------------------------------*/\n\nconst storageController = (function() {\n  const draftItemsData = {\n    items: [],\n    summaries: {\n      total: 0,\n      totalNetVal: 0,\n      totalTaxVal: 0,\n      taxRates: {\n        tax23: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax8: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax5: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax3: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax0: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n      },\n    },\n  };\n\n  const invoices = {\n    invoice: {},\n  };\n\n  const DOMElements = uiController.DOMElements;\n\n  const createInvoiceObj = function() {\n    const invoice = {\n      details: {\n        document: {\n          type: DOMElements.docTypeInp.value,\n          number: DOMElements.docNumInp.value,\n          place: DOMElements.docPlaceInp.value,\n          date: DOMElements.docDateInp.value,\n          sellDate: DOMElements.docSellDateInp.value,\n        },\n        seller: {\n          name: DOMElements.sellerNameInp.value,\n          street: DOMElements.sellerStreetInp.value,\n          city: DOMElements.sellerCityInp.value,\n          postCode: DOMElements.sellerPostCodeInp.value,\n          nip: DOMElements.sellerNipInp.value,\n        },\n        buyer: {\n          name: DOMElements.buyerNameInp.value,\n          street: DOMElements.buyerStreetInp.value,\n          city: DOMElements.buyerCityInp.value,\n          postCode: DOMElements.buyerPostCodeInp.value,\n          nip: DOMElements.buyerNipInp.value,\n        },\n        payment: {\n          toPay: draftItemsData.summaries.total,\n          method: DOMElements.payMethodInp.value,\n          term: DOMElements.payTermInp.value,\n          account: DOMElements.payAccountInp.value,\n        },\n      },\n      positions: draftItemsData.items,\n    };\n    invoices.invoice = invoice;\n  };\n\n  const deleteDraftItem = function(delID) {\n    draftItemsData.items = draftItemsData.items.filter(item => item.id != delID);\n  };\n\n  const createNewItem = function(id) {\n    const newItem = {\n      // asigning values to newitem\n      id: id,\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      quantity: DOMElements.itemQuantInp.valueAsNumber,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      get netValue() {\n        return this.netPrice * this.quantity;\n      },\n      get taxValue() {\n        return this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n      get total() {\n        return this.netPrice * this.quantity + this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n    };\n    draftItemsData.items.push(newItem);\n  };\n\n  const calculateDraftItemsTotals = function() {\n    const draftItemsTotal = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.total;\n    }, 0);\n    const draftItemsTotalNetValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.netValue;\n    }, 0);\n    const draftItemsTotalTaxValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.taxValue;\n    }, 0);\n\n    draftItemsData.summaries.total = draftItemsTotal;\n    draftItemsData.summaries.totalNetVal = draftItemsTotalNetValue;\n    draftItemsData.summaries.totalTaxVal = draftItemsTotalTaxValue;\n  };\n\n  const claculateDraftTaxRatesValues = function(areTaxRateItems, checkingTaxRate) {\n    if (areTaxRateItems) {\n      const taxRateItemsArr = draftItemsData.items.filter(item => item.taxRate === checkingTaxRate);\n      const taxRateNetValue = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.netValue;\n      }, 0);\n      const taxRateTax = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.taxValue;\n      }, 0);\n      const taxRateTotal = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.total;\n      }, 0);\n\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxValue = taxRateTax;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxTotal = taxRateTotal;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].netValue = taxRateNetValue;\n    }\n  };\n\n  // creating vat rates summaries in storage controller and building summaries rows in draft items table\n  const createDraftVatRatesValues = function() {\n    // boolean values for check if there are some products with specific tax rates\n    const isTax00 = draftItemsData.items.some(item => item.taxRate === 0);\n    const isTax3 = draftItemsData.items.some(item => item.taxRate === 3);\n    const isTax5 = draftItemsData.items.some(item => item.taxRate === 5);\n    const isTax8 = draftItemsData.items.some(item => item.taxRate === 8);\n    const isTax23 = draftItemsData.items.some(item => item.taxRate === 23);\n\n    // calculate summary valuest for each vat rate\n    claculateDraftTaxRatesValues(isTax00, 0);\n    claculateDraftTaxRatesValues(isTax3, 3);\n    claculateDraftTaxRatesValues(isTax5, 5);\n    claculateDraftTaxRatesValues(isTax8, 8);\n    claculateDraftTaxRatesValues(isTax23, 23);\n\n    // create summary row for each existing vat rate\n    uiController.generateDraftSumRow(isTax00, 0);\n    uiController.generateDraftSumRow(isTax3, 3);\n    uiController.generateDraftSumRow(isTax5, 5);\n    uiController.generateDraftSumRow(isTax8, 8);\n    uiController.generateDraftSumRow(isTax23, 23);\n  };\n\n  const saveSellerToLocal = function(seller) {\n    let sellers = {};\n    if (localStorage.getItem(\"sellers\")) {\n      sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    }\n\n    sellers[seller.name] = seller;\n\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const saveBuyerToLocal = function(buyer) {\n    let buyers = {};\n    if (localStorage.getItem(\"buyers\")) {\n      buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    }\n\n    buyers[buyer.name] = buyer;\n\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const saveItemToLocal = function(item) {\n    let items = {};\n    if (localStorage.getItem(\"items\")) {\n      items = JSON.parse(localStorage.getItem(\"items\"));\n    }\n\n    items[item.name] = item;\n\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n  const saveAccountToLocal = function(account) {\n    let accounts = {};\n    if (localStorage.getItem(\"accounts\")) {\n      accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    }\n\n    accounts[account.number] = account;\n\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteSeller = function(sellerName) {\n    const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    delete sellers[sellerName];\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const deleteBuyer = function(buyerName) {\n    const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    delete buyers[buyerName];\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const deleteAccount = function(account) {\n    const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    delete accounts[account];\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteItem = function(name) {\n    const items = JSON.parse(localStorage.getItem(\"items\"));\n    console.log(items[name]);\n    delete items[name];\n    console.log(items);\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    invoices,\n    draftItemsData,\n    createNewItem,\n    deleteDraftItem,\n    createDraftVatRatesValues,\n    createInvoiceObj,\n    calculateDraftItemsTotals,\n    saveSellerToLocal,\n    saveBuyerToLocal,\n    saveItemToLocal,\n    saveAccountToLocal,\n    deleteSeller,\n    deleteBuyer,\n    deleteAccount,\n    deleteItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  App Controller\n----------------------------------------------------*/\n\nconst appController = (function(StorageCtrl, UiCtrl) {\n  const DOMElements = UiCtrl.DOMElements;\n\n  const loadEventListeners = function() {\n    // generate invoice event listener\n    DOMElements.genBtn.addEventListener(\"click\", generateInvoice);\n    // event listeners for draft section\n    DOMElements.addBtn.addEventListener(\"click\", addItem);\n    DOMElements.itemQuantInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemPriceInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemNetValInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemTaxRateInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.draftItemTable.addEventListener(\"click\", deleteDraftItem);\n\n    // event listeners for verification for inputs section\n    DOMElements.dataInpuForm.addEventListener(\"keyup\", verifyInputField);\n    DOMElements.dataInpuForm.addEventListener(\"change\", verifyInputField);\n    DOMElements.draftItemConstructor.addEventListener(\"keyup\", verifyDraftItemInput);\n\n    DOMElements.payMethodInp.addEventListener(\"change\", isBankAccountCheck);\n\n    // local storage save and load listeners\n    DOMElements.sellerSaveBtn.addEventListener(\"click\", saveSeller);\n    DOMElements.sellerLoadBtn.addEventListener(\"click\", loadSeller);\n    DOMElements.buyerSaveBtn.addEventListener(\"click\", saveBuyer);\n    DOMElements.buyerLoadTrigger.addEventListener(\"click\", retrieveBuyers);\n    DOMElements.accountSaveBtn.addEventListener(\"click\", saveAccount);\n    DOMElements.accountLoadBtn.addEventListener(\"click\", retrieveAccounts);\n    DOMElements.itemSaveBtn.addEventListener(\"click\", saveItem);\n    DOMElements.itemLoadTrigger.addEventListener(\"click\", retrieveItems);\n    DOMElements.storageListModalClose.addEventListener(\"click\", UiCtrl.closeStorageModal);\n    DOMElements.storageList.addEventListener(\"click\", UiCtrl.fillInputForm);\n    DOMElements.storageList.addEventListener(\"click\", deleteLocalStorageEntry);\n  };\n\n  // initialization function\n  const init = function() {\n    loadEventListeners();\n  };\n  const isBankAccountCheck = function(e) {\n    if (e.target.value === \"gotwka\") {\n      DOMElements.payAccountInp.parentElement.style.display = \"none\";\n      DOMElements.payAccountInp.setAttribute(\"disabled\", true);\n      DOMElements.payAccountInp.value = \"\";\n    } else {\n      DOMElements.payAccountInp.parentElement.style.display = \"flex\";\n      DOMElements.payAccountInp.removeAttribute(\"disabled\");\n    }\n  };\n\n  const verifyInputField = function(e) {\n    if (e.target === DOMElements.sellerPostCodeInp || e.target === DOMElements.buyerPostCodeInp) {\n      validationFunctions.validatePostCode(e);\n    } else if (e.target === DOMElements.sellerNipInp || e.target === DOMElements.buyerNipInp) {\n      validationFunctions.validateNip(e);\n    } else if (e.target === DOMElements.payAccountInp) {\n      if (\n        DOMElements.payMethodInp.value !== \"gotwka\" ||\n        DOMElements.payMethodInp.value !== \"pobranie\"\n      ) {\n        validationFunctions.validateAccount(e);\n      }\n    } else {\n      validationFunctions.validateFillInFormInput(e);\n    }\n  };\n\n  const verifyDraftItemInput = function(e) {\n    validationFunctions.validateDraftItemInputs(e);\n  };\n\n  const verifyCompletedForm = function() {\n    let inputs = Array.from(DOMElements.dataInpuForm.getElementsByClassName(\"input\"));\n\n    // If payment method is 'gotwka' cuts this field from inputs array to not validate ir\n    if (DOMElements.payMethodInp.value === \"gotwka\") {\n      inputs = inputs.filter(item => item.classList.contains(\"payment__account\") === false);\n    }\n    if (inputs.some(input => input.value === \"\" || input.value === \" \")) {\n      inputs\n        .filter(input => input.value === \"\" || input.value === \" \")\n        .forEach(input => input.classList.add(\"invalid\"));\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  // validation functions object\n  const validationFunctions = {\n    validatePostCode: function(e) {\n      const reg = /^\\d\\d-\\d\\d\\d$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateNip: function(e) {\n      const reg = /^\\d{3}[- ]?\\d{3}[- ]?\\d\\d[- ]?\\d\\d\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateAccount: function(e) {\n      const reg = /^([A-Za-z]{2})?[ ]?\\d{2}([ ]?\\d{4}){6}\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateFillInFormInput: function(e) {\n      const reg = /[A-Za-z\\d]+/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateDraftItemInputs: function(e) {\n      if (\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemQuantInp.value !== \"\" &&\n        DOMElements.itemPriceInp.value !== \"\"\n      ) {\n        DOMElements.addBtn.disabled = false;\n      } else {\n        DOMElements.addBtn.disabled = true;\n      }\n    },\n  };\n\n  const addItem = function() {\n    const newItemId = v4();\n    storageController.createNewItem(newItemId);\n    storageController.calculateDraftItemsTotals();\n    UiCtrl.clearDraftItemFieds();\n    UiCtrl.addItemToDraftItemsList(newItemId);\n    StorageCtrl.createDraftVatRatesValues();\n    UiCtrl.buildDraftSumValues();\n    storageController.createDraftVatRatesValues();\n    DOMElements.addBtn.disabled = true;\n  };\n\n  const calculateDraftItem = function() {\n    // calculate and display not filled draft input values and placing it's values as input value\n    UiCtrl.displayDraftItemNotFilledInputs();\n  };\n\n  const deleteDraftItem = function(e) {\n    if (e.target.classList.contains(\"btn--item-del\")) {\n      // determine id of target item\n      const delID = e.target.parentElement.parentElement.dataset.identifier;\n      // delete item from storage array by given id\n      StorageCtrl.deleteDraftItem(delID);\n      // recalculate invoice totals\n      StorageCtrl.calculateDraftItemsTotals();\n      // rebuild draft items table\n      UiCtrl.rebuildDraftItemsTable();\n      // check existing on draft items vat rates\n      StorageCtrl.createDraftVatRatesValues();\n      // rebuild vat summareis table by vat rate for draft items\n      UiCtrl.buildDraftSumValues();\n    }\n  };\n\n  // function for generate new invoice object\n  const generateInvoice = function() {\n    const verified = verifyCompletedForm();\n    if (verified) {\n      // create invoice object in storage\n      StorageCtrl.createInvoiceObj();\n      // generating invoice document\n      UiCtrl.generateInvoice();\n      // generate invoice positions from draft items\n      UiCtrl.generateInvoicePositions(StorageCtrl.invoices.invoice.positions);\n      // Activate print invoice button\n      UiCtrl.activatePrintInvoice();\n    } else {\n      uiController.showCompleteInfo();\n    }\n  };\n\n  const saveSeller = function(e) {\n    e.preventDefault();\n\n    const seller = {\n      name: DOMElements.sellerNameInp.value,\n      street: DOMElements.sellerStreetInp.value,\n      city: DOMElements.sellerCityInp.value,\n      postCode: DOMElements.sellerPostCodeInp.value,\n      nip: DOMElements.sellerNipInp.value,\n    };\n    StorageCtrl.saveSellerToLocal(seller);\n  };\n\n  const loadSeller = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellersList();\n  };\n\n  const saveBuyer = function(e) {\n    e.preventDefault();\n\n    const buyer = {\n      name: DOMElements.buyerNameInp.value,\n      street: DOMElements.buyerStreetInp.value,\n      city: DOMElements.buyerCityInp.value,\n      postCode: DOMElements.buyerPostCodeInp.value,\n      nip: DOMElements.buyerNipInp.value,\n    };\n    StorageCtrl.saveBuyerToLocal(buyer);\n  };\n\n  const retrieveBuyers = function(e) {\n    e.preventDefault();\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageBuyersList();\n  };\n\n  const saveAccount = function(e) {\n    e.preventDefault();\n\n    const account = {\n      number: DOMElements.payAccountInp.value,\n    };\n    StorageCtrl.saveAccountToLocal(account);\n  };\n\n  const retrieveAccounts = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellerAccountsList();\n  };\n\n  const saveItem = function(e) {\n    e.preventDefault();\n\n    const now = new Date();\n    const createdDate =\n      now.getUTCFullYear() + \"/\" + (now.getUTCMonth() + 1) + \"/\" + now.getUTCDate();\n\n    const item = {\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      date: createdDate,\n    };\n    StorageCtrl.saveItemToLocal(item);\n  };\n\n  const retrieveItems = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageItemsList();\n  };\n\n  const deleteLocalStorageEntry = function(e) {\n    e.preventDefault();\n    const targetClasses = e.target.classList;\n    if (targetClasses.contains(\"btn--delete-seller\")) {\n      StorageCtrl.deleteSeller(e.target.dataset.sellerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-buyer\")) {\n      StorageCtrl.deleteBuyer(e.target.dataset.buyerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-account\")) {\n      StorageCtrl.deleteAccount(e.target.dataset.accountNumber);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-item\")) {\n      console.log(e.target.dataset.itemName);\n      StorageCtrl.deleteItem(e.target.dataset.itemName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    init,\n  };\n})(storageController, uiController);\n\nappController.init();\n\n// print js script for printing - dependiency - jquery\n$(\".btn--print-inv\").on(\"click\", function() {\n  $(\".invoice\").printThis();\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}