{"version":3,"sources":["node_modules/uuid/lib/rng-browser.js","node_modules/uuid/lib/bytesToUuid.js","node_modules/uuid/v1.js","node_modules/uuid/v4.js","node_modules/uuid/index.js","js/main.js"],"names":["uiController","DOMElements","document","querySelector","querySelectorAll","clearInnerHtml","elem","innerHTML","generateInvoiceSumRow","isTaxRate","checkingTaxRate","checkedTaxRate","storageController","draftItemsData","summaries","taxRates","vatRatefinalrow","createElement","classList","add","netValue","toFixed","taxValue","taxTotal","invoicePositionsTable","appendChild","closeStorageModal","storageListModal","remove","style","display","hideBackdropModal","storageList","storageListBackdrop","displayBackdropModal","noLocalStorageDataInfo","message","noDataInfo","textContent","itemQuantInp","value","itemPriceInp","itemNetValInp","valueAsNumber","itemTaxValInp","parseFloat","itemTaxRateInp","itemTotValInp","itemTotalPriceInp","draftItemConstructor","reset","itemNameInp","focus","draftItemTable","items","forEach","newRow","id","item","dataset","identifier","name","unit","quantity","netPrice","taxRate","total","find","areTaxRateItems","taxRatefinalRow","drawtSumTable","draftSumRow","totalNetVal","totalTaxVal","invoiceObj","invoices","invoice","details","invType","type","invNum","number","invPlace","place","invDate","date","invSellDate","sellDate","invSellerName","seller","invSellerStr","street","invSellerCity","city","invSellerPostCode","postCode","invSellerNip","nip","invBuyerName","buyer","invBuyerStr","invBuyerCity","invBuyerPostCode","invBuyerNip","invFinalToPay","payment","toPay","invFinalPayMethod","method","invFinalPayTerm","term","invFinalAccount","account","positionsArray","invoicePositionsTableSum","indexOf","invoiceSumRow","isTax23","some","isTax8","isTax5","isTax3","isTax00","competionModal","hideCompletionModal","printBtn","removeAttribute","e","target","contains","log","itemName","JSON","parse","localStorage","getItem","itemUnitInp","sellers","sellerName","sellerNameInp","sellerStreetInp","sellerCityInp","sellerPostCodeInp","sellerNipInp","buyers","buyerName","buyerNameInp","buyerStreetInp","buyerCityInp","buyerPostCodeInp","buyerNipInp","accounts","accountNumber","payAccountInp","localStorageItems","Object","entries","li","loadButton","deleteButton","nameSpan","priceSpan","taxSpan","dateSpan","localStorageAccounts","accountNumberSpan","localStorageBuyers","keys","length","streetSpan","citySpan","nipSpan","hideListItem","element","addEventListener","propertyName","claculateDraftTaxRatesValues","taxRateItemsArr","filter","taxRateNetValue","reduce","acc","taxRateTax","taxRateTotal","newItem","push","delID","generateDraftSumRow","docTypeInp","docNumInp","docPlaceInp","docDateInp","docSellDateInp","payMethodInp","payTermInp","draftItemsTotal","draftItemsTotalNetValue","draftItemsTotalTaxValue","setItem","stringify","deleteItem","appController","StorageCtrl","UiCtrl","isBankAccountCheck","parentElement","setAttribute","verifyInputField","validatePostCode","validateNip","validateAccount","validateFillInFormInput","verifyDraftItemInput","validateDraftItemInputs","validationFunctions","test","addBtn","disabled","addItem","newItemId","createNewItem","calculateDraftItemsTotals","clearDraftItemFieds","addItemToDraftItemsList","createDraftVatRatesValues","buildDraftSumValues","calculateDraftItem","displayDraftItemNotFilledInputs","deleteDraftItem","rebuildDraftItemsTable","generateInvoice","verified","inputs","Array","from","dataInpuForm","getElementsByClassName","input","createInvoiceObj","generateInvoicePositions","positions","activatePrintInvoice","showCompleteInfo","saveSeller","preventDefault","saveSellerToLocal","loadSeller","openStorageModal","buildStorageSellersList","saveBuyer","saveBuyerToLocal","retrieveBuyers","buildStorageBuyersList","saveAccount","saveAccountToLocal","retrieveAccounts","buildStorageSellerAccountsList","saveItem","now","Date","createdDate","getUTCFullYear","getUTCMonth","getUTCDate","saveItemToLocal","retrieveItems","buildStorageItemsList","deleteLocalStorageEntry","targetClasses","deleteSeller","deleteBuyer","deleteAccount","init","genBtn","sellerSaveBtn","sellerLoadBtn","buyerSaveBtn","buyerLoadTrigger","accountSaveBtn","accountLoadBtn","itemSaveBtn","itemLoadTrigger","storageListModalClose","fillInputForm","$","on","printThis"],"mappings":"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","file":"main.67c45f7d.map","sourceRoot":"..","sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","import { v4 } from \"uuid\";\nimport \"../sass/main.scss\";\n\nconst uiController = (function() {\n  // defining DOM elements\n  const DOMElements = {\n    // -------------------------------------------------------\n    // Invoice details input elements\n    // -------------------------------------------------------\n    dataInpuForm: document.querySelector(\".data-form\"),\n\n    // document data inputs\n    docTypeInp: document.querySelector(\".data__doc-type\"),\n    docNumInp: document.querySelector(\".data__doc-number\"),\n    docPlaceInp: document.querySelector(\".data__doc-place\"),\n    docDateInp: document.querySelector(\".data__doc-date\"),\n    docSellDateInp: document.querySelector(\".data__doc-sell-date\"),\n\n    // seller data inputs\n    sellerNameInp: document.querySelector(\".data__seller-name\"),\n    sellerStreetInp: document.querySelector(\".data__seller-street\"),\n    sellerCityInp: document.querySelector(\".data__seller-city\"),\n    sellerPostCodeInp: document.querySelector(\".data__seller-post-code\"),\n    sellerNipInp: document.querySelector(\".data__seller-nip\"),\n    sellerSaveBtn: document.querySelector(\".btn--seller-save\"),\n    sellerLoadBtn: document.querySelector(\".btn--seller-load\"),\n\n    // buyer data inputs\n    buyerNameInp: document.querySelector(\".data__buyer-name\"),\n    buyerStreetInp: document.querySelector(\".data__buyer-street\"),\n    buyerCityInp: document.querySelector(\".data__buyer-city\"),\n    buyerPostCodeInp: document.querySelector(\".data__buyer-post-code\"),\n    buyerNipInp: document.querySelector(\".data__buyer-nip\"),\n    buyerSaveBtn: document.querySelector(\".btn--buyer-save\"),\n    buyerLoadTrigger: document.querySelector(\".btn--buyer-load\"),\n\n    // payment terms inputs\n    payMethodInp: document.querySelector(\".payment__method\"),\n    payTermInp: document.querySelector(\".payment__term\"),\n    payAccountInp: document.querySelector(\".payment__account\"),\n    accountSaveBtn: document.querySelector(\".btn--account-save\"),\n    accountLoadBtn: document.querySelector(\".btn--account-load\"),\n\n    // draft positions inputs\n    itemNameInp: document.querySelector(\".draft-item__name\"),\n    itemUnitInp: document.querySelector(\".draft-item__unit\"),\n    itemQuantInp: document.querySelector(\".draft-item__quantity\"),\n    itemPriceInp: document.querySelector(\".draft-item__price\"),\n    itemNetValInp: document.querySelector(\".draft-item__net-value\"),\n    itemTaxRateInp: document.querySelector(\".draft-item__tax-rate\"),\n    itemTaxValInp: document.querySelector(\".draft-item__tax-value\"),\n    itemTotValInp: document.querySelector(\".draft-item__total-value\"),\n    itemSaveBtn: document.querySelector(\".btn--item-save\"),\n    itemLoadTrigger: document.querySelector(\".btn--item-load\"),\n    storageListModalClose: document.querySelector(\".btn--close-storage-list\"),\n\n    // draft add button\n    addBtn: document.querySelector(\".btn--add-item\"),\n\n    // draft itens table\n    draftItemConstructor: document.querySelector(\".draft-item__constructor\"),\n    draftItemTable: document.querySelector(\".draft-added-items\"),\n    drawtSumTable: document.querySelector(\".draft__summary\"),\n    itemDelBtn: document.querySelectorAll(\".btn--item-del\"),\n\n    // storage list modal\n    storageList: document.querySelector(\".storage-list\"),\n    storageListModal: document.querySelector(\".storage-list__modal\"),\n    storageListBackdrop: document.querySelector(\".storage-list__backdrop\"),\n\n    // button generate invoice\n    genBtn: document.querySelector(\".btn--gen-inv\"),\n    printBtn: document.querySelector(\".btn--print-inv\"),\n\n    // -------------------------------------------------------\n    //output invoice elements\n    // -------------------------------------------------------\n    invoice: document.querySelector(\".invoice\"),\n    // invoice heading\n    invType: document.querySelector(\".invoice__type\"),\n    invNum: document.querySelector(\".invoice__number\"),\n    invPlace: document.querySelector(\".invoice__place\"),\n    invSellDate: document.querySelector(\".invoice__sell-date\"),\n    invDate: document.querySelector(\".invoice__place-date\"),\n    // invoice seller details\n    invSellerName: document.querySelector(\".invoice__seller-name\"),\n    invSellerStr: document.querySelector(\".invoice__seller-street\"),\n    invSellerCity: document.querySelector(\".invoice__seller-city\"),\n    invSellerPostCode: document.querySelector(\".seller__post-code\"),\n    invSellerNip: document.querySelector(\".invoice__seller-nip\"),\n    // invoice buyer details\n    invBuyerName: document.querySelector(\".invoice__buyer-name\"),\n    invBuyerStr: document.querySelector(\".invoice__buyer-street\"),\n    invBuyerCity: document.querySelector(\".invoice__buyer-city\"),\n    invBuyerPostCode: document.querySelector(\".buyer__post-code\"),\n    invBuyerNip: document.querySelector(\".invoice__buyer-nip\"),\n    // Invoice positions items table\n    invoicePositionsTable: document.querySelector(\".invoice__positions-place\"),\n    invoicePositionsTableSum: document.querySelector(\".invoice__positions-summary\"),\n    // invoice final details\n    invFinalToPay: document.querySelector(\".invoice__final-to-pay\"),\n    invFinalPayMethod: document.querySelector(\".invoice__final-payment-method\"),\n    invFinalPayTerm: document.querySelector(\".invoice__final-payment-term\"),\n    invFinalAccount: document.querySelector(\".invoice__final-payment__account\"),\n  };\n\n  // displaying draft item taxes in draft item constructor form\n  const displayDraftItemNotFilledInputs = function() {\n    debugger;\n    if (DOMElements.itemQuantInp.value !== \"\" && DOMElements.itemPriceInp.value !== \"\") {\n      DOMElements.itemNetValInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber * DOMElements.itemQuantInp.valueAsNumber\n      ).toFixed(2);\n      DOMElements.itemTaxValInp.value = (\n        DOMElements.itemQuantInp.valueAsNumber *\n        DOMElements.itemPriceInp.valueAsNumber *\n        parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n      DOMElements.itemTotValInp.value = (\n        DOMElements.itemNetValInp.valueAsNumber + DOMElements.itemTaxValInp.valueAsNumber\n      ).toFixed(2);\n      DOMElements.itemTotalPriceInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber +\n        DOMElements.itemPriceInp.valueAsNumber * parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n    }\n  };\n\n  // clearing draft item input fields\n  const clearDraftItemFieds = function() {\n    DOMElements.draftItemConstructor.reset();\n    DOMElements.itemNameInp.focus();\n  };\n\n  // add item to draft table\n  const addItemToDraftItemsList = function(id) {\n    const item = storageController.draftItemsData.items.find(item => item.id === id);\n    // create newtable row\n    const newRow = document.createElement(\"tr\");\n    newRow.classList.add(\"draft__position\");\n    newRow.id = `draft-item-${item.id}`;\n    newRow.dataset.identifier = `${item.id}`;\n    newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n    DOMElements.draftItemTable.appendChild(newRow);\n  };\n\n  // helper function for cleat innner HTML in given element\n  const clearInnerHtml = function(elem) {\n    elem.innerHTML = \"\";\n  };\n\n  // building draft items table from start\n  const rebuildDraftItemsTable = function() {\n    clearInnerHtml(DOMElements.draftItemTable);\n    // for each drafted item perform same action\n    storageController.draftItemsData.items.forEach(item => {\n      // create newtable row\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"draft__position\");\n      newRow.id = `draft-item-${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.draftItemTable.appendChild(newRow);\n    });\n  };\n\n  // building draft sum values in draft table\n  const buildDraftSumValues = function() {\n    // remove all content from summary draft table\n    clearInnerHtml(DOMElements.drawtSumTable);\n\n    const draftSumRow = document.createElement(\"tr\");\n    draftSumRow.classList.add(\"draft__summary-row\");\n    draftSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"draft__summary-legend\">Razem:</th>\n    <th class=\"draft__summary-net-value\">${storageController.draftItemsData.summaries.totalNetVal.toFixed(\n      2\n    )}</th>\n    <th class=\"\"></th>\n    <th class=\"draft__summary-vat-value\">${storageController.draftItemsData.summaries.totalTaxVal.toFixed(\n      2\n    )}</th>\n    <th class=\"draft__summary-total\">${storageController.draftItemsData.summaries.total.toFixed(\n      2\n    )}</th>`;\n    DOMElements.drawtSumTable.appendChild(draftSumRow);\n  };\n\n  const generateDraftSumRow = function(areTaxRateItems, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (areTaxRateItems) {\n      const taxRatefinalRow = document.createElement(\"tr\");\n      taxRatefinalRow.classList.add(\"draft__summary-row\");\n      taxRatefinalRow.innerHTML = `\n      <td colspan=\"5\" class=\"draft__summary-legend\">W tym:</td>\n      <td class=\"draft__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n      <td class=\"\">${checkingTaxRate}%</td>\n      <td class=\"draft__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n      <td class=\"draft__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.drawtSumTable.appendChild(taxRatefinalRow);\n    }\n  };\n\n  const generateInvoice = function() {\n    const invoiceObj = storageController.invoices.invoice.details;\n    // inserting details of the invoice\n    DOMElements.invType.textContent = `${invoiceObj.document.type}`;\n    DOMElements.invNum.textContent = `nr ${invoiceObj.document.number}`;\n    DOMElements.invPlace.textContent = `Miejsce wystawienia: ${invoiceObj.document.place}`;\n    DOMElements.invDate.textContent = `Data wystawienia: ${invoiceObj.document.date}`;\n    DOMElements.invSellDate.textContent = `Data sprzedaży: ${invoiceObj.document.sellDate}`;\n    DOMElements.invSellerName.textContent = `${invoiceObj.seller.name}`;\n    DOMElements.invSellerStr.textContent = `${invoiceObj.seller.street}`;\n    DOMElements.invSellerCity.textContent = `${invoiceObj.seller.city}`;\n    DOMElements.invSellerPostCode.textContent = `${invoiceObj.seller.postCode}`;\n    DOMElements.invSellerNip.textContent = `NIP: ${invoiceObj.seller.nip}`;\n    DOMElements.invBuyerName.textContent = `${invoiceObj.buyer.name}`;\n    DOMElements.invBuyerStr.textContent = `${invoiceObj.buyer.street}`;\n    DOMElements.invBuyerCity.textContent = `${invoiceObj.buyer.city}`;\n    DOMElements.invBuyerPostCode.textContent = `${invoiceObj.buyer.postCode}`;\n    DOMElements.invBuyerNip.textContent = `NIP: ${invoiceObj.buyer.nip}`;\n    DOMElements.invFinalToPay.textContent = `Do zapłaty: ${invoiceObj.payment.toPay.toFixed(\n      2\n    )} PLN`;\n    DOMElements.invFinalPayMethod.textContent = `Sposób płatności: ${invoiceObj.payment.method}`;\n    DOMElements.invFinalPayTerm.textContent = `Termin płatności: ${invoiceObj.payment.term}`;\n    // print account number if choosen method is different than cash\n    if (invoiceObj.payment.method !== \"gotówka\") {\n      DOMElements.invFinalAccount.textContent = `Konto: ${invoiceObj.payment.account}`;\n    } else {\n      DOMElements.invFinalAccount.textContent = ``;\n    }\n  };\n\n  const generateInvoicePositions = function(positionsArray) {\n    clearInnerHtml(DOMElements.invoicePositionsTable);\n    clearInnerHtml(DOMElements.invoicePositionsTableSum);\n\n    positionsArray.forEach(item => {\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"invoice__position\");\n      newRow.id = `invoice-item${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n          <td class=\"invoice__item-lp\">${positionsArray.indexOf(item) + 1}</td>\n          <td class=\"invoice__item-name\">${item.name}</td>\n          <td class=\"invoice__item-unit\">${item.unit}</td>\n          <td class=\"invoice__item-currency\">PLN</td>\n          <td class=\"invoice__item-quantity\">${item.quantity.toFixed(2)}</td>\n          <td class=\"invoice__item-price\">${item.netPrice.toFixed(2)}</td>\n          <td class=\"invoice__item-net-value\">${item.netValue.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-rate\">${item.taxRate}%</td>\n          <td class=\"invoice__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n          <td class=\"invoice__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(newRow);\n    });\n\n    // invoice items summaries from draft items summaries section\n    const totalNetVal = storageController.draftItemsData.summaries.totalNetVal;\n    const totalTaxVal = storageController.draftItemsData.summaries.totalTaxVal;\n    const total = storageController.draftItemsData.summaries.total;\n\n    const invoiceSumRow = document.createElement(\"tr\");\n    invoiceSumRow.classList.add(\"invoice__summary-row\");\n    invoiceSumRow.innerHTML = `\n    <th colspan=\"6\" class=\"invoice__summary-legend\">Razem:</th>\n    <th class=\"invoice__summary-net-value\">${totalNetVal.toFixed(2)}</th>\n    <th class=\"\"></th>\n    <th class=\"invoice__summary-vat-value\">${totalTaxVal.toFixed(2)}</th>\n    <th class=\"invoice__summary-total\">${total.toFixed(2)}</th>`;\n    DOMElements.invoicePositionsTable.appendChild(invoiceSumRow);\n\n    // generate boolean values for check it there are some products with specific tax rates\n    const isTax23 = positionsArray.some(item => item.taxRate === 23);\n    const isTax8 = positionsArray.some(item => item.taxRate === 8);\n    const isTax5 = positionsArray.some(item => item.taxRate === 5);\n    const isTax3 = positionsArray.some(item => item.taxRate === 3);\n    const isTax00 = positionsArray.some(item => item.taxRate === 0);\n\n    //  generate summaries by vat rate\n    generateInvoiceSumRow(isTax23, 23);\n    generateInvoiceSumRow(isTax8, 8);\n    generateInvoiceSumRow(isTax5, 5);\n    generateInvoiceSumRow(isTax3, 3);\n    generateInvoiceSumRow(isTax00, 0);\n  };\n\n  // generate invoice positions sum row for each existing in draft items tavle tax rate determined by first argument the boolean value\n  const generateInvoiceSumRow = function(isTaxRate, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (isTaxRate) {\n      const vatRatefinalrow = document.createElement(\"tr\");\n      vatRatefinalrow.classList.add(\"invoice__summary-row\");\n      vatRatefinalrow.innerHTML = `\n        <td colspan=\"6\" class=\"invoice__summary-legend\">W tym:</td>\n        <td class=\"invoice__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n        <td class=\"\">${checkingTaxRate}%</td>\n        <td class=\"invoice__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n        <td class=\"invoice__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(vatRatefinalrow);\n    }\n  };\n\n  // showing modal complete\n  const showCompleteInfo = function() {\n    const competionModal = document.querySelector(\".not-completed-form-modal\");\n    competionModal.style.display = \"block\";\n    setTimeout(() => competionModal.classList.add(\"completion-modal-active\"), 10);\n\n    setTimeout(hideCompletionModal, 3000);\n\n    function hideCompletionModal() {\n      competionModal.classList.remove(\"completion-modal-active\");\n      setTimeout(() => (competionModal.style.display = \"none\"), 250);\n    }\n  };\n\n  const activatePrintInvoice = function() {\n    DOMElements.printBtn.removeAttribute(\"disabled\");\n  };\n\n  const closeStorageModal = function() {\n    DOMElements.storageListModal.classList.remove(\"modal-active\");\n    setTimeout(() => {\n      DOMElements.storageListModal.style.display = \"none\";\n    }, 250);\n    hideBackdropModal();\n    DOMElements.storageList.innerHTML = \"\";\n  };\n\n  const openStorageModal = function() {\n    displayBackdropModal();\n    DOMElements.storageListModal.style.display = \"block\";\n    setTimeout(() => {\n      DOMElements.storageListModal.classList.add(\"modal-active\");\n    }, 10);\n  };\n\n  const hideBackdropModal = function() {\n    DOMElements.storageListBackdrop.classList.remove(\"backdrop-active\");\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.style = \"display: none\";\n    }, 250);\n  };\n\n  const displayBackdropModal = function() {\n    DOMElements.storageListBackdrop.style = \"display: block\";\n    setTimeout(() => {\n      DOMElements.storageListBackdrop.classList.add(\"backdrop-active\");\n    }, 10);\n  };\n\n  const fillInputForm = function(e) {\n    if (e.target.classList.contains(\"btn--load-item\")) {\n      console.log(e.target.dataset.itemName);\n      const items = JSON.parse(localStorage.getItem(\"items\"));\n      const item = items[e.target.dataset.itemName];\n      DOMElements.itemNameInp.value = item.name;\n      DOMElements.itemUnitInp.value = item.unit;\n      DOMElements.itemPriceInp.value = item.netPrice;\n      DOMElements.itemTaxRateInp.value = item.taxRate;\n      closeStorageModal();\n      DOMElements.itemQuantInp.focus();\n    }\n    if (e.target.classList.contains(\"btn--load-seller\")) {\n      const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n      const seller = sellers[e.target.dataset.sellerName];\n      DOMElements.sellerNameInp.value = seller.name;\n      DOMElements.sellerStreetInp.value = seller.street;\n      DOMElements.sellerCityInp.value = seller.city;\n      DOMElements.sellerPostCodeInp.value = seller.postCode;\n      DOMElements.sellerNipInp.value = seller.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-buyer\")) {\n      const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n      const buyer = buyers[e.target.dataset.buyerName];\n      DOMElements.buyerNameInp.value = buyer.name;\n      DOMElements.buyerStreetInp.value = buyer.street;\n      DOMElements.buyerCityInp.value = buyer.city;\n      DOMElements.buyerPostCodeInp.value = buyer.postCode;\n      DOMElements.buyerNipInp.value = buyer.nip;\n      closeStorageModal();\n    }\n    if (e.target.classList.contains(\"btn--load-account\")) {\n      const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n      const account = accounts[e.target.dataset.accountNumber];\n      DOMElements.payAccountInp.value = account.number;\n      closeStorageModal();\n    }\n  };\n\n  const buildStorageSellersList = function() {\n    const localStorageBuyers = JSON.parse(localStorage.getItem(\"sellers\"));\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const sellers = Object.entries(localStorageBuyers);\n      sellers.forEach(seller => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-seller\");\n        loadButton.dataset.sellerName = seller[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-seller\");\n        deleteButton.dataset.sellerName = seller[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__seller-name\");\n        nameSpan.textContent = seller[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__seller-street\");\n        streetSpan.textContent = seller[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__seller-city\");\n        citySpan.textContent = seller[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__seller-nip\");\n        nipSpan.textContent = seller[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych sprzedawców zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageBuyersList = function() {\n    const localStorageBuyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    if (Object.keys(localStorageBuyers).length > 0) {\n      const buyers = Object.entries(localStorageBuyers);\n      buyers.forEach(buyer => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-buyer\");\n        loadButton.dataset.buyerName = buyer[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-buyer\");\n        deleteButton.dataset.buyerName = buyer[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__buyer-name\");\n        nameSpan.textContent = buyer[1].name;\n\n        const streetSpan = document.createElement(\"span\");\n        streetSpan.classList.add(\"storage-list__buyer-street\");\n        streetSpan.textContent = buyer[1].street;\n\n        const citySpan = document.createElement(\"span\");\n        citySpan.classList.add(\"storage-list__buyer-city\");\n        citySpan.textContent = buyer[1].city;\n\n        const nipSpan = document.createElement(\"span\");\n        nipSpan.classList.add(\"storage-list__buyer-nip\");\n        nipSpan.textContent = buyer[1].nip;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(streetSpan);\n        li.appendChild(citySpan);\n        li.appendChild(nipSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych kontrahentów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageSellerAccountsList = function(accounts) {\n    if (localStorage.getItem(\"accounts\")) {\n      const localStorageAccounts = JSON.parse(localStorage.getItem(\"accounts\"));\n      const accounts = Object.entries(localStorageAccounts);\n      accounts.forEach(account => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-account\");\n        loadButton.dataset.accountNumber = account[1].number;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-account\");\n        deleteButton.dataset.accountNumber = account[1].number;\n        deleteButton.textContent = \"Usuń\";\n\n        const accountNumberSpan = document.createElement(\"span\");\n        accountNumberSpan.classList.add(\"storage-list__account-number\");\n        accountNumberSpan.textContent = \"Numer Konta: \" + account[1].number;\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(accountNumberSpan);\n\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych numerów kont zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const buildStorageItemsList = function() {\n    if (localStorage.getItem(\"items\")) {\n      const localStorageItems = JSON.parse(localStorage.getItem(\"items\"));\n      const items = Object.entries(localStorageItems);\n      items.forEach(item => {\n        const li = document.createElement(\"li\");\n        li.classList.add(\"storage-list__item\");\n\n        const loadButton = document.createElement(\"button\");\n        loadButton.classList.add(\"btn\");\n        loadButton.classList.add(\"btn--choose\");\n        loadButton.classList.add(\"btn--load-item\");\n        loadButton.dataset.itemName = item[1].name;\n        loadButton.textContent = \"Wybierz\";\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"btn\");\n        deleteButton.classList.add(\"btn--choose\");\n        deleteButton.classList.add(\"btn--delete-item\");\n        deleteButton.dataset.itemName = item[1].name;\n        deleteButton.textContent = \"Usuń\";\n\n        const nameSpan = document.createElement(\"span\");\n        nameSpan.classList.add(\"storage-list__item-name\");\n        nameSpan.textContent = item[1].name;\n\n        const priceSpan = document.createElement(\"span\");\n        priceSpan.classList.add(\"storage-list__item-price\");\n        priceSpan.textContent = item[1].netPrice + \"PLN/\" + item[1].unit;\n\n        const taxSpan = document.createElement(\"span\");\n        taxSpan.classList.add(\"storage-list__item-tax\");\n        taxSpan.textContent = item[1].taxRate + \"%\";\n\n        const dateSpan = document.createElement(\"span\");\n        dateSpan.classList.add(\"storage-list__item-date\");\n        dateSpan.textContent = \"(zapisano: \" + item[1].date + \")\";\n\n        li.appendChild(loadButton);\n        li.appendChild(deleteButton);\n        li.appendChild(nameSpan);\n        li.appendChild(priceSpan);\n        li.appendChild(taxSpan);\n        li.appendChild(dateSpan);\n        DOMElements.storageList.appendChild(li);\n      });\n    } else {\n      noLocalStorageDataInfo(\"Nie ma żadnych produktów zapisanych w twojej przeglądarce.\");\n    }\n  };\n\n  const noLocalStorageDataInfo = function(message) {\n    const noDataInfo = document.createElement(\"h3\");\n    noDataInfo.classList.add(\"storage-list__no-data-info\");\n    noDataInfo.textContent = message;\n\n    DOMElements.storageList.appendChild(noDataInfo);\n  };\n\n  const hideListItem = function(element) {\n    element.addEventListener(\"transitionend\", e => {\n      console.log(e.propertyName);\n      if (e.propertyName === \"opacity\") {\n        element.style.display = \"none\";\n      }\n    });\n\n    element.classList.add(\"fade-up\");\n  };\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    DOMElements,\n    displayDraftItemNotFilledInputs,\n    clearDraftItemFieds,\n    rebuildDraftItemsTable,\n    addItemToDraftItemsList,\n    generateDraftSumRow,\n    buildDraftSumValues,\n    generateInvoice,\n    generateInvoicePositions,\n    showCompleteInfo,\n    activatePrintInvoice,\n    closeStorageModal,\n    openStorageModal,\n    hideBackdropModal,\n    displayBackdropModal,\n    fillInputForm,\n    buildStorageItemsList,\n    buildStorageSellerAccountsList,\n    buildStorageBuyersList,\n    buildStorageSellersList,\n    noLocalStorageDataInfo,\n    hideListItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  Storage Controller \n  ----------------------------------------------------*/\n\nconst storageController = (function() {\n  const draftItemsData = {\n    items: [],\n    summaries: {\n      total: 0,\n      totalNetVal: 0,\n      totalTaxVal: 0,\n      taxRates: {\n        tax23: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax8: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax5: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax3: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax0: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n      },\n    },\n  };\n\n  const invoices = {\n    invoice: {},\n  };\n\n  const DOMElements = uiController.DOMElements;\n\n  const createInvoiceObj = function() {\n    const invoice = {\n      details: {\n        document: {\n          type: DOMElements.docTypeInp.value,\n          number: DOMElements.docNumInp.value,\n          place: DOMElements.docPlaceInp.value,\n          date: DOMElements.docDateInp.value,\n          sellDate: DOMElements.docSellDateInp.value,\n        },\n        seller: {\n          name: DOMElements.sellerNameInp.value,\n          street: DOMElements.sellerStreetInp.value,\n          city: DOMElements.sellerCityInp.value,\n          postCode: DOMElements.sellerPostCodeInp.value,\n          nip: DOMElements.sellerNipInp.value,\n        },\n        buyer: {\n          name: DOMElements.buyerNameInp.value,\n          street: DOMElements.buyerStreetInp.value,\n          city: DOMElements.buyerCityInp.value,\n          postCode: DOMElements.buyerPostCodeInp.value,\n          nip: DOMElements.buyerNipInp.value,\n        },\n        payment: {\n          toPay: draftItemsData.summaries.total,\n          method: DOMElements.payMethodInp.value,\n          term: DOMElements.payTermInp.value,\n          account: DOMElements.payAccountInp.value,\n        },\n      },\n      positions: draftItemsData.items,\n    };\n    invoices.invoice = invoice;\n  };\n\n  const deleteDraftItem = function(delID) {\n    draftItemsData.items = draftItemsData.items.filter(item => item.id != delID);\n  };\n\n  const createNewItem = function(id) {\n    const newItem = {\n      // asigning values to newitem\n      id: id,\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      quantity: DOMElements.itemQuantInp.valueAsNumber,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      get netValue() {\n        return this.netPrice * this.quantity;\n      },\n      get taxValue() {\n        return this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n      get total() {\n        return this.netPrice * this.quantity + this.netPrice * this.quantity * (this.taxRate / 100);\n      },\n    };\n    draftItemsData.items.push(newItem);\n  };\n\n  const calculateDraftItemsTotals = function() {\n    const draftItemsTotal = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.total;\n    }, 0);\n    const draftItemsTotalNetValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.netValue;\n    }, 0);\n    const draftItemsTotalTaxValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.taxValue;\n    }, 0);\n\n    draftItemsData.summaries.total = draftItemsTotal;\n    draftItemsData.summaries.totalNetVal = draftItemsTotalNetValue;\n    draftItemsData.summaries.totalTaxVal = draftItemsTotalTaxValue;\n  };\n\n  const claculateDraftTaxRatesValues = function(areTaxRateItems, checkingTaxRate) {\n    if (areTaxRateItems) {\n      const taxRateItemsArr = draftItemsData.items.filter(item => item.taxRate === checkingTaxRate);\n      const taxRateNetValue = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.netValue;\n      }, 0);\n      const taxRateTax = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.taxValue;\n      }, 0);\n      const taxRateTotal = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.total;\n      }, 0);\n\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxValue = taxRateTax;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxTotal = taxRateTotal;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].netValue = taxRateNetValue;\n    }\n  };\n\n  // creating vat rates summaries in storage controller and building summaries rows in draft items table\n  const createDraftVatRatesValues = function() {\n    // boolean values for check if there are some products with specific tax rates\n    const isTax00 = draftItemsData.items.some(item => item.taxRate === 0);\n    const isTax3 = draftItemsData.items.some(item => item.taxRate === 3);\n    const isTax5 = draftItemsData.items.some(item => item.taxRate === 5);\n    const isTax8 = draftItemsData.items.some(item => item.taxRate === 8);\n    const isTax23 = draftItemsData.items.some(item => item.taxRate === 23);\n\n    // calculate summary valuest for each vat rate\n    claculateDraftTaxRatesValues(isTax00, 0);\n    claculateDraftTaxRatesValues(isTax3, 3);\n    claculateDraftTaxRatesValues(isTax5, 5);\n    claculateDraftTaxRatesValues(isTax8, 8);\n    claculateDraftTaxRatesValues(isTax23, 23);\n\n    // create summary row for each existing vat rate\n    uiController.generateDraftSumRow(isTax00, 0);\n    uiController.generateDraftSumRow(isTax3, 3);\n    uiController.generateDraftSumRow(isTax5, 5);\n    uiController.generateDraftSumRow(isTax8, 8);\n    uiController.generateDraftSumRow(isTax23, 23);\n  };\n\n  const saveSellerToLocal = function(seller) {\n    let sellers = {};\n    if (localStorage.getItem(\"sellers\")) {\n      sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    }\n\n    sellers[seller.name] = seller;\n\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const saveBuyerToLocal = function(buyer) {\n    let buyers = {};\n    if (localStorage.getItem(\"buyers\")) {\n      buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    }\n\n    buyers[buyer.name] = buyer;\n\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const saveItemToLocal = function(item) {\n    let items = {};\n    if (localStorage.getItem(\"items\")) {\n      items = JSON.parse(localStorage.getItem(\"items\"));\n    }\n\n    items[item.name] = item;\n\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n  const saveAccountToLocal = function(account) {\n    let accounts = {};\n    if (localStorage.getItem(\"accounts\")) {\n      accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    }\n\n    accounts[account.number] = account;\n\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteSeller = function(sellerName) {\n    const sellers = JSON.parse(localStorage.getItem(\"sellers\"));\n    delete sellers[sellerName];\n    localStorage.setItem(\"sellers\", JSON.stringify(sellers));\n  };\n\n  const deleteBuyer = function(buyerName) {\n    const buyers = JSON.parse(localStorage.getItem(\"buyers\"));\n    delete buyers[buyerName];\n    localStorage.setItem(\"buyers\", JSON.stringify(buyers));\n  };\n\n  const deleteAccount = function(account) {\n    const accounts = JSON.parse(localStorage.getItem(\"accounts\"));\n    delete accounts[account];\n    localStorage.setItem(\"accounts\", JSON.stringify(accounts));\n  };\n\n  const deleteItem = function(name) {\n    const items = JSON.parse(localStorage.getItem(\"items\"));\n    console.log(items[name]);\n    delete items[name];\n    console.log(items);\n    localStorage.setItem(\"items\", JSON.stringify(items));\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    invoices,\n    draftItemsData,\n    createNewItem,\n    deleteDraftItem,\n    createDraftVatRatesValues,\n    createInvoiceObj,\n    calculateDraftItemsTotals,\n    saveSellerToLocal,\n    saveBuyerToLocal,\n    saveItemToLocal,\n    saveAccountToLocal,\n    deleteSeller,\n    deleteBuyer,\n    deleteAccount,\n    deleteItem,\n  };\n})();\n\n/*-----------------------------------------------------\n  App Controller\n----------------------------------------------------*/\n\nconst appController = (function(StorageCtrl, UiCtrl) {\n  const DOMElements = UiCtrl.DOMElements;\n\n  const loadEventListeners = function() {\n    // generate invoice event listener\n    DOMElements.genBtn.addEventListener(\"click\", generateInvoice);\n    // event listeners for draft section\n    DOMElements.addBtn.addEventListener(\"click\", addItem);\n    DOMElements.itemQuantInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemPriceInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemNetValInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.itemTaxRateInp.addEventListener(\"change\", calculateDraftItem);\n    DOMElements.draftItemTable.addEventListener(\"click\", deleteDraftItem);\n\n    // event listeners for verification for inputs section\n    DOMElements.dataInpuForm.addEventListener(\"keyup\", verifyInputField);\n    DOMElements.dataInpuForm.addEventListener(\"change\", verifyInputField);\n    DOMElements.draftItemConstructor.addEventListener(\"keyup\", verifyDraftItemInput);\n\n    DOMElements.payMethodInp.addEventListener(\"change\", isBankAccountCheck);\n\n    // local storage save and load listeners\n    DOMElements.sellerSaveBtn.addEventListener(\"click\", saveSeller);\n    DOMElements.sellerLoadBtn.addEventListener(\"click\", loadSeller);\n    DOMElements.buyerSaveBtn.addEventListener(\"click\", saveBuyer);\n    DOMElements.buyerLoadTrigger.addEventListener(\"click\", retrieveBuyers);\n    DOMElements.accountSaveBtn.addEventListener(\"click\", saveAccount);\n    DOMElements.accountLoadBtn.addEventListener(\"click\", retrieveAccounts);\n    DOMElements.itemSaveBtn.addEventListener(\"click\", saveItem);\n    DOMElements.itemLoadTrigger.addEventListener(\"click\", retrieveItems);\n    DOMElements.storageListModalClose.addEventListener(\"click\", UiCtrl.closeStorageModal);\n    DOMElements.storageList.addEventListener(\"click\", UiCtrl.fillInputForm);\n    DOMElements.storageList.addEventListener(\"click\", deleteLocalStorageEntry);\n  };\n\n  // initialization function\n  const init = function() {\n    loadEventListeners();\n  };\n\n  const isBankAccountCheck = function(e) {\n    if (e.target.value === \"gotówka\" || e.target.value === \"czek\") {\n      DOMElements.payAccountInp.parentElement.style.display = \"none\";\n      DOMElements.payAccountInp.setAttribute(\"disabled\", true);\n      DOMElements.payAccountInp.value = \"\";\n    } else {\n      DOMElements.payAccountInp.parentElement.style.display = \"flex\";\n      DOMElements.payAccountInp.removeAttribute(\"disabled\");\n    }\n  };\n\n  const verifyInputField = function(e) {\n    if (e.target === DOMElements.sellerPostCodeInp || e.target === DOMElements.buyerPostCodeInp) {\n      validationFunctions.validatePostCode(e);\n    } else if (e.target === DOMElements.sellerNipInp || e.target === DOMElements.buyerNipInp) {\n      validationFunctions.validateNip(e);\n    } else if (e.target === DOMElements.payAccountInp) {\n      if (\n        DOMElements.payMethodInp.value !== \"gotówka\" ||\n        DOMElements.payMethodInp.value !== \"pobranie\"\n      ) {\n        validationFunctions.validateAccount(e);\n      }\n    } else {\n      validationFunctions.validateFillInFormInput(e);\n    }\n  };\n\n  const verifyDraftItemInput = function(e) {\n    validationFunctions.validateDraftItemInputs(e);\n  };\n\n  const verifyCompletedForm = function() {\n    let inputs = Array.from(DOMElements.dataInpuForm.getElementsByClassName(\"input\"));\n\n    // If payment method is 'gotówka' cuts this field from inputs array to not validate ir\n    if (DOMElements.payMethodInp.value === \"gotówka\") {\n      inputs = inputs.filter(item => item.classList.contains(\"payment__account\") === false);\n    }\n    if (inputs.some(input => input.value === \"\" || input.value === \" \")) {\n      inputs\n        .filter(input => input.value === \"\" || input.value === \" \")\n        .forEach(input => input.classList.add(\"invalid\"));\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  // validation functions object\n  const validationFunctions = {\n    validatePostCode: function(e) {\n      const reg = /^\\d\\d-\\d\\d\\d$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateNip: function(e) {\n      const reg = /^\\d{3}[- ]?\\d{3}[- ]?\\d\\d[- ]?\\d\\d\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateAccount: function(e) {\n      const reg = /^([A-Za-z]{2})?[ ]?\\d{2}([ ]?\\d{4}){6}\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateFillInFormInput: function(e) {\n      const reg = /[A-Za-z\\d]+/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateDraftItemInputs: function(e) {\n      if (\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemNameInp.value !== \"\" &&\n        DOMElements.itemQuantInp.value !== \"\" &&\n        DOMElements.itemPriceInp.value !== \"\"\n      ) {\n        DOMElements.addBtn.disabled = false;\n      } else {\n        DOMElements.addBtn.disabled = true;\n      }\n    },\n  };\n\n  const addItem = function() {\n    const newItemId = v4();\n    storageController.createNewItem(newItemId);\n    storageController.calculateDraftItemsTotals();\n    UiCtrl.clearDraftItemFieds();\n    UiCtrl.addItemToDraftItemsList(newItemId);\n    StorageCtrl.createDraftVatRatesValues();\n    UiCtrl.buildDraftSumValues();\n    storageController.createDraftVatRatesValues();\n    DOMElements.addBtn.disabled = true;\n  };\n\n  const calculateDraftItem = function() {\n    // calculate and display not filled draft input values and placing it's values as input value\n    UiCtrl.displayDraftItemNotFilledInputs();\n  };\n\n  const deleteDraftItem = function(e) {\n    if (e.target.classList.contains(\"btn--item-del\")) {\n      // determine id of target item\n      const delID = e.target.parentElement.parentElement.dataset.identifier;\n      // delete item from storage array by given id\n      StorageCtrl.deleteDraftItem(delID);\n      // recalculate invoice totals\n      StorageCtrl.calculateDraftItemsTotals();\n      // rebuild draft items table\n      UiCtrl.rebuildDraftItemsTable();\n      // check existing on draft items vat rates\n      StorageCtrl.createDraftVatRatesValues();\n      // rebuild vat summareis table by vat rate for draft items\n      UiCtrl.buildDraftSumValues();\n    }\n  };\n\n  // function for generate new invoice object\n  const generateInvoice = function() {\n    const verified = verifyCompletedForm();\n    if (verified) {\n      // create invoice object in storage\n      StorageCtrl.createInvoiceObj();\n      // generating invoice document\n      UiCtrl.generateInvoice();\n      // generate invoice positions from draft items\n      UiCtrl.generateInvoicePositions(StorageCtrl.invoices.invoice.positions);\n      // Activate print invoice button\n      UiCtrl.activatePrintInvoice();\n    } else {\n      uiController.showCompleteInfo();\n    }\n  };\n\n  const saveSeller = function(e) {\n    e.preventDefault();\n\n    const seller = {\n      name: DOMElements.sellerNameInp.value,\n      street: DOMElements.sellerStreetInp.value,\n      city: DOMElements.sellerCityInp.value,\n      postCode: DOMElements.sellerPostCodeInp.value,\n      nip: DOMElements.sellerNipInp.value,\n    };\n    StorageCtrl.saveSellerToLocal(seller);\n  };\n\n  const loadSeller = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellersList();\n  };\n\n  const saveBuyer = function(e) {\n    e.preventDefault();\n\n    const buyer = {\n      name: DOMElements.buyerNameInp.value,\n      street: DOMElements.buyerStreetInp.value,\n      city: DOMElements.buyerCityInp.value,\n      postCode: DOMElements.buyerPostCodeInp.value,\n      nip: DOMElements.buyerNipInp.value,\n    };\n    StorageCtrl.saveBuyerToLocal(buyer);\n  };\n\n  const retrieveBuyers = function(e) {\n    e.preventDefault();\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageBuyersList();\n  };\n\n  const saveAccount = function(e) {\n    e.preventDefault();\n\n    const account = {\n      number: DOMElements.payAccountInp.value,\n    };\n    StorageCtrl.saveAccountToLocal(account);\n  };\n\n  const retrieveAccounts = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageSellerAccountsList();\n  };\n\n  const saveItem = function(e) {\n    e.preventDefault();\n\n    const now = new Date();\n    const createdDate =\n      now.getUTCFullYear() + \"/\" + (now.getUTCMonth() + 1) + \"/\" + now.getUTCDate();\n\n    const item = {\n      name: DOMElements.itemNameInp.value,\n      unit: DOMElements.itemUnitInp.value,\n      netPrice: DOMElements.itemPriceInp.valueAsNumber,\n      taxRate: parseFloat(DOMElements.itemTaxRateInp.value),\n      date: createdDate,\n    };\n    StorageCtrl.saveItemToLocal(item);\n  };\n\n  const retrieveItems = function(e) {\n    e.preventDefault();\n\n    UiCtrl.openStorageModal();\n    UiCtrl.buildStorageItemsList();\n  };\n\n  const deleteLocalStorageEntry = function(e) {\n    e.preventDefault();\n    const targetClasses = e.target.classList;\n    if (targetClasses.contains(\"btn--delete-seller\")) {\n      StorageCtrl.deleteSeller(e.target.dataset.sellerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-buyer\")) {\n      StorageCtrl.deleteBuyer(e.target.dataset.buyerName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-account\")) {\n      StorageCtrl.deleteAccount(e.target.dataset.accountNumber);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n    if (targetClasses.contains(\"btn--delete-item\")) {\n      console.log(e.target.dataset.itemName);\n      StorageCtrl.deleteItem(e.target.dataset.itemName);\n      UiCtrl.hideListItem(e.target.parentElement);\n    }\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    init,\n  };\n})(storageController, uiController);\n\nappController.init();\n\n// print js script for printing - dependiency - jquery\n$(\".btn--print-inv\").on(\"click\", function() {\n  $(\".invoice\").printThis();\n});\n"]}