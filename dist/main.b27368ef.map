{"version":3,"sources":["node_modules/uuid/lib/rng-browser.js","node_modules/uuid/lib/bytesToUuid.js","node_modules/uuid/v1.js","node_modules/uuid/v4.js","node_modules/uuid/index.js","js/main.js"],"names":["uiController","DOMElements","dataInpuForm","document","querySelector","docTypeInp","docNumInp","docPlaceInp","docDateInp","docSellDateInp","sellerNameInp","sellerStreetInp","sellerCityInp","sellerPostCodeInp","sellerNipInp","buyerNameInp","buyerStreetInp","buyerCityInp","buyerPostCodeInp","buyerNipInp","payMethodInp","payTermInp","payAccountInp","itemNameInp","itemUnitInp","itemQuantInp","itemPriceInp","itemNetValInp","itemTaxRateInp","itemTaxValInp","itemTotValInp","addBtn","draftItemConstructor","draftItemTable","drawtSumTable","itemDelBtn","querySelectorAll","genBtn","printBtn","invoice","invType","invNum","invPlace","invSellDate","invDate","invSellerName","invSellerStr","invSellerCity","invSellerPostCode","invSellerNip","invBuyerName","invBuyerStr","invBuyerCity","invBuyerPostCode","invBuyerNip","invoicePositionsTable","invoicePositionsTableSum","invFinalToPay","invFinalPayMethod","invFinalPayTerm","invFinalAccount","calculateDraftItemNotFilledInputs","value","valueAsNumber","toFixed","parseFloat","clearDraftItemFieds","reset","focus","addItemToDraftItemsList","id","item","storageController","draftItemsData","items","find","newRow","createElement","classList","add","dataset","identifier","innerHTML","name","unit","quantity","netPrice","netValue","taxRate","taxValue","total","appendChild","clearInnerHtml","elem","rebuildDraftItemsTable","forEach","buildDraftSumValues","draftSumRow","summaries","totalNetVal","totalTaxVal","generateDraftSumRow","areTaxRateItems","checkingTaxRate","checkedTaxRate","taxRates","taxRatefinalRow","taxTotal","generateInvoice","invoiceObj","invoicesData","details","textContent","type","number","place","date","sellDate","seller","street","city","postCode","nip","buyer","payment","toPay","method","term","account","generateInvoicePositions","positionsArray","indexOf","invoiceSumRow","isTax23","some","isTax8","isTax5","isTax3","isTax00","generateInvoiceSumRow","isTaxRate","vatRatefinalrow","showCompleteInfo","setTimeout","hidemodal","remove","activatePrintInvoice","removeAttribute","tax23","tax8","tax5","tax3","tax0","DOM","createInvoiceObj","positions","deleteDraftItem","delID","console","log","filter","createNewItem","newItem","push","calculateDraftItemsTotals","draftItemsTotal","reduce","acc","draftItemsTotalNetValue","draftItemsTotalTaxValue","claculateDraftTaxRatesValues","taxRateItemsArr","taxRateNetValue","taxRateTax","taxRateTotal","createDraftVatRatesValues","areThere00","areThere3","areThere5","areThere8","areThere23","appController","StorageCtrl","UiCtrl","loadEventListeners","addEventListener","addItem","calculateDraftItem","verifyInputField","verifyDraftItemInput","willBeAccount","init","e","target","parentElement","style","display","setAttribute","validationFunctions","validatePostCode","validateNip","validateAccount","validateFillInFormInput","validateDraftItemInputs","verifyCompletedForm","inputs","Array","from","getElementsByClassName","contains","input","reg","test","disabled","newItemId","verified","$","on","printThis"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.b27368ef.map","sourceRoot":"..","sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","import { v4 } from \"uuid\";\n\nconst uiController = (function() {\n  // defining DOM elements\n  const DOMElements = {\n    // -------------------------------------------------------\n    // Invoice details input elements\n    // -------------------------------------------------------\n    dataInpuForm: document.querySelector(\".data-form\"),\n    // document data inputs\n    docTypeInp: document.querySelector(\".data__doc-type\"),\n    docNumInp: document.querySelector(\".data__doc-number\"),\n    docPlaceInp: document.querySelector(\".data__doc-place\"),\n    docDateInp: document.querySelector(\".data__doc-date\"),\n    docSellDateInp: document.querySelector(\".data__doc-sell-date\"),\n    // seller data inputs\n    sellerNameInp: document.querySelector(\".data__seller-name\"),\n    sellerStreetInp: document.querySelector(\".data__seller-street\"),\n    sellerCityInp: document.querySelector(\".data__seller-city\"),\n    sellerPostCodeInp: document.querySelector(\".data__seller-post-code\"),\n    sellerNipInp: document.querySelector(\".data__seller-nip\"),\n    // buyer data inputs\n    buyerNameInp: document.querySelector(\".data__buyer-name\"),\n    buyerStreetInp: document.querySelector(\".data__buyer-street\"),\n    buyerCityInp: document.querySelector(\".data__buyer-city\"),\n    buyerPostCodeInp: document.querySelector(\".data__buyer-post-code\"),\n    buyerNipInp: document.querySelector(\".data__buyer-nip\"),\n    // payment terms inputs\n    payMethodInp: document.querySelector(\".payment__method\"),\n    payTermInp: document.querySelector(\".payment__term\"),\n    payAccountInp: document.querySelector(\".payment__account\"),\n    // draft positions inputs\n    itemNameInp: document.querySelector(\".draft-item__name\"),\n    itemUnitInp: document.querySelector(\".draft-item__unit\"),\n    itemQuantInp: document.querySelector(\".draft-item__quantity\"),\n    itemPriceInp: document.querySelector(\".draft-item__price\"),\n    itemNetValInp: document.querySelector(\".draft-item__net-value\"),\n    itemTaxRateInp: document.querySelector(\".draft-item__tax-rate\"),\n    itemTaxValInp: document.querySelector(\".draft-item__tax-value\"),\n    itemTotValInp: document.querySelector(\".draft-item__total-value\"),\n    // draft add button\n    addBtn: document.querySelector(\".btn--add-item\"),\n    // draft itens table\n    draftItemConstructor: document.querySelector(\".draft-item__constructor\"),\n    draftItemTable: document.querySelector(\".draft-added-items\"),\n    drawtSumTable: document.querySelector(\".draft__summary\"),\n    itemDelBtn: document.querySelectorAll(\".btn--item-del\"),\n    // button generate invoice\n    genBtn: document.querySelector(\".btn--gen-inv\"),\n    printBtn: document.querySelector(\".btn--print-inv\"),\n\n    // -------------------------------------------------------\n    //output invoice elements\n    // -------------------------------------------------------\n    invoice: document.querySelector(\".invoice\"),\n    // invoice heading\n    invType: document.querySelector(\".invoice__type\"),\n    invNum: document.querySelector(\".invoice__number\"),\n    invPlace: document.querySelector(\".invoice__place\"),\n    invSellDate: document.querySelector(\".invoice__sell-date\"),\n    invDate: document.querySelector(\".invoice__place-date\"),\n    // invoice seller details\n    invSellerName: document.querySelector(\".invoice__seller-name\"),\n    invSellerStr: document.querySelector(\".invoice__seller-street\"),\n    invSellerCity: document.querySelector(\".invoice__seller-city\"),\n    invSellerPostCode: document.querySelector(\".seller__post-code\"),\n    invSellerNip: document.querySelector(\".invoice__seller-nip\"),\n    // invoice buyer details\n    invBuyerName: document.querySelector(\".invoice__buyer-name\"),\n    invBuyerStr: document.querySelector(\".invoice__buyer-street\"),\n    invBuyerCity: document.querySelector(\".invoice__buyer-city\"),\n    invBuyerPostCode: document.querySelector(\".buyer__post-code\"),\n    invBuyerNip: document.querySelector(\".invoice__buyer-nip\"),\n    // Invoice positions items table\n    invoicePositionsTable: document.querySelector(\".invoice__positions-place\"),\n    invoicePositionsTableSum: document.querySelector(\".invoice__positions-summary\"),\n    // invoice final details\n    invFinalToPay: document.querySelector(\".invoice__final-to-pay\"),\n    invFinalPayMethod: document.querySelector(\".invoice__final-payment-method\"),\n    invFinalPayTerm: document.querySelector(\".invoice__final-payment-term\"),\n    invFinalAccount: document.querySelector(\".invoice__final-payment__account\"),\n  };\n\n  // calculating draft item taxes in draft item constructor form\n  const calculateDraftItemNotFilledInputs = function() {\n    // if there is fullfilled draft item quantity and net price can calculate:\n    if (DOMElements.itemQuantInp.value !== \"\" && DOMElements.itemPriceInp.value !== \"\") {\n      // net value ptoduct price * quantity\n      DOMElements.itemNetValInp.value = (\n        DOMElements.itemPriceInp.valueAsNumber * DOMElements.itemQuantInp.valueAsNumber\n      ).toFixed(2);\n      // tax value\n      DOMElements.itemTaxValInp.value = (\n        DOMElements.itemQuantInp.valueAsNumber *\n        DOMElements.itemPriceInp.valueAsNumber *\n        parseFloat(DOMElements.itemTaxRateInp.value / 100)\n      ).toFixed(2);\n      // item total price\n      DOMElements.itemTotValInp.value =\n        DOMElements.itemNetValInp.valueAsNumber + DOMElements.itemTaxValInp.valueAsNumber;\n    }\n  };\n\n  // clearing draft item input fields\n  const clearDraftItemFieds = function() {\n    DOMElements.draftItemConstructor.reset();\n    DOMElements.itemNameInp.focus();\n  };\n\n  // add item to draft table\n  const addItemToDraftItemsList = function(id) {\n    const item = storageController.draftItemsData.items.find(item => item.id === id);\n    // create newtable row\n    const newRow = document.createElement(\"tr\");\n    newRow.classList.add(\"draft__position\");\n    newRow.id = `draft-item-${item.id}`;\n    newRow.dataset.identifier = `${item.id}`;\n    newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n    DOMElements.draftItemTable.appendChild(newRow);\n  };\n\n  // helper function for cleat innner HTML in given element\n  const clearInnerHtml = function(elem) {\n    elem.innerHTML = \"\";\n  };\n\n  // building draft items table from start\n  const rebuildDraftItemsTable = function() {\n    clearInnerHtml(DOMElements.draftItemTable);\n    // for each drafted item perform same action\n    storageController.draftItemsData.items.forEach(item => {\n      // create newtable row\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"draft__position\");\n      newRow.id = `draft-item-${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n      <td class=\"draft__item-delete\"><button class=\"btn btn--item-del\">usuń</button></td>\n      <td class=\"draft__item-name\">${item.name}</td>\n      <td class=\"draft__item-unit\">${item.unit}</td>\n      <td class=\"draft__item-quantity\">${item.quantity.toFixed(2)}</td>\n      <td class=\"draft__item-price\">${item.netPrice.toFixed(2)}</td>\n      <td class=\"draft__item-net-value\">${item.netValue.toFixed(2)}</td>\n      <td class=\"draft__item-tax-rate\">${item.taxRate}%</td>\n      <td class=\"draft__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n      <td class=\"draft__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.draftItemTable.appendChild(newRow);\n    });\n  };\n\n  // building draft sum values in draft table\n  const buildDraftSumValues = function() {\n    // remove all content from summary draft table\n    clearInnerHtml(DOMElements.drawtSumTable);\n\n    const draftSumRow = document.createElement(\"tr\");\n    draftSumRow.classList.add(\"draft__summary-row\");\n    draftSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"draft__summary-legend\">Razem:</th>\n    <th class=\"draft__summary-net-value\">${storageController.draftItemsData.summaries.totalNetVal.toFixed(\n      2\n    )}</th>\n    <th class=\"\"></th>\n    <th class=\"draft__summary-vat-value\">${storageController.draftItemsData.summaries.totalTaxVal.toFixed(\n      2\n    )}</th>\n    <th class=\"draft__summary-total\">${storageController.draftItemsData.summaries.total.toFixed(\n      2\n    )}</th>`;\n    DOMElements.drawtSumTable.appendChild(draftSumRow);\n  };\n\n  const generateDraftSumRow = function(areTaxRateItems, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (areTaxRateItems) {\n      const taxRatefinalRow = document.createElement(\"tr\");\n      taxRatefinalRow.classList.add(\"draft__summary-row\");\n      taxRatefinalRow.innerHTML = `\n      <td colspan=\"5\" class=\"draft__summary-legend\">W tym:</td>\n      <td class=\"draft__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n      <td class=\"\">${checkingTaxRate}%</td>\n      <td class=\"draft__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n      <td class=\"draft__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.drawtSumTable.appendChild(taxRatefinalRow);\n    }\n  };\n\n  const generateInvoice = function() {\n    const invoiceObj = storageController.invoicesData.invoice.details;\n    // inserting details of the invoice\n    DOMElements.invType.textContent = `${invoiceObj.document.type}`;\n    DOMElements.invNum.textContent = `nr ${invoiceObj.document.number}`;\n    DOMElements.invPlace.textContent = `Miejsce wystawienia: ${invoiceObj.document.place}`;\n    DOMElements.invDate.textContent = `Data wystawienia: ${invoiceObj.document.date}`;\n    DOMElements.invSellDate.textContent = `Data sprzedaży: ${invoiceObj.document.sellDate}`;\n    DOMElements.invSellerName.textContent = `${invoiceObj.seller.name}`;\n    DOMElements.invSellerStr.textContent = `${invoiceObj.seller.street}`;\n    DOMElements.invSellerCity.textContent = `${invoiceObj.seller.city}`;\n    DOMElements.invSellerPostCode.textContent = `${invoiceObj.seller.postCode}`;\n    DOMElements.invSellerNip.textContent = `NIP: ${invoiceObj.seller.nip}`;\n    DOMElements.invBuyerName.textContent = `${invoiceObj.buyer.name}`;\n    DOMElements.invBuyerStr.textContent = `${invoiceObj.buyer.street}`;\n    DOMElements.invBuyerCity.textContent = `${invoiceObj.buyer.city}`;\n    DOMElements.invBuyerPostCode.textContent = `${invoiceObj.buyer.postCode}`;\n    DOMElements.invBuyerNip.textContent = `NIP: ${invoiceObj.buyer.nip}`;\n    DOMElements.invFinalToPay.textContent = `Do zapłaty: ${invoiceObj.payment.toPay.toFixed(\n      2\n    )} PLN`;\n    DOMElements.invFinalPayMethod.textContent = `Sposób płatności: ${invoiceObj.payment.method}`;\n    DOMElements.invFinalPayTerm.textContent = `Termin płatności: ${invoiceObj.payment.term}`;\n    // print account number if choosen method is different than cash\n    if (invoiceObj.payment.method !== \"gotówka\") {\n      DOMElements.invFinalAccount.textContent = `Konto: ${invoiceObj.payment.account}`;\n    } else {\n      DOMElements.invFinalAccount.textContent = ``;\n    }\n  };\n\n  const generateInvoicePositions = function(positionsArray) {\n    clearInnerHtml(DOMElements.invoicePositionsTable);\n    clearInnerHtml(DOMElements.invoicePositionsTableSum);\n\n    positionsArray.forEach(item => {\n      const newRow = document.createElement(\"tr\");\n      newRow.classList.add(\"invoice__position\");\n      newRow.id = `invoice-item${item.id}`;\n      newRow.dataset.identifier = `${item.id}`;\n      newRow.innerHTML = `\n          <td class=\"invoice__item-lp\">${positionsArray.indexOf(item) + 1}</td>\n          <td class=\"invoice__item-name\">${item.name}</td>\n          <td class=\"invoice__item-unit\">${item.unit}</td>\n          <td class=\"invoice__item-quantity\">${item.quantity.toFixed(2)}</td>\n          <td class=\"invoice__item-price\">${item.netPrice.toFixed(2)}</td>\n          <td class=\"invoice__item-net-value\">${item.netValue.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-rate\">${item.taxRate.toFixed(2)}</td>\n          <td class=\"invoice__item-tax-value\">${item.taxValue.toFixed(2)}</td>\n          <td class=\"invoice__item-total-value\">${item.total.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(newRow);\n    });\n\n    // invoice items summaries from draft items summaries section\n    const totalNetVal = storageController.draftItemsData.summaries.totalNetVal;\n    const totalTaxVal = storageController.draftItemsData.summaries.totalTaxVal;\n    const total = storageController.draftItemsData.summaries.total;\n\n    const invoiceSumRow = document.createElement(\"tr\");\n    invoiceSumRow.classList.add(\"invoice__summary-row\");\n    invoiceSumRow.innerHTML = `\n    <th colspan=\"5\" class=\"invoice__summary-legend\">Razem:</th>\n    <th class=\"invoice__summary-net-value\">${totalNetVal.toFixed(2)}</th>\n    <th class=\"\"></th>\n    <th class=\"invoice__summary-vat-value\">${totalTaxVal.toFixed(2)}</th>\n    <th class=\"invoice__summary-total\">${total.toFixed(2)}</th>`;\n    DOMElements.invoicePositionsTable.appendChild(invoiceSumRow);\n\n    // generate boolean values for check it there are some products with specific tax rates\n    const isTax23 = positionsArray.some(item => item.taxRate === 23);\n    const isTax8 = positionsArray.some(item => item.taxRate === 8);\n    const isTax5 = positionsArray.some(item => item.taxRate === 5);\n    const isTax3 = positionsArray.some(item => item.taxRate === 3);\n    const isTax00 = positionsArray.some(item => item.taxRate === 0);\n\n    //  generate summaries by vat rate\n    generateInvoiceSumRow(isTax23, 23);\n    generateInvoiceSumRow(isTax8, 8);\n    generateInvoiceSumRow(isTax5, 5);\n    generateInvoiceSumRow(isTax3, 3);\n    generateInvoiceSumRow(isTax00, 0);\n  };\n\n  // generate invoice positions sum row for each existing in draft items tavle tax rate determined by first argument the boolean value\n  const generateInvoiceSumRow = function(isTaxRate, checkingTaxRate) {\n    const checkedTaxRate =\n      storageController.draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`];\n    if (isTaxRate) {\n      const vatRatefinalrow = document.createElement(\"tr\");\n      vatRatefinalrow.classList.add(\"invoice__summary-row\");\n      vatRatefinalrow.innerHTML = `\n        <td colspan=\"5\" class=\"invoice__summary-legend\">W tym:</td>\n        <td class=\"invoice__summary-net-value\">${checkedTaxRate.netValue.toFixed(2)}</td>\n        <td class=\"\">${checkingTaxRate}%</td>\n        <td class=\"invoice__summary-vat-value\">${checkedTaxRate.taxValue.toFixed(2)}</td>\n        <td class=\"invoice__summary-total\">${checkedTaxRate.taxTotal.toFixed(2)}</td>`;\n      DOMElements.invoicePositionsTable.appendChild(vatRatefinalrow);\n    }\n  };\n\n  // showing modal complete\n  const showCompleteInfo = function() {\n    document.querySelector(\".not-completed-form-modal\").classList.add(\"visible\");\n    setTimeout(hidemodal, 2500);\n\n    function hidemodal() {\n      document.querySelector(\".not-completed-form-modal\").classList.remove(\"visible\");\n    }\n  };\n\n  const activatePrintInvoice = function() {\n    DOMElements.printBtn.removeAttribute(\"disabled\");\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    DOMElements,\n    calculateDraftItemNotFilledInputs,\n    clearDraftItemFieds,\n    rebuildDraftItemsTable,\n    addItemToDraftItemsList,\n    generateDraftSumRow,\n    buildDraftSumValues,\n    generateInvoice,\n    generateInvoicePositions,\n    showCompleteInfo,\n    activatePrintInvoice,\n  };\n})();\n\nconst storageController = (function() {\n  const draftItemsData = {\n    items: [],\n    summaries: {\n      total: 0,\n      totalNetVal: 0,\n      totalTaxVal: 0,\n      taxRates: {\n        tax23: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax8: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax5: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax3: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n        tax0: {\n          netValue: 0,\n          taxValue: 0,\n          taxTotal: 0,\n        },\n      },\n    },\n  };\n\n  const invoicesData = {\n    invoice: {},\n  };\n\n  const DOM = uiController.DOMElements;\n\n  const createInvoiceObj = function() {\n    const invoice = {\n      details: {\n        document: {\n          type: DOM.docTypeInp.value,\n          number: DOM.docNumInp.value,\n          place: DOM.docPlaceInp.value,\n          date: DOM.docDateInp.value,\n          sellDate: DOM.docSellDateInp.value,\n        },\n        seller: {\n          name: DOM.sellerNameInp.value,\n          street: DOM.sellerStreetInp.value,\n          city: DOM.sellerCityInp.value,\n          postCode: DOM.sellerPostCodeInp.value,\n          nip: DOM.sellerNipInp.value,\n        },\n        buyer: {\n          name: DOM.buyerNameInp.value,\n          street: DOM.buyerStreetInp.value,\n          city: DOM.buyerCityInp.value,\n          postCode: DOM.buyerPostCodeInp.value,\n          nip: DOM.buyerNipInp.value,\n        },\n        payment: {\n          toPay: draftItemsData.summaries.total,\n          method: DOM.payMethodInp.value,\n          term: DOM.payTermInp.value,\n          account: DOM.payAccountInp.value,\n        },\n      },\n      positions: draftItemsData.items,\n    };\n    invoicesData.invoice = invoice;\n  };\n\n  const deleteDraftItem = function(delID) {\n    console.log(delID);\n    draftItemsData.items = draftItemsData.items.filter(item => item.id != delID);\n    console.log(draftItemsData);\n  };\n\n  const createNewItem = function(id) {\n    const newItem = {\n      // asigning values to newitem\n      id: id,\n      name: DOM.itemNameInp.value,\n      unit: DOM.itemUnitInp.value,\n      quantity: DOM.itemQuantInp.valueAsNumber,\n      netPrice: DOM.itemPriceInp.valueAsNumber,\n      netValue: DOM.itemNetValInp.valueAsNumber,\n      taxRate: parseFloat(DOM.itemTaxRateInp.value),\n      taxValue: DOM.itemTaxValInp.valueAsNumber,\n      total: DOM.itemTotValInp.valueAsNumber,\n    };\n    draftItemsData.items.push(newItem);\n  };\n\n  const calculateDraftItemsTotals = function() {\n    const draftItemsTotal = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.total;\n    }, 0);\n    const draftItemsTotalNetValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.netValue;\n    }, 0);\n    const draftItemsTotalTaxValue = draftItemsData.items.reduce((acc, item) => {\n      return acc + item.taxValue;\n    }, 0);\n\n    draftItemsData.summaries.total = draftItemsTotal;\n    draftItemsData.summaries.totalNetVal = draftItemsTotalNetValue;\n    draftItemsData.summaries.totalTaxVal = draftItemsTotalTaxValue;\n  };\n\n  const claculateDraftTaxRatesValues = function(areTaxRateItems, checkingTaxRate) {\n    if (areTaxRateItems) {\n      const taxRateItemsArr = draftItemsData.items.filter(item => item.taxRate === checkingTaxRate);\n      const taxRateNetValue = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.netValue;\n      }, 0);\n      const taxRateTax = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.taxValue;\n      }, 0);\n      const taxRateTotal = taxRateItemsArr.reduce((acc, item) => {\n        return acc + item.total;\n      }, 0);\n\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxValue = taxRateTax;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].taxTotal = taxRateTotal;\n      draftItemsData.summaries.taxRates[`tax${checkingTaxRate}`].netValue = taxRateNetValue;\n    } else {\n      return;\n    }\n  };\n\n  // creating vat rates summaries in storage controller and building summaries rows in draft items table\n  const createDraftVatRatesValues = function() {\n    // boolean values for check if there are some products with specific tax rates\n    const areThere00 = draftItemsData.items.some(item => item.taxRate === 0);\n    const areThere3 = draftItemsData.items.some(item => item.taxRate === 3);\n    const areThere5 = draftItemsData.items.some(item => item.taxRate === 5);\n    const areThere8 = draftItemsData.items.some(item => item.taxRate === 8);\n    const areThere23 = draftItemsData.items.some(item => item.taxRate === 23);\n\n    // calculate summary valuest for each vat rate\n    claculateDraftTaxRatesValues(areThere23, 23);\n    claculateDraftTaxRatesValues(areThere8, 8);\n    claculateDraftTaxRatesValues(areThere5, 5);\n    claculateDraftTaxRatesValues(areThere3, 3);\n    claculateDraftTaxRatesValues(areThere00, 0);\n\n    // create summary row for each existing vat rate\n    uiController.generateDraftSumRow(areThere23, 23);\n    uiController.generateDraftSumRow(areThere8, 8);\n    uiController.generateDraftSumRow(areThere5, 5);\n    uiController.generateDraftSumRow(areThere3, 3);\n    uiController.generateDraftSumRow(areThere00, 0);\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    invoicesData,\n    draftItemsData,\n    createNewItem,\n    deleteDraftItem,\n    createDraftVatRatesValues,\n    createInvoiceObj,\n    calculateDraftItemsTotals,\n  };\n})();\n\nconst appController = (function(StorageCtrl, UiCtrl) {\n  const DOM = UiCtrl.DOMElements;\n\n  const loadEventListeners = function() {\n    // generate invoice event listener\n    DOM.genBtn.addEventListener(\"click\", generateInvoice);\n    // event listeners for draft section\n    DOM.addBtn.addEventListener(\"click\", addItem);\n    DOM.itemQuantInp.addEventListener(\"change\", calculateDraftItem);\n    DOM.itemPriceInp.addEventListener(\"change\", calculateDraftItem);\n    DOM.itemNetValInp.addEventListener(\"change\", calculateDraftItem);\n    DOM.itemTaxRateInp.addEventListener(\"change\", calculateDraftItem);\n    DOM.draftItemTable.addEventListener(\"click\", deleteDraftItem);\n\n    // event listeners for verification for inputs section\n    DOM.dataInpuForm.addEventListener(\"keyup\", verifyInputField);\n    DOM.dataInpuForm.addEventListener(\"change\", verifyInputField);\n    DOM.draftItemConstructor.addEventListener(\"keyup\", verifyDraftItemInput);\n\n    DOM.payMethodInp.addEventListener(\"change\", willBeAccount);\n  };\n\n  // initialization function\n  const init = function() {\n    loadEventListeners();\n  };\n  const willBeAccount = function(e) {\n    if (e.target.value === \"gotówka\") {\n      DOM.payAccountInp.parentElement.style.display = \"none\";\n      DOM.payAccountInp.setAttribute(\"disabled\", true);\n      DOM.payAccountInp.value = \"\";\n    } else {\n      DOM.payAccountInp.parentElement.style.display = \"flex\";\n      DOM.payAccountInp.removeAttribute(\"disabled\");\n    }\n  };\n\n  const verifyInputField = function(e) {\n    if (e.target === DOM.sellerPostCodeInp || e.target === DOM.buyerPostCodeInp) {\n      validationFunctions.validatePostCode(e);\n    } else if (e.target === DOM.sellerNipInp || e.target === DOM.buyerNipInp) {\n      validationFunctions.validateNip(e);\n    } else if (e.target === DOM.payAccountInp) {\n      if (DOM.payMethodInp.value === \"gotówka\" || DOM.payMethodInp.value === \"pobranie\") {\n        return;\n      } else {\n        validationFunctions.validateAccount(e);\n      }\n    } else {\n      validationFunctions.validateFillInFormInput(e);\n    }\n  };\n\n  const verifyDraftItemInput = function(e) {\n    validationFunctions.validateDraftItemInputs(e);\n  };\n\n  const verifyCompletedForm = function() {\n    let inputs = Array.from(document.querySelector(\".data-form\").getElementsByClassName(\"input\"));\n\n    // opisać że moijamy payment account gdy wybrana forma płatności to gotówka\n    if (DOM.payMethodInp.value === \"gotówka\") {\n      inputs = inputs.filter(item => {\n        return item.classList.contains(\"payment__account\") === false;\n      });\n    }\n    if (inputs.some(input => input.value === \"\" || input.value === \" \")) {\n      inputs\n        .filter(input => input.value === \"\" || input.value === \" \")\n        .forEach(input => input.classList.add(\"invalid\"));\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  // validation functions object\n  const validationFunctions = {\n    validatePostCode: function(e) {\n      const reg = /^\\d\\d-\\d\\d\\d$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateNip: function(e) {\n      const reg = /^\\d{3}[- ]?\\d{3}[- ]?\\d\\d[- ]?\\d\\d\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateAccount: function(e) {\n      const reg = /^([A-Za-z]{2})?[ ]?\\d{2}([ ]?\\d{4}){6}\\s?$/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateFillInFormInput: function(e) {\n      reg = /[A-Za-z\\d]+/;\n      if (!reg.test(e.target.value)) {\n        e.target.classList.add(\"invalid\");\n      } else {\n        e.target.classList.remove(\"invalid\");\n      }\n    },\n    validateDraftItemInputs: function(e) {\n      if (\n        DOM.itemNameInp.value !== \"\" &&\n        DOM.itemNameInp.value !== \" \" &&\n        DOM.itemQuantInp.value !== \"\" &&\n        DOM.itemPriceInp.value !== \"\"\n      ) {\n        DOM.addBtn.disabled = false;\n      } else {\n        DOM.addBtn.disabled = true;\n      }\n    },\n  };\n\n  const addItem = function() {\n    const newItemId = v4();\n    storageController.createNewItem(newItemId);\n    storageController.calculateDraftItemsTotals();\n    UiCtrl.clearDraftItemFieds();\n    UiCtrl.addItemToDraftItemsList(newItemId);\n    StorageCtrl.createDraftVatRatesValues();\n    UiCtrl.buildDraftSumValues();\n    storageController.createDraftVatRatesValues();\n    DOM.addBtn.disabled = true;\n  };\n\n  const calculateDraftItem = function() {\n    // calculate not filled draft input values and placing its values in input\n    UiCtrl.calculateDraftItemNotFilledInputs();\n  };\n\n  const deleteDraftItem = function(e) {\n    if (e.target.classList.contains(\"btn--item-del\")) {\n      // determine id of target item\n      const delID = e.target.parentElement.parentElement.dataset.identifier;\n      // delete item from storage array by given id\n      StorageCtrl.deleteDraftItem(delID);\n      // recalculate invoice totals\n      storageController.calculateDraftItemsTotals();\n      // rebuild draft items table\n      UiCtrl.rebuildDraftItemsTable();\n      // check existing on draft items vat rates\n      StorageCtrl.createDraftVatRatesValues();\n      // rebuild vat summareis table by vat rate for draft items\n      UiCtrl.buildDraftSumValues();\n    } else {\n      return;\n    }\n  };\n\n  // function for generate new invoice object\n  const generateInvoice = function() {\n    const verified = verifyCompletedForm();\n    if (verified) {\n      // create invoice object in storage\n      StorageCtrl.createInvoiceObj();\n      // generating invoice document\n      UiCtrl.generateInvoice();\n      // generate invoice positions from draft items\n      UiCtrl.generateInvoicePositions(StorageCtrl.invoicesData.invoice.positions);\n      // Activate print invoice button\n      UiCtrl.activatePrintInvoice();\n    } else {\n      uiController.showCompleteInfo();\n    }\n  };\n\n  /*++++++++++++++++++++++++++++++++++++++++++++++++++++++\n  Revealed methods \n  ----------------------------------------------------*/\n  return {\n    init,\n  };\n})(storageController, uiController);\n\nappController.init();\n\n// print js script for printing\n$(\".btn--print-inv\").on(\"click\", function() {\n  $(\".invoice\").printThis();\n});\n"]}