{"version":3,"sources":["printThis.js"],"names":["$","appendContent","$el","content","append","jquery","clone","appendBody","$body","$element","opt","$content","elementSelector","$originalElements","formValues","find","each","index","item","val","eq","removeScripts","remove","printContainer","appendTo","children","fn","printThis","options","extend","defaults","jQuery","strFrameName","Date","getTime","window","location","hostname","document","domain","navigator","userAgent","match","iframeSrc","printI","createElement","name","id","className","body","appendChild","src","$iframe","debug","css","doctypeString","setDocType","doctype","win","doc","get","contentWindow","contentDocument","open","write","close","$doc","baseURL","contents","$head","$base","base","length","attr","protocol","host","importCSS","href","media","importStyle","outerHTML","pageTitle","loadCSS","isArray","value","tag","copyTagClasses","indexOf","addClass","header","canvas","canvasId","addBack","cid","data","$src","getContext","drawImage","removeData","removeInline","isFunction","removeAttr","footer","hasClass","frames","focus","queryCommandSupported","execCommand","print","printDelay"],"mappings":"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","file":"printThis.c0c649e5.map","sourceRoot":"..","sourcesContent":["/*\n * printThis v1.12.3\n * @desc Printing plug-in for jQuery\n * @author Jason Day\n *\n * Resources (based on) :\n *              jPrintArea: http://plugins.jquery.com/project/jPrintArea\n *              jqPrint: https://github.com/permanenttourist/jquery.jqprint\n *              Ben Nadal: http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm\n *\n * Licensed under the MIT licence:\n *              http://www.opensource.org/licenses/mit-license.php\n *\n * (c) Jason Day 2015\n *\n * Usage:\n *\n *  $(\"#mySelector\").printThis({\n *      debug: false,               // show the iframe for debugging\n *      importCSS: true,            // import page CSS\n *      importStyle: false,         // import style tags\n *      printContainer: true,       // grab outer container as well as the contents of the selector\n *      loadCSS: \"path/to/my.css\",  // path to additional css file - us an array [] for multiple\n *      pageTitle: \"\",              // add title to print page\n *      removeInline: false,        // remove all inline styles from print elements\n *      printDelay: 333,            // variable print delay\n *      header: null,               // prefix to html\n *      footer: null,               // postfix to html\n *      base: false,                // preserve the BASE tag, or accept a string for the URL\n *      formValues: true,           // preserve input/form values\n *      canvas: false,              // copy canvas elements (experimental)\n *      doctypeString: '...',       // enter a different doctype for older markup\n *      removeScripts: false,       // remove script tags from print content\n *      copyTagClasses: false       // copy classes from the html & body tag\n *  });\n *\n * Notes:\n *  - the loadCSS will load additional css (with or without @media print) into the iframe, adjusting layout\n */\n;\n(function($) {\n\n  function appendContent($el, content) {\n    if (!content) return;\n\n    // Simple test for a jQuery element\n    $el.append(content.jquery ? content.clone() : content);\n  }\n\n  function appendBody($body, $element, opt) {\n    // Clone for safety and convenience\n    // Calls clone(withDataAndEvents = true) to copy form values.\n    var $content = $element.clone(opt.formValues);\n\n    if (opt.formValues) {\n      // Copy original select and textarea values to their cloned counterpart\n      // Makes up for inability to clone select and textarea values with clone(true)\n      copyValues($element, $content, 'select, textarea');\n    }\n\n    if (opt.removeScripts) {\n      $content.find('script').remove();\n    }\n\n    if (opt.printContainer) {\n      // grab $.selector as container\n      $content.appendTo($body);\n    } else {\n      // otherwise just print interior elements of container\n      $content.each(function() {\n        $(this).children().appendTo($body)\n      });\n    }\n  }\n\n  // Copies values from origin to clone for passed in elementSelector\n  function copyValues(origin, clone, elementSelector) {\n    var $originalElements = origin.find(elementSelector);\n\n    clone.find(elementSelector).each(function(index, item) {\n      $(item).val($originalElements.eq(index).val());\n    });\n  }\n\n  var opt;\n  $.fn.printThis = function(options) {\n    opt = $.extend({}, $.fn.printThis.defaults, options);\n    var $element = this instanceof jQuery ? this : $(this);\n\n    var strFrameName = \"printThis-\" + (new Date()).getTime();\n\n    if (window.location.hostname !== document.domain && navigator.userAgent.match(/msie/i)) {\n      // Ugly IE hacks due to IE not inheriting document.domain from parent\n      // checks if document.domain is set by comparing the host name against document.domain\n      var iframeSrc = \"javascript:document.write(\\\"<head><script>document.domain=\\\\\\\"\" + document.domain + \"\\\\\\\";</s\" + \"cript></head><body></body>\\\")\";\n      var printI = document.createElement('iframe');\n      printI.name = \"printIframe\";\n      printI.id = strFrameName;\n      printI.className = \"MSIE\";\n      document.body.appendChild(printI);\n      printI.src = iframeSrc;\n\n    } else {\n      // other browsers inherit document.domain, and IE works if document.domain is not explicitly set\n      var $frame = $(\"<iframe id='\" + strFrameName + \"' name='printIframe' />\");\n      $frame.appendTo(\"body\");\n    }\n\n    var $iframe = $(\"#\" + strFrameName);\n\n    // show frame if in debug mode\n    if (!opt.debug) $iframe.css({\n      position: \"absolute\",\n      width: \"0px\",\n      height: \"0px\",\n      left: \"-600px\",\n      top: \"-600px\"\n    });\n\n    // $iframe.ready() and $iframe.load were inconsistent between browsers\n    setTimeout(function() {\n\n      // Add doctype to fix the style difference between printing and render\n      function setDocType($iframe, doctype) {\n        var win, doc;\n        win = $iframe.get(0);\n        win = win.contentWindow || win.contentDocument || win;\n        doc = win.document || win.contentDocument || win;\n        doc.open();\n        doc.write(doctype);\n        doc.close();\n      }\n\n      if (opt.doctypeString) {\n        setDocType($iframe, opt.doctypeString);\n      }\n\n      var $doc = $iframe.contents(),\n        $head = $doc.find(\"head\"),\n        $body = $doc.find(\"body\"),\n        $base = $('base'),\n        baseURL;\n\n      // add base tag to ensure elements use the parent domain\n      if (opt.base === true && $base.length > 0) {\n        // take the base tag from the original page\n        baseURL = $base.attr('href');\n      } else if (typeof opt.base === 'string') {\n        // An exact base string is provided\n        baseURL = opt.base;\n      } else {\n        // Use the page URL as the base\n        baseURL = document.location.protocol + '//' + document.location.host;\n      }\n\n      $head.append('<base href=\"' + baseURL + '\">');\n\n      // import page stylesheets\n      if (opt.importCSS) $(\"link[rel=stylesheet]\").each(function() {\n        var href = $(this).attr(\"href\");\n        if (href) {\n          var media = $(this).attr(\"media\") || \"all\";\n          $head.append(\"<link type='text/css' rel='stylesheet' href='\" + href + \"' media='\" + media + \"'>\");\n        }\n      });\n\n      // import style tags\n      if (opt.importStyle) $(\"style\").each(function() {\n        $head.append(this.outerHTML);\n      });\n\n      // add title of the page\n      if (opt.pageTitle) $head.append(\"<title>\" + opt.pageTitle + \"</title>\");\n\n      // import additional stylesheet(s)\n      if (opt.loadCSS) {\n        if ($.isArray(opt.loadCSS)) {\n          jQuery.each(opt.loadCSS, function(index, value) {\n            $head.append(\"<link type='text/css' rel='stylesheet' href='\" + this + \"'>\");\n          });\n        } else {\n          $head.append(\"<link type='text/css' rel='stylesheet' href='\" + opt.loadCSS + \"'>\");\n        }\n      }\n\n      // copy 'root' tag classes\n      var tag = opt.copyTagClasses;\n      if (tag) {\n        tag = tag === true ? 'bh' : tag;\n        if (tag.indexOf('b') !== -1) {\n          $body.addClass($('body')[0].className);\n        }\n        if (tag.indexOf('h') !== -1) {\n          $doc.find('html').addClass($('html')[0].className);\n        }\n      }\n\n      // print header\n      appendContent($body, opt.header);\n\n      if (opt.canvas) {\n        // add canvas data-ids for easy access after cloning.\n        var canvasId = 0;\n        // .addBack('canvas') adds the top-level element if it is a canvas.\n        $element.find('canvas').addBack('canvas').each(function() {\n          $(this).attr('data-printthis', canvasId++);\n        });\n      }\n\n      appendBody($body, $element, opt);\n\n      if (opt.canvas) {\n        // Re-draw new canvases by referencing the originals\n        $body.find('canvas').each(function() {\n          var cid = $(this).data('printthis'),\n            $src = $('[data-printthis=\"' + cid + '\"]');\n\n          this.getContext('2d').drawImage($src[0], 0, 0);\n\n          // Remove the markup from the original\n          $src.removeData('printthis');\n        });\n      }\n\n      // remove inline styles\n      if (opt.removeInline) {\n        // $.removeAttr available jQuery 1.7+\n        if ($.isFunction($.removeAttr)) {\n          $doc.find(\"body *\").removeAttr(\"style\");\n        } else {\n          $doc.find(\"body *\").attr(\"style\", \"\");\n        }\n      }\n\n      // print \"footer\"\n      appendContent($body, opt.footer);\n\n      setTimeout(function() {\n        if ($iframe.hasClass(\"MSIE\")) {\n          // check if the iframe was created with the ugly hack\n          // and perform another ugly hack out of neccessity\n          window.frames[\"printIframe\"].focus();\n          $head.append(\"<script>  window.print(); </s\" + \"cript>\");\n        } else {\n          // proper method\n          if (document.queryCommandSupported(\"print\")) {\n            $iframe[0].contentWindow.document.execCommand(\"print\", false, null);\n          } else {\n            $iframe[0].contentWindow.focus();\n            $iframe[0].contentWindow.print();\n          }\n        }\n\n        // remove iframe after print\n        if (!opt.debug) {\n          setTimeout(function() {\n            $iframe.remove();\n          }, 1000);\n        }\n\n      }, opt.printDelay);\n\n    }, 333);\n\n  };\n\n  // defaults\n  $.fn.printThis.defaults = {\n    debug: false, // show the iframe for debugging\n    importCSS: true, // import parent page css\n    importStyle: false, // import style tags\n    printContainer: false, // print outer container/$.selector\n    loadCSS: \"\", // load an additional css file - load multiple stylesheets with an array []\n    pageTitle: \"\", // add title to print page\n    removeInline: false, // remove all inline styles\n    printDelay: 150, // variable print delay\n    header: null, // prefix to html\n    footer: null, // postfix to html\n    formValues: true, // preserve input/form values\n    canvas: false, // copy canvas content (experimental)\n    base: false, // preserve the BASE tag, or accept a string for the URL\n    doctypeString: '<!DOCTYPE html>', // html doctype\n    removeScripts: false, // remove script tags before appending\n    copyTagClasses: false // copy classes from the html & body tag\n  };\n})(jQuery);"]}